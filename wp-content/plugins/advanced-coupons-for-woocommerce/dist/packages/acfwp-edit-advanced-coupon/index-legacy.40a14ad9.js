!function(){function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function e(e){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?t(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}System.register([],(function(t,n){"use strict";return{execute:function(){var t=document.createElement("style");t.textContent='#acfw_cart_conditions .cart-weight-field:after{content:"";display:table;clear:both}#acfw_cart_conditions .cart-weight-field label{width:100%}#acfw_cart_conditions .cart-weight-field .field-control{float:left;width:150px;margin:5px 10px 0 0}#acfw_cart_conditions .cart-weight-field .field-control.no-label{margin-top:28px}#acfw_cart_conditions .cart-weight-field .field-control input,#acfw_cart_conditions .cart-weight-field .field-control select{width:100%}#acfw_cart_conditions .cart-weight-field .field-control input[type=checkbox]{width:1rem}#acfw_cart_conditions .cart-weight-field .field-control.wider{width:200px}#acfw_cart_conditions .cart-weight-field .field-control.side-label input{width:80px;margin-right:5px}#acfw_cart_conditions .cart-weight-field .field-control.side-label label{float:left!important;width:auto!important;position:relative;top:5px}#acfw_cart_conditions .has-ordered-product-categories-before-field .field-control.categories{width:100%}#acfw_cart_conditions .has-ordered-product-categories-before-field .select2{width:100%!important}#acfw_cart_conditions .has-ordered-product-categories-before-field .hopcb-btn-remove{color:#dc3332}#acfw_cart_conditions .has-ordered-product-categories-before-field .hopcb-btn-add-category-row{color:#000;font-weight:700;text-decoration:none}#acfw_cart_conditions .product-stock-availability-exists-in-cart-field .field-control.categories{width:100%}#acfw_cart_conditions .product-stock-availability-exists-in-cart-field .select2{width:100%!important}#acfw_cart_conditions .product-stock-availability-exists-in-cart-field .psaeic-btn-remove{color:#dc3332}#acfw_cart_conditions .product-stock-availability-exists-in-cart-field .psaeic-btn-add-category-row{color:#000;font-weight:700;text-decoration:none}#acfw_cart_conditions .total-customer-spend-on-product-category-field .field-control.categories{width:100%}#acfw_cart_conditions .total-customer-spend-on-product-category-field .select2{width:100%!important}#acfw_cart_conditions .total-customer-spend-on-product-category-field .tcspc-btn-remove{color:#dc3332}#acfw_cart_conditions .total-customer-spend-on-product-category-field .tcspc-btn-add-category-row{color:#000;font-weight:700;text-decoration:none}#acfw_cart_conditions .coupons-applied-in-cart-field .condition-field-desc{margin:0;padding:0}#acfw_cart_conditions .coupons-applied-in-cart-field:after{content:"";display:table;clear:both}#acfw_cart_conditions .coupons-applied-in-cart-field .field-control{float:left;width:250px;margin:5px 10px 0 0}#acfw_cart_conditions .coupons-applied-in-cart-field .field-control input,#acfw_cart_conditions .coupons-applied-in-cart-field .field-control label,#acfw_cart_conditions .coupons-applied-in-cart-field .field-control select{width:100%}#acfw_cart_conditions .coupons-applied-in-cart-field .field-control .select2-container{width:100%!important}#acfw_cart_conditions .coupons-applied-in-cart-field .field-control.coupons{width:100%;margin-bottom:.5em}#acfw_cart_conditions .cart-total-field:after{content:"";display:table;clear:both}#acfw_cart_conditions .cart-total-field label{width:100%}#acfw_cart_conditions .cart-total-field .field-control{float:left;width:150px;margin:5px 10px 0 0}#acfw_cart_conditions .cart-total-field .field-control.no-label{margin-top:28px}#acfw_cart_conditions .cart-total-field .field-control input,#acfw_cart_conditions .cart-total-field .field-control select{width:100%}#acfw_cart_conditions .cart-total-field .field-control input[type=checkbox]{width:1rem}#acfw_cart_conditions .cart-total-field .field-control.wider{width:200px}#acfw_cart_conditions .cart-total-field .field-control.side-label input{width:80px;margin-right:5px}#acfw_cart_conditions .cart-total-field .field-control.side-label label{float:left!important;width:auto!important;position:relative;top:5px}#acfw_cart_conditions .cart-total-field .add-edit-product-form{clear:both}#acfw_cart_conditions .cart-total-field .add-edit-product-form:after{content:"";display:table;clear:both}#acfw_add_products{padding-bottom:51px}#acfw_add_products .add-before-cart-condition-check-field{display:inline-block;margin-left:10px}#acfw_add_products .add-before-cart-condition-check-field label{float:none;margin:0;width:auto;font-size:12px}#acfw_add_products .add-before-cart-condition-check-field label input{margin-top:-2px}#acfw_add_products .add-before-cart-condition-check-field label span{display:inline-block;margin-left:5px}.woocommerce_options_panel .date-time-field{float:left;display:flex;width:50%;align-items:top;height:30px}.woocommerce_options_panel .date-time-field input[type=text].date-field{width:calc(100% - 135px);margin-right:5px}.woocommerce_options_panel .date-time-field span{margin-right:5px}.woocommerce_options_panel .date-time-field input.date-hour{width:60px;margin-right:5px}.woocommerce_options_panel .date-time-field input.date-minute{width:60px}.woocommerce_options_panel .clear-scheduler-fields{position:relative;top:2px;display:inline-block;color:#dc3232;text-decoration:none;box-shadow:none!important}.woocommerce_options_panel .acfw-sort-coupon-priority-field select{width:25%;margin-right:5px}.woocommerce_options_panel .acfw-sort-coupon-priority-field input[type=number]{width:calc(25% - 10px)}#acfw_bogo_deals .bogo-auto-add-products-field{display:none}#acfw_bogo_deals .bogo-auto-add-products-field.show{display:block}span.repeat-incompatible{display:inline-block;width:65%;max-width:500px;margin:10px 0 0;padding:5px 10px;border-left:5px solid #11a0d2;box-shadow:0 0 8px -2px rgba(0,0,0,.3)}#acfw-virtual-coupon p.save-notice{border-left:4px solid #11a0d2;padding:.5em .7em;font-size:.9em;box-shadow:0 0 8px -2px rgba(0,0,0,.3)}p._acfw_percentage_discount_cap_field{display:none}p._acfw_percentage_discount_cap_field.show{display:block}#acfw_bogo_deals.migration-running .acfw-overlay{display:block;background-image:none!important}#woocommerce-coupon-data #general_coupon_data.acfw-bogo-type{min-height:auto}#woocommerce-coupon-data #general_coupon_data.acfw-bogo-type p.form-field._acfw_coupon_label_field{display:block}#woocommerce-coupon-data .vc-manage-url-coupon{font-size:13px;font-style:italic}\n',document.head.appendChild(t);function n(t,e=""){e||(e="show");let n="show"===e?"block":"none";jQuery(t).css("display",n)}function o(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039"};return t.replace(/[&<>"']/g,(t=>e[t]))}function i(){const{decimal_separator:t}=acfw_edit_coupon,e=jQuery(this);let n=e.val()+"";n=="0"+t&&e.val("0"),"0"!=n&&n.substring(0,2)!="0"+t&&(n=n.replace(/^0+/,""),n=n.substring(0,1)==t?"0"+n:n,e.val(n))}function a(t,e,n="value",o="label"){return t.map((t=>`<option value="${t[n]}" ${t[n]==e?"selected":""}>${t[o]}</option>`)).toString().replace(/>,</g,"><")}function c(t,e){return t==e?"selected":""}function l(t=""){const{exactly:e,anyexcept:n,morethan:o,lessthan:i}=acfw_edit_coupon.condition_field_options;return`\n    <option value="=" ${c(t,"=")}>${e}</option>\n    <option value="!=" ${c(t,"!=")}>${n}</option>\n    <option value=">" ${c(t,">")}>${o}</option>\n    <option value="<" ${c(t,"<")}>${i}</option>\n  `}function d(t){const{decimal_separator:e}=acfw_edit_coupon,n=parseFloat(t.replace(e,"."));return isNaN(n)?0:n}const s=jQuery,{cart_weight:r}=acfw_edit_coupon.cart_condition_fields;function p(t){const{condition:e,value:n}=t,{title:o,desc:i,field:a}=r,{condition_label:c}=acfw_edit_coupon;return`\n    <div class="cart-weight-field condition-field" data-type="cart-weight">\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">${o}</h3>\n        <label>${i}</label>\n        <div class="field-control">\n            <label>${c}</label>\n            <select class="condition-select">\n                ${l(e)}\n            </select>\n        </div>\n        <div class="field-control">\n            <label>${a}</label>\n            <input class="condition-value wc_input_decimal" type="text" value="${n>=0?n:""}">\n        </div>\n    </div>\n    `}function u(t){return{condition:s(t).find(".condition-select").val(),value:s(t).find(".condition-value").val()}}function f(t){const{product_id:e,product_label:n,condition_label:i,quantity:a}=t;return`\n    <tr>\n        <td class="product" data-product="${o(JSON.stringify(t))}" data-product_id="${e}">\n            ${n}\n        </td>\n        <td class="condition">${i}</td>\n        <td class="quantity">${a}</td>\n        <td class="actions">\n            <a class="edit" href="javascript:void(0)"><span class="dashicons dashicons-edit"></span></a>\n            <a class="remove" href="javascript:void(0)"><span class="dashicons dashicons-no"></span></a>\n        </td>\n    </tr>\n    `}function _(t=4){const{no_products_added:e}=acfw_edit_coupon;return`\n    <tr class="no-result">\n        <td colspan="${t}">${e}</td>\n    </tr>\n    `}const h=jQuery,{product_quantity:b}=acfw_edit_coupon.cart_condition_fields;function v(t){const{add_product_label:e}=acfw_edit_coupon,{title:n,product_col:o,condition_col:i,quantity_col:a}=b;let c="";const l=[];if(t.length)for(let d of t)l.push(d.product_id),c+=f(d);else c=_(4);return`\n    <div class="product-quantity-condition-field condition-set"  data-type="product-quantity">\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">${n}</h3>\n        <table class="product-quantity-condition-table acfw-styled-table" data-exclude="${JSON.stringify(l)}">\n            <thead>\n                <tr>\n                    <th class="product">${o}</th>\n                    <th class="condition">${i}</th>\n                    <th class="quantity">${a}</th>\n                    <th class="actions"></th>\n                </tr>\n            </thead>\n            <tbody>\n                ${c}\n            </tbody>\n            <tfoot>\n                <tr>\n                    <td colspan="4">\n                        <a class="add-table-row" href="javascript:void(0);">\n                            <i class="dashicons dashicons-plus"></i>\n                            ${e}\n                        </a>\n                    </td>\n                </tr>\n            </tfoot>\n        </table>\n    </div>\n    `}function m(t){const e=t.querySelectorAll(".product-quantity-condition-table tr td.product"),n=[];return e.forEach((t=>n.push(h(t).data("product")))),n}const y=jQuery,{customer_registration_date:g}=acfw_edit_coupon.cart_condition_fields;function w(t){const{title:e,desc:n,hours:o}=g;return`\n    <div class="customer-registration-date-field condition-field" data-type="customer-registration-date">\n\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">${e}</h3>\n\n        <label>${n}</label>   \n        <div class="field-control side-label">\n            <input class="condition-value" type="number" min="1" value="${t&&t>-1?t:0}">\n            <label>${o}</label>\n        </div>\n    </div>\n    `}function $(t){return parseInt(y(t).find(".condition-value").val())}const x=jQuery,{customer_last_ordered:j}=acfw_edit_coupon.cart_condition_fields;function k(t){const{title:e,desc:n,hours:o}=j;return`\n    <div class="customer-last-ordered-field condition-field" data-type="customer-last-ordered">\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">${e}</h3>\n        <label>${n}</label>    \n        <div class="field-control side-label">\n            <input class="condition-value" type="number" min="0" value="${t&&t>-1?t:0}">\n            <label>${o}</label>\n        </div>\n    </div>\n    `}function q(t){return parseInt(x(t).find(".condition-value").val())}const S=jQuery,{total_customer_spend:Q}=acfw_edit_coupon.cart_condition_fields;function O(t){const{condition:e,value:n,offset:o}=t,{condition_label:i}=acfw_edit_coupon,{title:a,desc:c,total_spend:s,days_offset:r}=Q,p=n?d(n):0;return`\n    <div class="total-customer-spend-field condition-field" data-type="total-customer-spend">\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">${a}</h3>\n        <label>${c}</label>\n        <div class="field-control">\n            <label>${i}</label>\n            <select class="condition-select">\n                ${l(e)}\n            </select>\n        </div>\n        <div class="field-control">\n            <label>${s}</label>\n            <input class="condition-value wc_input_price" type="text" min="0" value="${!isNaN(p)&&p>-1?n:0}">\n        </div>\n        <div class="field-control">\n            <label>${r}</label>\n            <input class="condition-offset" type="number" min="0" value="${o&&o>-1?o:0}">\n        </div>\n    </div>\n    `}function z(t){return{condition:S(t).find(".condition-select").val(),value:S(t).find(".condition-value").val(),offset:S(t).find(".condition-offset").val()}}class N{table_placeholder_row_template(t=4){const{no_products_added:e}=acfw_edit_coupon;return` \n            <tr class="no-result">\n                <td colspan="${t}">${e}</td>\n            </tr>\n        `}table_markup(){const{add_product_label:t}=acfw_edit_coupon,{tableproduct:e}=acfw_psaeic,{products:n}=e,{label:o}=n;return`\n            <table class="product-stock-availability-exists-in-cart-table acfw-styled-table">\n                <thead>\n                    <tr>\n                        <th class="product">${o.columns.product}</th>\n                        <th class="condition">${o.columns.condition}</th>\n                        <th class="quantity">${o.columns.quantity}</th>\n                        <th class="actions"></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${(()=>{let t="";if(n&&n.data&&n.data.length)for(let o of n.data)e.row.data=o,t+=e.row.template_view_row();else t=e.template.table_placeholder_row_template(4);return t})()}\n                </tbody>\n                <tfoot>\n                    <tr>\n                        <td colspan="4">\n                            <a class="psaeic-btn-add-category-row" href="javascript:void(0);" onclick="acfw_psaeic.tableproduct.trigger.trigger_btn_add_category(event)">\n                                <i class="dashicons dashicons-plus"></i>\n                                ${t}\n                            </a>\n                        </td>\n                    </tr>\n                </tfoot>\n            </table>\n        `}}const C=jQuery;class I{trigger_btn_add_category(t){const{tableproduct:e}=acfw_psaeic,n=t.currentTarget;e.row.element.$button=C(n),e.row.data=e.row.data_initial(),e.row.add()}trigger_btn_action_add(t){const{tableproduct:e}=acfw_psaeic,n=t.currentTarget;e.row.element.$button=C(n),e.row.view()}trigger_btn_action_edit(t){const{tableproduct:e}=acfw_psaeic,n=t.currentTarget;e.row.element.$button=C(n),e.row.edit()}trigger_btn_action_cancel(t){const{tableproduct:e}=acfw_psaeic,n=t.currentTarget;e.row.element.$button=C(n),e.row.cancel()}trigger_btn_action_remove(t){const{tableproduct:e}=acfw_psaeic,n=t.currentTarget;e.row.element.$button=C(n),e.row.detect(),e.row.remove()}}const P=jQuery;class D{constructor(){this._element={$button:P(null),$table:P(this),$tbody:P(this),$row:P(this),$product:P(this),$condition:P(this),$quantity:P(this),colspan:4,data:[]},this._data=this.data_initial()}get element(){return this._element}set element(t){this._element=t}get data(){return this._data}data_initial(){return{product:{id:0,label:""},condition:{id:"",label:""},quantity:0}}set data(t){this._data=t}template_initiate_select2(){this._element.$tbody.find("select.wc-product-search").trigger("change"),P("body").trigger("wc-enhanced-select-init")}template_add_edit_row(){var t;const{tableproduct:e}=acfw_psaeic,{products:n}=e,{edit:i,add:a,cancel:c}=acfw_edit_coupon.product_table_buttons,{type_to_search:d}=acfw_edit_coupon.bogo_form_fields;return`\n            <tr class="add-edit-form adding">\n                <td class="product" data-product="${"object"==typeof this._data?o(JSON.stringify(this._data)):0}">\n                    <div class="object-search-wrap">\n                        <select class="psaeic-select-product wc-product-search" data-placeholder="${d}" data-action="acfwp_add_products_search">\n                            ${"object"==typeof this._data&&this._data.product.id?`<option value="${this._data.product.id}" selected>${this._data.product.label}</option>`:""}\n                        </select>                        \n                    </div>\n                </td>\n                <td class="condition">                \n                    <select class="condition-select psaeic-select-condition">\n                        ${Object.keys(n.options.conditions).map((t=>{let e=n.options.conditions[t];return`<option value="${t}" ${"object"==typeof this._data&&this._data.condition.id==t?"selected":""}>${e}</option>`})).join("")}\n                          ${l(null===(t=this._data)||void 0===t||null===(t=t.condition)||void 0===t?void 0:t.id)}\n                    </select> \n                </td>\n                <td class="quantity">\n                  <input disabled="true" type="number" class="condition-quantity" value="${"object"==typeof this._data?this._data.quantity:0}" min="0">\n                </td>\n                <td class="actions">\n                    <button type="button" class="button-primary psaeic-btn-add" onclick="acfw_psaeic.tableproduct.trigger.trigger_btn_action_add(event)">${"object"==typeof this._data&&this._data.product.id?i:a}</button>\n                    <button type="button" class="button psaeic-btn-cancel" onclick="acfw_psaeic.tableproduct.trigger.trigger_btn_action_cancel(event)">${c}</button>\n                </td>\n            </tr>\n        `}template_view_row(){return`\n            <tr>\n                <td class="product product-${this._data.product.id} object" data-product="${o(JSON.stringify(this._data))}">\n                    ${this._data.product.label}\n                </td>\n                <td class="condition">${this._data.condition.label}</td>\n                <td class="quantity">${["instock","outofstock","onbackorder"].includes(this._data.condition.id)?"-":void 0!==this._data.quantity?this._data.quantity:"-"}</td>\n                <td class="actions">\n                    <a class="psaeic-btn-edit" href="javascript:void(0)" onclick="acfw_psaeic.tableproduct.trigger.trigger_btn_action_edit(event)"><span class="dashicons dashicons-edit"></span></a>\n                    <a class="psaeic-btn-remove" href="javascript:void(0)" onclick="acfw_psaeic.tableproduct.trigger.trigger_btn_action_remove(event)"><span class="dashicons dashicons-no"></span></a>\n                </td>\n            </tr>\n        `}detect(){this._element.$button&&(this._element.$row=this._element.$button.closest("tr"),this._element.$table=this._element.$button.closest(".acfw-styled-table"),this._element.$tbody=this._element.$table.find("tbody"),this._element.$product=this._element.$row.find(".psaeic-select-product"),this._element.$condition=this._element.$row.find(".psaeic-select-condition"),this._element.$quantity=this._element.$row.find(".condition-quantity"),this._element.colspan=this._element.$row.find("td").length,this._element.data=this._element.$row.find("td.product").data("product"))}read(){var t,e,n,o,i,a,c;const{$product:l,$condition:d,$quantity:s}=this._element;this._data={product:{id:parseInt(null!==(t=null==l||null===(e=l.val())||void 0===e?void 0:e.toString())&&void 0!==t?t:""),label:null!==(n=null===(o=P(l))||void 0===o||null===(o=o.select2("data")[0])||void 0===o?void 0:o.text.replace("\n","").replace(/\s+/g," ").trim())&&void 0!==n?n:""},condition:{id:null!==(i=null==d||null===(a=d.val())||void 0===a?void 0:a.toString())&&void 0!==i?i:"",label:d.find("option:selected").text().replace("\n","").replace(/\s+/g," ").trim()},quantity:parseInt((null!==(c=null==s?void 0:s.val())&&void 0!==c?c:"0").toString())}}validate(t=!0){const{tableproduct:e}=acfw_psaeic,{fill_form_propery_error_msg:n}=acfw_edit_coupon,{$product:o,$condition:i}=this._element,{product:a}=this._data;return o.val()&&i.val()?(this._element.$table.find("td.product.object").each((function(){if(P(this).data("product").product.id==a.id)return vex.dialog.alert(e.products.exists),!1})),t):(vex.dialog.alert(n),!1)}add(){this.detect(),this._data.product.id&&!this.validate()||(this._element.$tbody.find("tr.no-result").remove(),this._element.$tbody.append(this.template_add_edit_row()),this.template_initiate_select2())}edit(){this.detect(),this._data=this._element.data,this._element.$row.replaceWith(this.template_add_edit_row()),this.template_initiate_select2();const t=P(".condition-quantity");["instock","outofstock","onbackorder"].includes(this._data.condition.id)?t.prop("disabled",!0):t.prop("disabled",!1)}view(t={}){this.template_initiate_select2(),this.detect(),Object.keys(t).length||this.read(),this.validate()&&this._element.$row.replaceWith(this.template_view_row())}cancel(){this.detect(),this.remove()}remove(){const{tableproduct:t}=acfw_psaeic;this._element.$row.remove(),this._element.$tbody.find("tr").length<=0&&this._element.$tbody.html(t.template.table_placeholder_row_template(this._element.colspan))}}class A{constructor(){this._products={},this._trigger={},this._template={},this._row={}}get products(){return this._products}set products(t){this._products=t}get template(){return this._template}get trigger(){return this._trigger}get row(){return this._row}build(){this._row=new D,this._template=new N,this._trigger=new I,this.save()}save(){window.acfw_psaeic=e(e({},acfw_edit_coupon.cart_condition_fields.acfw_product_stock_availability_exists_in_cart),{},{tableproduct:this})}}const J=jQuery,{product_stock_availability_exists_in_cart:E}=acfw_edit_coupon.cart_condition_fields;function T(t={}){const{title:e,products:n}=E;n.data=t.products;const o=new A;return o.products=n,o.build(),`\n        <div class="product-stock-availability-exists-in-cart-field condition-set" data-type="product-stock-availability-exists-in-cart">\n            <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n            <h3 class="condition-field-title">${e}</h3>\n            \n            ${o.template.table_markup()}\n        </div>\n    `}function W(t){const e=t.querySelectorAll(".product-stock-availability-exists-in-cart-table tr td.product"),n=[];return e.forEach((t=>n.push(J(t).data("product")))),{products:n}}function M(){const t=J(this),e=t.closest("tr").find(".condition-quantity"),n=e.closest(".field-control");["instock","outofstock","onbackorder"].includes(t.val())?(e.prop("disabled",!0),e.val(0)):(e.prop("disabled",!1),n.show())}const F=jQuery,{has_ordered_before:H}=acfw_edit_coupon.cart_condition_fields;function V(t={}){const{condition:e,value:n,products:o}=t,{cart_condition_fields:i,add_product_label:a}=acfw_edit_coupon,{product_col:l,condition_col:d,quantity_col:s}=i.product_quantity,{title:r,type:p,within_a_period:u,number_of_orders:h,num_prev_days:b}=i.has_ordered_before,v=[];let m="";if(o&&o.length)for(let c of o)v.push(c.product_id),m+=f(c);else m=_(4);return`\n    <div class="cart-quantity-field condition-field condition-set" data-type="has-ordered-before">\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">${r}</h3>\n        <div class="field-control">\n            <label>${p}</label>\n            <select class="condition-select has-ordered-before-type">\n                <option value="within-a-period" ${c(e,"within-a-period")}>${u}</option>\n                <option value="number-of-orders" ${c(e,"number-of-orders")}>${h}</option>\n            </select>\n        </div>\n        <div class="field-control condition-type-value">\n            <label>${b}</label>\n            <input class="condition-value" type="number" min="0" value="${n}">\n        </div>\n        <table class="has-ordered-before-products-table acfw-styled-table" data-exclude="${JSON.stringify(v)}">\n            <thead>\n                <tr>\n                    <th class="product">${l}</th>\n                    <th class="condition">${d}</th>\n                    <th class="quantity">${s}</th>\n                    <th class="actions"></th>\n                </tr>\n            </thead>\n            <tbody>\n                ${m}\n            </tbody>\n            <tfoot>\n                <tr>\n                    <td colspan="4">\n                        <a class="add-table-row" href="javascript:void(0);">\n                            <i class="dashicons dashicons-plus"></i>\n                            ${a}\n                        </a>\n                    </td>\n                </tr>\n            </tfoot>\n        </table>\n    </div>\n    `}function K(t){const e=t.querySelectorAll(".has-ordered-before-products-table tr td.product"),n=[];return e.forEach((t=>n.push(F(t).data("product")))),{condition:F(t).find(".condition-select").val(),value:parseInt(F(t).find(".condition-value").val()),products:n}}const R=jQuery,{has_ordered_product_categories_before:X}=acfw_edit_coupon.cart_condition_fields;function B(){X.default_data_value={},X.template_callback=G,X.scraper_callback=U,function(){const t=document.querySelector("#acfw_cart_conditions");R(t).on("change","select.hopcb-select-type-condition",(function(){const{within_a_period_label:t,number_of_orders_label:e}=acfw_edit_coupon,n=R(this),o=n.closest(".has-ordered-product-categories-before-field").find(".hopcb-condition-type-value label");"within-a-period"===n.val()?o.text(t):o.text(e)}))}()}function G(t={}){const{condition:e,quantity:n}=t,{condition_label:o,cart_condition_fields:{cart_quantity:{field:i},has_ordered_product_categories_before:{title:a,type:l,within_a_period:d,number_of_orders:s,num_prev_days:r,categories:p},product_category:{placeholder:u}},condition_field_options:{exactly:f,anyexcept:_,morethan:h,lessthan:b}}=acfw_edit_coupon;let v=t.type&&t.type.label?t.type.label:d,m=[{value:"=",label:f},{value:"!=",label:_},{value:">",label:h},{value:"<",label:b}];return`\n        <div class="has-ordered-product-categories-before-field condition-field condition-set" data-type="has-ordered-product-categories-before">\n            <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n            <h3 class="condition-field-title">${a}</h3>\n            \n            <div class="field-control">\n                <label>${l}</label>\n                <select class="hopcb-select-type-condition">                    \n                    ${[{value:"within-a-period",label:d},{value:"number-of-orders",label:s}].map((e=>{let n=t.type?t.type.condition:"within-a-period";const{value:o,label:i}=e;return`<option value="${o}" ${c(n,o)}>${i}</option>`})).join("")}\n                </select>\n            </div>\n            <div class="field-control hopcb-condition-type-value">\n                <label>${v}</label>\n                <input class="hopcb-select-type-value" type="number" min="0" value="${t.type&&t.type.value?t.type.value:0}">\n            </div>\n            <div class="field-control categories">\n                <label></label>\n                <select class="hopcb-select-categories wc-enhanced-select" multiple data-placeholder="${u}">\n                    ${Object.keys(p.options).map((e=>{let n=p.options[e];return`<option value="${e}" ${t.categories&&t.categories.indexOf(parseInt(e))>=0?"selected":""}>${n}</option>`})).join("")}\n                </select>\n            </div>\n            <div class="field-control">\n                <label>${o}</label>\n                <select class="hopcb-select-condition">\n                    ${m.map((e=>{const{value:n,label:o}=e;return`<option value="${n}" ${(t.condition?t.condition:">")===n?"selected":""}>${o}</option>`})).join("")}\n                </select>\n            </div>\n            <div class="field-control">\n                <label>${i}</label>\n                <input type="number" class="hopcb-select-quantity" value="${n}" min="${"<"==e?1:0}">\n            </div>\n            \n        </div>\n    `}function L(t){if(null==t)return!1;if("string"==typeof t&&""===t.trim())return!1;if(Array.isArray(t)&&0===t.length)return!1;if("object"==typeof t)for(const e in t)if(!L(t[e]))return!1;return!0}function U(t){t.querySelectorAll(".has-ordered-product-categories-before-table tr td.category");let e={categories:R(t).find(".hopcb-select-categories").val(),condition:R(t).find(".hopcb-select-condition").val(),quantity:R(t).find(".hopcb-select-quantity").val(),type:{condition:R(t).find(".hopcb-select-type-condition").val(),label:R(t).find(".hopcb-select-type-condition option:selected").text(),value:R(t).find(".hopcb-select-type-value").val()}};return!!L(e)&&e}const Y=jQuery,{total_customer_spend_on_product_category:Z}=acfw_edit_coupon.cart_condition_fields;function tt(){Z.default_data_value={},Z.template_callback=et,Z.scraper_callback=ot,function(){const t=document.querySelector("#acfw_cart_conditions");Y(t).on("change","select.tcspc-select-type-condition",(function(){const{within_a_period_label:t,number_of_orders_label:e}=acfw_edit_coupon,n=Y(this),o=n.closest(".total-customer-spend-on-product-category-field").find(".tcspc-condition-type-value label");"within-a-period"===n.val()?o.text(t):o.text(e)}))}()}function et(t={}){const{condition:e,spend:n}=t,{condition_label:o,cart_condition_fields:{total_customer_spend:{total_spend:i},total_customer_spend_on_product_category:{title:a,type:l,within_a_period:d,number_of_orders:s,num_prev_days:r,categories:p},product_category:{placeholder:u}},condition_field_options:{exactly:f,anyexcept:_,morethan:h,lessthan:b}}=acfw_edit_coupon;let v=t.type&&t.type.label?t.type.label:d,m=[{value:"=",label:f},{value:"!=",label:_},{value:">",label:h},{value:"<",label:b}];return`\n        <div class="total-customer-spend-on-product-category-field condition-field condition-set" data-type="total-customer-spend-on-product-category">\n            <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n            <h3 class="condition-field-title">${a}</h3>\n            \n            <div class="field-control">\n                <label>${l}</label>\n                <select class="tcspc-select-type-condition">                    \n                    ${[{value:"within-a-period",label:d},{value:"number-of-orders",label:s}].map((e=>{let n=t.type?t.type.condition:"within-a-period";const{value:o,label:i}=e;return`<option value="${o}" ${c(n,o)}>${i}</option>`})).join("")}\n                </select>\n            </div>\n            <div class="field-control tcspc-condition-type-value">\n                <label>${v}</label>\n                <input class="tcspc-select-type-value" type="number" min="0" value="${t.type&&t.type.value?t.type.value:0}">\n            </div>\n            <div class="field-control categories">\n                <label></label>\n                <select class="tcspc-select-categories wc-enhanced-select" multiple data-placeholder="${u}">\n                    ${Object.keys(p.options).map((e=>{let n=p.options[e];return`<option value="${e}" ${t.categories&&t.categories.indexOf(parseInt(e))>=0?"selected":""}>${n}</option>`})).join("")}\n                </select>\n            </div>\n            <div class="field-control">\n                <label>${o}</label>\n                <select class="tcspc-select-condition">\n                    ${m.map((e=>{const{value:n,label:o}=e;return`<option value="${n}" ${(t.condition?t.condition:">")===n?"selected":""}>${o}</option>`})).join("")}\n                </select>\n            </div>\n            <div class="field-control">\n                <label>${i}</label>\n                <input type="text" class="tcspc-select-spend wc_input_decimal" value="${null!=n?n:0}">\n            </div>\n            \n        </div>\n    `}function nt(t){if(null==t)return!1;if("string"==typeof t&&""===t.trim())return!1;if(Array.isArray(t)&&0===t.length)return!1;if("object"==typeof t)for(const e in t)if(!nt(t[e]))return!1;return!0}function ot(t){let e={categories:Y(t).find(".tcspc-select-categories").val(),condition:Y(t).find(".tcspc-select-condition").val(),spend:Y(t).find(".tcspc-select-spend").val(),type:{condition:Y(t).find(".tcspc-select-type-condition").val(),label:Y(t).find(".tcspc-select-type-condition option:selected").text(),value:Y(t).find(".tcspc-select-type-value").val()}};return!!nt(e)&&e}const it=jQuery,{shipping_zone_region:at}=acfw_edit_coupon.cart_condition_fields;function ct(t){const{value:e}=t,{title:n,zone_label:i,zone_placeholder:a,regions_label:l,regions_placeholder:d,zone_options:s}=at,r=e&&e.length?e:[];return`\n    <div class="shipping-zone-region-field condition-field" data-type="shipping-zone-region"\n        data-zones="${o(JSON.stringify(s))}"\n        data-regions="${o(JSON.stringify(r))}">\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">${n}</h3>\n        <div class="field-control">\n            <label>${i}</label>\n            <select class="condition-select wc-enhanced-select" data-placeholder="${o(a)}">\n                <option value="">${a}</option>\n                ${function(t,e){const{condition:n}=t;let o="";for(let i in e){const t=e[i];o+=`\n            <option value="${i}" ${c(n,i)}>\n                ${t.name}\n            </option>\n        `}return o}(t,s)}\n            </select>\n        </div>\n        <div class="field-control regions">\n            <label>${l}</label>\n            <select class="condition-value wc-enhanced-select" multiple data-placeholder="${o(d)}">\n            </select>\n        </div>\n    </div>\n    `}function lt(t){return{condition:it(t).find(".condition-select").val(),value:it(t).find(".condition-value").val()}}const dt=jQuery,{custom_taxonomy:st}=acfw_edit_coupon.cart_condition_fields,{cart_condition_fields:rt,condition_field_options:pt}=acfw_edit_coupon;function ut(t){const{condition:e,value:n,qtyCondition:i,quantity:a}=t,{title:l,select_taxonomy:d,product_type:s,select_terms:r}=st,{field:p}=rt.cart_quantity,{condition_label:u}=acfw_edit_coupon,{exactly:f,anyexcept:_,morethan:h,lessthan:b}=pt,v=i||">",m=n&&n.length?n:[];return`\n    <div class="custom-taxonomy-field condition-field" data-type="custom-taxonomy" \n      data-selected_terms="${o(JSON.stringify(m))}">\n      <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n      <h3 class="condition-field-title">${l}</h3>\n      <div class="field-control">\n        <select class="condition-select wc-enhanced-select custom-taxonomy" data-placeholder="${d}">\n          <option value="">${d}</option>\n          ${function(t){const{tax_options:e,product_type:n}=st;let o="";for(let i of e){const{name:e,label:n}=i;o+=`\n      <option value="${e}" ${c(t,e)}>\n        ${n}\n      </option>\n    `}return o}(e)}\n        </select>\n      </div>\n      <div class="field-control field-control-wide">\n        <select class="condition-value wc-enhanced-select" multiple data-placeholder="${r}">\n        </select>\n      </div>\n      <div class="field-control condition">\n            <label>${u}</label>\n            <select class="condition-select qty-condition-select">\n                <option value="=" ${"="==v?"selected":""}>${f}</option>\n                <option value="!=" ${"!="==v?"selected":""}>${_}</option>\n                <option value=">" ${">"==v?"selected":""}>${h}</option>\n                <option value="<" ${"<"==v?"selected":""}>${b}</option>\n            </select>\n        </div>\n        <div class="field-control quantity">\n            <label>${p}</label>\n            <input type="number" class="condition-quantity" value="${"number"==typeof a?a:0}" min="${"<"==i?1:0}">\n        </div>\n    </div>\n    `}function ft(t){return{condition:dt(t).find(".condition-select").val(),value:dt(t).find(".condition-value").val(),qtyCondition:dt(t).find(".qty-condition-select").val(),quantity:dt(t).find(".condition-quantity").val()}}const _t=jQuery,{cart_condition_fields:ht}=acfw_edit_coupon,{custom_user_meta:bt,custom_cart_item_meta:vt}=ht;function mt(t,e){const{condition:n,key:o,value:i,type:a}=t,{condition_label:d}=acfw_edit_coupon,{title:s,meta_key:r,meta_value:p,value_type:u}=ht[e],f=e.replace(/_/g,"-");return`\n    <div class="${f}-field condition-field" data-type="${f}">\n      <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n      <h3 class="condition-field-title">${s}</h3>\n      <div class="field-control wider">\n        <label>${u}</label>\n        <select class="value-type">\n          ${function(t,e){const{type_options:n}=ht[e];let o="";for(let i in n){const e=n[i];o+=`<option value="${i}" ${c(t,i)}>${e}</option>`}return o}(a,e)}\n        </select>\n      </div>\n      <div class="field-control">\n        <label>${d}</label>\n        <select class="condition-select">\n          ${l(n)}\n          ${function(t=""){const{exists:e,notexist:n}=acfw_edit_coupon.condition_exists_field_option;return`\n    <option value="exists" ${c(t,"exists")}>${e}</option>\n    <option value="notexist" ${c(t,"notexist")}>${n}</option>\n  `}(n)}\n          ${function(t=""){const{contains:e}=acfw_edit_coupon.condition_contains_field_option;return`\n    <option value="contains" ${c(t,"contains")}>${e}</option>\n  `}(n)}\n        </select>\n      </div>\n      <div class="field-control wider">\n        <label>${r}</label>\n        <input class="condition-key" type="text" value="${o||""}">\n      </div>\n      <div class="field-control wider">\n        <label>${p}</label>\n        <input class="condition-value" type="text" value="${i||i>-1?i:""}">\n      </div>\n    </div>\n  `}function yt(t){return{condition:_t(t).find(".condition-select").val(),key:_t(t).find(".condition-key").val(),value:_t(t).find(".condition-value").val(),type:_t(t).find(".value-type").val()}}const gt=jQuery,{number_of_orders:wt}=acfw_edit_coupon.cart_condition_fields;function $t(t){const{condition:e,value:n,offset:o}=t,{condition_label:i}=acfw_edit_coupon,{title:a,desc:c,count_label:d,prev_days_label:s}=wt;return`\n    <div class="number-of-orders-field cart-quantity-field condition-field" data-type="number-of-orders">\n      <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n      <h3 class="condition-field-title">${a}</h3>\n      <label>${c}</label>\n      <div class="field-control">\n        <label>${i}</label>\n        <select class="condition-select">\n            ${l(e)}\n        </select>\n      </div>\n      <div class="field-control">\n          <label>${d}</label>\n          <input class="condition-value" type="number" min="0" value="${n>=0?n:""}">\n      </div>\n      <div class="field-control">\n          <label>${s}</label>\n          <input class="condition-offset" type="number" min="0" value="${o>=0?o:""}">\n      </div>\n    </div>\n  `}function xt(t){return{condition:gt(t).find(".condition-select").val(),value:gt(t).find(".condition-value").val(),offset:gt(t).find(".condition-offset").val()}}const jt=jQuery,{coupons_applied_in_cart:kt}=acfw_edit_coupon.cart_condition_fields;function qt(t){const{condition:e,value:n,quantity:o,options:i}=t,{condition_label:a}=acfw_edit_coupon,l=jt("#post_ID").val(),d=JSON.stringify(n),{title:s,desc:r,coupons_label:p,quantity_label:u,select_coupons:f}=kt;return`\n    <div class="coupons-applied-in-cart-field condition-field" data-type="coupons-applied-in-cart">\n      <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n      <h3 class="condition-field-title">${s}</h3>\n      <p class="condition-field-desc">${r}</p>\n      <div class="field-control coupons">\n        <label>${p}</label>\n        <select multiple class="wc-product-search condition-value" \n          data-placeholder="${f}" \n          value="${d}" \n          data-action="acfw_search_coupons" \n          data-exclude="[${l}]"\n          data-include="true"\n        >${function(t){let e="";for(let n in t){e+=`<option value="${n}" selected>${t[n]}</option>`}return e}(i)}</select>\n      </div>\n      <div class="field-control">\n        <label>${a}</label>\n        <select class="condition-select">\n          ${function(t){const{condition_options:e}=kt;let n="";for(let o in e){const i=e[o];n+=`<option value="${o}" ${c(t,o)}>${i}</option>`}return n}(e)}\n        </select>\n      </div>\n      <div class="field-control">\n        <label>${u}</label>\n        <input type="number" value="${null!=o?o:1}" min="1" class="condition-quantity">\n      </div>\n    </div>\n  `}function St(t){return{condition:jt(t).find(".condition-select").val(),value:jt(t).find(".condition-value").val(),quantity:jt(t).find(".condition-quantity").val()}}function Qt(){const t=jt(this),e=t.closest(".coupons-applied-in-cart-field").find(".condition-quantity"),n=e.closest(".field-control");console.log("field",t.val()),"atleast"===t.val()?(e.prop("disabled",!1),n.show()):(e.prop("disabled",!0),n.hide())}const Ot=jQuery,{cart_total:zt}=acfw_edit_coupon.cart_condition_fields;function Nt(t){const{condition:e,value:n,include_tax:o}=t,{title:i,desc:a,field:c,tax_label:d}=zt,{condition_label:s}=acfw_edit_coupon;return`\n    <div class="cart-total-field condition-field" data-type="cart-total">\n    <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n    <h3 class="condition-field-title">${i}</h3>\n    <label>${a}</label>\n    <div class="field-control">\n      <label>${s}</label>\n      <select class="condition-select">\n        ${l(e)}\n      </select>\n    </div>\n    <div class="field-control">\n      <label>${c}</label>\n      <input class="condition-value wc_input_price" type="text" value="${n||""}">\n    </div>\n    <div class="field-control no-label">\n      <label><input type="checkbox" class="condition-include-tax" type="checkbox" ${"yes"===o?"checked":""} /> ${d}</label>\n    </div>\n    </div>\n    `}function Ct(t){const e=t.querySelector("input.condition-include-tax");return{condition:Ot(t).find(".condition-select").val(),value:Ot(t).find(".condition-value").val(),include_tax:e.checked?"yes":"no"}}const It=jQuery;function Pt(){const t=document.querySelector("#acfw_cart_conditions");b.default_data_value={},b.template_callback=v,b.scraper_callback=m,r.default_data_value={},r.template_callback=p,r.scraper_callback=u,g.template_callback=w,g.scraper_callback=$,j.template_callback=k,j.scraper_callback=q,Q.default_data_value={},Q.template_callback=O,Q.scraper_callback=z,E.default_data_value={},E.template_callback=T,E.scraper_callback=W,J("#acfw_cart_conditions").on("change",".product-stock-availability-exists-in-cart-field .condition-select",M),H.default_data_value={},H.template_callback=V,H.scraper_callback=K,B(),tt(),at.default_data_value={},at.template_callback=ct,at.scraper_callback=lt,st.default_data_value={},st.template_callback=ut,st.scraper_callback=ft,bt.default_data_value={},bt.template_callback=mt,bt.scraper_callback=yt,vt.default_data_value={},vt.template_callback=mt,vt.scraper_callback=yt,wt.default_data_value={},wt.template_callback=$t,wt.scraper_callback=xt,kt.default_data_value={condition:"",value:[]},kt.template_callback=qt,kt.scraper_callback=St,jt("#acfw_cart_conditions").on("change",".coupons-applied-in-cart-field .condition-select",Qt),zt.default_data_value={},zt.template_callback=Nt,zt.scraper_callback=Ct,It(t).on("change","input.condition-value",Dt),It(t).on("change","select.value-type",At),It(t).on("change",".custom-cart-item-meta-field .condition-select, .custom-user-meta-field .condition-select",Jt)}function Dt(){const t=It(this);if("number"===t.closest(".condition-field").find("select.value-type").val()){const e=parseInt(t.val()+"");t.val(isNaN(e)?"":Math.round(e))}}function At(){const t=It(this),e=t.closest(".condition-field").find("select.condition-select");if("string"===t.val())e.find("option[value='contains']").prop("disabled",!1);else"contains"===e.val()&&e.val("="),e.find("option[value='contains']").prop("disabled",!0);e.trigger("change")}function Jt(){var t;const e=It(this),n=e.closest(".condition-field").find(".condition-value");["exists","notexist"].includes(e.val().toString())?(n.val(0),n.prop("disabled",!0),n.parent().hide()):["exists","notexist"].includes(null===(t=e.data("prevValue"))||void 0===t?void 0:t.toString())&&(n.val(""),n.prop("disabled",!1),n.parent().show()),e.data("prevValue",e.val().toString())}const Et=jQuery,Tt=document.querySelector("#acfw_add_products");function Wt(t){Et(Tt).data("editing",t),Et(Tt).find("#save-add-products").prop("disabled",!t)}function Mt(t=[],e=!1){const{discount_type:n,discount_value:i}=e,{edit:a,add:l,cancel:s}=acfw_edit_coupon.product_table_buttons,{type_to_search:r}=acfw_edit_coupon.bogo_form_fields,p="object"==typeof e?function(t){const{product_id:e,product_label:n}=t;return`<option value="${e}">${n}</option>`}(e):"",u="object"==typeof e?a:l,f=i&&d(i)>=0&&"nodiscount"!==n?i:"";return`\n    <tr class="add-edit-form adding">\n        <td class="product" data-object="${"object"==typeof e?o(JSON.stringify(e)):0}">\n            <div class="object-search-wrap">\n                <select class="product-in-cart wc-product-search"\n                    data-placeholder="${r}"\n                    data-action="acfwp_add_products_search"\n                    data-exclude="${o(JSON.stringify(t))}">${p}</select>\n            </div>\n        </td>\n        <td class="quantity">\n            <input type="number" class="condition-quantity" value="${"object"==typeof e?e.quantity:1}" min="1">\n        </td>\n        <td class="price">\n            <div>\n            <select class="discount_type">\n                ${function(t="",e=!1){const{currency_symbol:n,discount_field_options:o}=acfw_edit_coupon,{nodiscount:i,override:a,percent:l,fixed:d}=o,s=`<option value="nodiscount" ${c(t,"nodiscount")}>= : ${i}</option>`;return`\n    ${e?s:""}\n    <option value="override" ${c(t,"override")}>${n} : ${a}</option>\n    <option value="percent" ${c(t,"percent")}>% : ${l}</option>\n    <option value="fixed" ${c(t,"fixed")}>-${n} : ${d}</option>\n  `}(n,!0)}\n            </select>\n            <input type="text" class="discount_value short wc_input_price" value="${f}">\n            </div>\n        </td>\n        <td class="actions">\n            <button type="button" class="condition-product-add button-primary">${u}</button>\n            <button type="button" class="cancel button">${s}</button>\n        </td>\n    </tr>\n    `}function Ft(t){const{product_id:e,product_label:n,quantity:i,discount_type:a,discount_value:c}=t,l="nodiscount"!==a?c:"";return`\n    <tr>\n        <td class="product product-${e} object" data-product="${o(JSON.stringify(t))}">\n            ${n}\n        </td>\n        <td class="quantity">${i}</td>\n        <td class="price">(${a}) ${l}</td>\n        <td class="actions">\n            <a class="edit" href="javascript:void(0)"><span class="dashicons dashicons-edit"></span></a>\n            <a class="remove" href="javascript:void(0)"><span class="dashicons dashicons-no"></span></a>\n        </td>\n    </tr>\n    `}function Ht(t=4){const{no_products_added:e}=acfw_edit_coupon;return`\n    <tr class="no-result">\n        <td colspan="${t}">${e}</td>\n    </tr>\n    `}const Vt=jQuery;function Kt(){const t=Vt(this).closest(".acfw-styled-table"),e=t.find("tbody"),n=t.data("exclude");e.find("tr.no-result").remove(),e.append(Mt(n)),e.find("select.discount_type").trigger("change"),e.find("select.wc-product-search").trigger("change"),Vt("body").trigger("wc-enhanced-select-init")}function Rt(){const t=jQuery(this),e=t.closest("tr"),n=t.closest(".acfw-styled-table"),o=n.find("tbody"),i=e.find(".product").data("product"),{product_id:a}=i;let c=n.data("exclude");c="object"==typeof c?c:[],c.splice(c.indexOf(a),1),o.find("tr.no-result").remove(),e.replaceWith(Mt(c,i)),o.find("select.discount_type").trigger("change"),o.find("select.wc-product-search").trigger("acfw_product_select"),n.data("exclude",c),n.find("select.wc-product-search").data("exclude",c),Vt("body").trigger("wc-enhanced-select-init")}function Xt(){const{fill_form_propery_error_msg:t,product_exists_in_table:e}=acfw_edit_coupon,n=jQuery(this),o=n.closest("tr"),i=n.closest("table.acfw-styled-table"),a=o.find(".wc-product-search"),c=o.find(".condition-quantity"),l=o.find("select.discount_type").val().toString(),s=o.find("input.discount_value").val().toString();let r=i.data("exclude");const p=parseInt(o.find(".wc-product-search").val().toString()),u={product_id:p,quantity:parseInt(o.find(".condition-quantity").val().toString()),product_label:o.find(".wc-product-search option:selected").text(),discount_type:l,discount_value:s};!a.val()||!c.val()||c.val()<1||"nodiscount"!==l&&(isNaN(d(s))||d(s)<0)?vex.dialog.alert(t):r.includes(p)?vex.dialog.alert(acfw_edit_coupon.product_exists_in_table):(r="object"==typeof r?r:[],r.push(p),o.replaceWith(Ft(u)),i.data("exclude",r),i.find(".wc-product-search").data("exclude",r),Wt(!0))}function Bt(){const t=jQuery(this),e=t.closest("tr"),n=t.closest("table"),o=e.closest("tbody"),i=e.find("td").length,a=e.find("td.product").data("object");let c=n.data("exclude");c.includes(a.product_id)?vex.dialog.alert(acfw_edit_coupon.product_exists_in_table):"object"==typeof a?(c="object"==typeof c?c:[],c.push(a.product_id),e.replaceWith(Ft(a)),n.data("exclude",c),n.find(".wc-product-search").data("exclude",c)):(e.remove(),o.find("tr").length<=0&&o.html(Ht(i)))}function Gt(){const t=jQuery(this).closest("tr"),e=t.closest("table"),n=t.closest("tbody"),o=t.find("td").length,i=t.find("td.object").data("product"),a=e.data("exclude"),c=a.indexOf(parseInt(i.product_id));-1!==c&&a.splice(c,1),e.data("exclude",a),e.find(".wc-product-search").data("exclude",a),t.remove(),n.find("tr").length<=0&&n.html(Ht(o)),Wt(!0)}const Lt=jQuery,{post_id:Ut}=woocommerce_admin_meta_boxes,Yt=document.querySelector("#acfw_add_products"),Zt=Yt?Yt.querySelector(".acfw-overlay"):null;function te(){Lt("#acfw_bogo_deals").find(".acfw-styled-table tr.add-edit-form button.cancel").trigger("click");const{post_status:t}=acfw_edit_coupon,e=Yt.querySelectorAll("table.acfw-styled-table tbody td.object"),o=Yt.querySelector(".add-before-cart-condition-check-field input[type='checkbox']");let i,a=[];e.forEach((t=>{i=Lt(t).data("product"),i&&a.push(i)})),n(Zt,"show"),Lt.post(ajaxurl,{action:"acfw_save_add_products_data",coupon_id:Ut,products:a.length?a:"empty",add_before_conditions:Lt(o).is(":checked")?1:0,nonce:Lt("#acfw_add_products").data("nonce")},(e=>{"success"==e.status?"publish"!==t&&(Lt("input[name='post_title']").val()||Lt("input[name='post_title']").val("coupon-"+Ut),Lt("select[name='post_status']").append(new Option("Published","publish")).val("publish"),Lt("#publishing-action").append('\n                    <input type="hidden" name="publish" value="Publish">\n                '),Lt("input#publish").click()):e.error_msg&&(vex.dialog.alert(e.error_msg),console.log(e),Lt(Yt).addClass("save-error")),Lt(Yt).find("button#clear-add-products").prop("disabled",!1),Wt(!1),n(Zt,"hide")}),"json")}function ee(){const t=Lt(this);if(!confirm(t.data("prompt")))return;const e=Yt.querySelector("table.acfw-styled-table tbody");n(Zt,"show"),Lt.post(ajaxurl,{action:"acfw_clear_add_products_data",coupon_id:Ut,_wpnonce:t.data("nonce")},(o=>{"success"==o.status?(Lt(e).html(Ht(4)),t.prop("disabled",!0),Wt(!1),"Published"!=Lt("#post-status-display").text()&&(Lt("input[name='post_title']").val()||Lt("input[name='post_title']").val("coupon-"+Ut),Lt("input#publish").click())):(o.error_msg&&vex.dialog.alert(o.error_msg),console.log(o)),n(Zt,"hide")}),"json")}function ne(t){Lt(".coupon_data_tabs").find(".acfw_add_products_tab").hasClass("active")&&Lt(Yt).data("editing")&&(t.preventDefault(),Lt(Yt).find("#save-add-products").trigger("click"),setTimeout((()=>{Lt(Yt).hasClass("save-error")?Lt(Yt).removeClass("save-error"):Lt("form#post").submit()}),1e3))}const oe=jQuery,ie=document.querySelector("#acfw_add_products");function ae(t=jQuery){t(ie).on("click",".acfw-styled-table tfoot .add-table-row",Kt),t(ie).on("click",".acfw-styled-table td.actions a.edit",Rt),t(ie).on("click","tr.add-edit-form .actions .condition-product-add",Xt),t(ie).on("click","tr.add-edit-form .actions .cancel",Bt),t(ie).on("click",".acfw-styled-table td.actions a.remove",Gt),t(ie).on("click","button#save-add-products",te),t(ie).on("click","button#clear-add-products",ee),t(ie).on("change","select.discount_type",ce),t(ie).on("blur",".wc_input_price",i),t("form#post").on("submit",ne),t(ie).css("min-height",t("#coupon_options ul.coupon_data_tabs").height()+10),t(ie).on("click",".acfw-styled-table .actions .remove",(()=>Wt(!0))),t(ie).on("change","input[name='add_before_cart_condition']",(()=>Wt(!0))),function(){const t=oe(ie).data("products"),e=oe(ie).find(".add-products-data-table tbody");if(t.length>0){let n="";t.forEach((t=>{n+=Ft(t)})),e.html(n)}else e.html(Ht(4))}(),t(document).ajaxComplete(le),t(ie).on("change","select.discount_type",de)}function ce(){const t=oe(this);t.closest("tr").find(".discount_value").prop("disabled","nodiscount"===t.val())}function le(t,e){const n=e.getResponseHeader("X-Subscription-IDs");if(!n)return;let o=oe(ie).data("subscription_ids")||[];const i=n.split(",").map((t=>parseInt(t)));oe(ie).data("subscription_ids",[...o,...i].filter(((t,e,n)=>n.indexOf(t)===e)))}function de(){const t=oe(ie).data("subscription_ids")||[];if(!t.length)return;const e=oe(this),n=e.closest("tr").find("select.wc-product-search"),o=parseInt(n.val());t.includes(o)&&"nodiscount"!==e.val()&&(vex.dialog.alert(oe(ie).data("subscription_discount_error")),e.val("nodiscount"),e.trigger("change"))}var se=jQuery;function re(){const t=se("#customer_email"),e=parseInt(se("#usage_limit").val()),n=parseInt(se("#usage_limit_per_user").val()),o=se("#acfw_auto_apply_coupon_field"),i=se("#_acfw_enable_virtual_coupons").is(":checked"),a=se("#acfw-auto-apply-coupon .auto-apply-warning");(t.val()||e||n||i)&&o.prop("checked")?a.show():a.hide()}var pe=jQuery;function ue(){const t=pe(this),e=t.closest("tr"),n=e.find(".select-shipping-method"),o=e.closest(".acfw-styled-table");o.data("exclude");const i=(o.data("zonemethods")||[]).filter((e=>e.zone_id==t.val())),a=i.length?i[0].methods:[];n.empty(),a.length&&(a.map((t=>n.append(new Option(t.label,t.value)))),n.trigger("change"))}const fe=jQuery,_e=document.querySelector("#acfw_shipping_overrides");function he(t){fe(_e).data("editing",t),fe(_e).find("#save-shipping-overrides").prop("disabled",!t)}function be(t){const{no_shipping_overrides_added:e}=acfw_edit_coupon;return`\n        <tr class="no-result">\n            <td colspan="${t}">${e}</td>\n        </tr>\n    `}const ve=jQuery,me=document.querySelector("#acfw_shipping_overrides"),{post_id:ye}=woocommerce_admin_meta_boxes;function ge(){const{post_status:t}=acfw_edit_coupon,e=me.querySelector(".acfw-overlay"),o=ve(this),i=me.querySelectorAll(".shipping-overrides-table tbody tr td.object"),a=[];i.forEach((t=>{a.push(ve(t).data("object"))})),n(e,"show"),o.prop("disabled",!0),ve.post(ajaxurl,{action:"acfw_save_shipping_overrides",coupon_id:ye,overrides:a.length?a:"empty",nonce:ve("#acfw_shipping_overrides").data("nonce")},(o=>{"success"==o.status?"publish"!==t&&(ve("input[name='post_title']").val()||ve("input[name='post_title']").val("coupon-"+ye),ve("select[name='post_status']").append(new Option("Published","publish")).val("publish"),ve("#publishing-action").append('\n            <input type="hidden" name="publish" value="Publish">\n          '),ve("input#publish").click()):(o.error_msg&&vex.dialog.alert(o.error_msg),console.log(o)),ve(me).find("#clear-shipping-overrides").prop("disabled",!1),he(!1),n(e,"hide")}),"json")}function we(){const t=ve(this);if(!confirm(t.data("prompt")))return;const e=ve(me.querySelector("table.acfw-styled-table")),o=e.find("tbody"),i=me.querySelector(".acfw-overlay");n(i,"show"),ve.post(ajaxurl,{action:"acfw_clear_shipping_overrides",coupon_id:woocommerce_admin_meta_boxes.post_id,_wpnonce:t.data("nonce")},(a=>{if("success"==a.status){let n=e.find("thead tr th").length;o.html(""),o.find("tr").length<=0&&o.append(be(n)),e.data("exclude",[]),t.prop("disabled",!0),he(!1),"Published"!=jQuery("#post-status-display").text()&&(jQuery("input[name='post_title']").val()||jQuery("input[name='post_title']").val("coupon-"+ye),jQuery("input#publish").click())}else a.error_msg&&vex.dialog.alert(a.error_msg),console.log(a);n(i,"hide")}),"json")}function $e(t){ve(me).data("editing")&&(t.preventDefault(),ve(me).find("#save-shipping-overrides").trigger("click"),ve("form#post").off("submit",$e),setTimeout((()=>{ve("form#post").submit()}),1e3))}const xe=jQuery,je=document.querySelector("#acfw_shipping_overrides");function ke(t={}){const{add:e,edit:n,cancel:i}=acfw_edit_coupon.product_table_buttons,{shipping_zone:l,discount_type:s,discount_value:r}=t,p=xe(je).find(".shipping-overrides-table").data("zonemethods")||[],u=p.map((t=>({value:t.zone_id,label:t.zone_name}))),f=r&&d(r)>=0?r:"",_=l>=0||"nozone"===l?n:e,h=`\n    <tr class="add-edit-form fresh">\n      <td class="shipping-zone" data-object="${o(JSON.stringify(t))}">\n        <div>\n          <select class="select-shipping-zone wc-enhanced-select" data-placeholder="Select shipping zone">\n            ${a(u,l)}\n          </select>\n        </div>\n      </td>\n      <td class="shipping-method">\n        <div>\n          <select class="select-shipping-method wc-enhanced-select" data-placeholder="Select shipping method">\n            ${function(t,e){const{shipping_zone:n,shipping_method:o}=e;if("nozone"===n&&o||n>=0&&o){const e=t.filter((t=>t.zone_id==n));return a(e.length?e[0].methods:[],o)}return a(t.length?t[0].methods:[],o)}(p,t)}\n          </select>\n        </div>\n      </td>\n      <td class="discount">\n        <select class="discount-type">\n          ${function(t=""){const{currency_symbol:e,discount_field_options:n}=acfw_edit_coupon,{override:o,percent:i,fixed:a}=n;return`\n    <option value="percent" ${c(t,"percent")}>% : ${i}</option>\n    <option value="fixed" ${c(t,"fixed")}>-${e} : ${a}</option>\n    <option value="override" ${c(t,"override")}>${e} : ${o}</option>\n  `}(s)}\n        </select>\n        <input type="text" class="discount_value short wc_input_price" value="${f}">\n      </td>\n      <td class="actions">\n        <button type="button" class="add button-primary">${_}</button>\n        <button type="button" class="cancel button">${i}</button>\n      </td>\n    </tr>\n  `;return h}const qe=jQuery,Se=document.querySelector("#acfw_shipping_overrides");function Qe(t){const{shipping_zone:e,discount_type:n,discount_value:i,shipping_method:a}=t,c=(qe(Se).find(".shipping-overrides-table").data("zonemethods")||[]).filter((t=>t.zone_id==e));if(!c.length)return"";const{zone_name:l,methods:d}=c[0],s=d.filter((t=>t.value==a));return s.length?`\n    <tr>\n      <td class="shipping-zone object" data-object="${o(JSON.stringify(t))}">\n        ${l}\n      </td>\n      <td class="shipping-method">\n        ${s[0].label}\n      </td>\n      <td class="discount">\n        (${n}) ${i}\n      </td>\n      <td class="actions">\n        <a class="edit" href="javascript:void(0);">\n          <span class="dashicons dashicons-edit"></span>\n        </a>\n        <a class="remove" href="javascript:void(0);">\n          <span class="dashicons dashicons-no"></span>\n        </a>\n      </td>\n    </tr>\n  `:""}const Oe=jQuery;function ze(){const t=Oe(this).closest(".acfw-styled-table"),e=t.find("tbody");t.data("exclude"),e.find("tr.no-result").remove(),e.append(ke()),Oe("body").trigger("wc-enhanced-select-init");!function(t){const e=t.find(".select-shipping-zone"),n=e.find("option:first");t.removeClass("fresh"),e.val(n.prop("value")),e.trigger("change")}(t.find("tr.add-edit-form.fresh"))}function Ne(){const{fill_form_propery_error_msg:t,shipping_zone_already_added:e}=acfw_edit_coupon,n=Oe(this).closest("tr"),o=n.closest(".acfw-styled-table");let i=parseInt(n.find(".select-shipping-zone").val()+""),a=n.find(".select-shipping-method").val()+"";i=i>=0&&!isNaN(i)?i:"nozone";let c=o.data("exclude");if((i<0||!a)&&("nozone"!==i||!a))return void vex.dialog.alert(t);if(c.filter((t=>t.zone==i&&t.method==a)).length)return void vex.dialog.alert(e);const l={shipping_zone:i,shipping_method:a,discount_type:n.find(".discount-type").val(),discount_value:n.find(".discount_value").val()};n.replaceWith(Qe(l)),c.push({zone:i,method:a}),o.data("exclude",c),he(!0)}function Ce(){const t=jQuery(this),e=t.closest("tr"),n=t.closest(".acfw-styled-table"),o=n.find("tbody"),i=e.find(".shipping-zone").data("object");let a=n.data("exclude")||[];a=a.filter((t=>t.zone!=i.shipping_zone||t.method!=i.shipping_method)),o.find("tr.no-result").remove(),e.replaceWith(ke(i)),n.data("exclude",a),Oe("body").trigger("wc-enhanced-select-init")}function Ie(){const t=jQuery(this),e=t.closest("tr"),n=t.closest("table"),o=e.closest("tbody"),i=e.find("td").length,a=e.find("td.shipping-zone").data("object");let c=n.data("exclude");c=c.filter((t=>t.zone!=a.shipping_zone||t.method!=a.shipping_method)),n.data("exclude",c),e.remove(),o.find("tr").length<=0&&o.append(be(i)),he(!0)}function Pe(){const{shipping_zone_already_added:t}=acfw_edit_coupon,e=jQuery(this),n=e.closest("tr"),o=e.closest("table"),i=n.closest("tbody"),a=n.find("td").length,c=n.find("td.shipping-zone").data("object"),{shipping_zone:l,shipping_method:d}=c;let s=o.data("exclude");s.filter((t=>t.zone==l&&t.method==d)).length?vex.dialog.alert(t):"nozone"===l&&d||l>=0&&d?(s.push({zone:l,method:l}),n.replaceWith(Qe(c)),o.data("exclude",s)):(n.remove(),i.find("tr").length<=0&&i.append(be(a)))}const De=jQuery,Ae=document.querySelector("#acfw_shipping_overrides");function Je(){De(Ae).on("click",".acfw-styled-table tfoot .add-table-row",ze),De(Ae).on("change","tr.add-edit-form .select-shipping-zone",ue),De(Ae).on("click","tr.add-edit-form .actions .add",Ne),De(Ae).on("click","tr .actions .edit",Ce),De(Ae).on("click","tr .actions .remove",Ie),De(Ae).on("click","tr.add-edit-form .actions .cancel",Pe),De(Ae).on("blur",".wc_input_price",i),De(Ae).on("click","#save-shipping-overrides",ge),De(Ae).on("click","#clear-shipping-overrides",we),De("form#post").on("submit",$e),De(Ae).css("min-height",De("#coupon_options ul.coupon_data_tabs").height()+10),function(){const t=De(Ae).find(".shipping-overrides-table"),e=t.find("tbody"),n=t.data("overrides");if(!n.length)return;e.find("tr.no-result").remove(),n.forEach((t=>{e.append(Qe(t))}))}()}const Ee=jQuery;function Te(){const t=document.querySelector("#acfw_scheduler");Ee(t).on("change acfw_load",'.days-time-fields input[type="checkbox"]',Me),Ee(t).on("change acfw_load",".days-time-fields input.time-field",Fe),Ee(t).on("change",".days-time-fields input.time-field",He),Ee(t).on("change acfw_load",".acfw-scheduler-section .date-field",Ve),Ee(t).find('.days-time-fields input[type="checkbox"], .days-time-fields input.time-field').trigger("acfw_load"),Ee(t).find(".acfw-scheduler-section .date-field").trigger("acfw_load"),Ee(".wrap").on("submit","form#post",We),Ee(".days-time-fields input.time-field").flatpickr({allowInput:!0,enableTime:!0,noCalendar:!0,altInput:!0,altFormat:"h:i K",dateFormat:"H:i",onOpen:function(t,e,n){if(""===e){var o=new Date;o.setHours(0),o.setMinutes(0),n.setDate(o),Ee(".days-time-fields input.time-field").trigger("change")}}})}function We(t){Ee(".days-time-fields input.time-field").hasClass("error")&&(t.preventDefault(),vex.dialog.alert({unsafeMessage:acfw_edit_coupon.invalid_scheduler_time}),Ee("#publishing-action .spinner").removeClass("is-active"),Ee("#publishing-action #publish").removeClass("disabled"))}function Me(){const t=Ee(this),e=t.closest(".days-time-field");e.find(".start-time").prop("disabled",!t.is(":checked")||t.is(":disabled")),e.find(".end-time").prop("disabled",!t.is(":checked")||t.is(":disabled"))}function Fe(){const t=Ee(this).closest(".days-time-field"),e=t.find(".start-time"),n=t.find(".end-time"),o=Ke(n.val())+1,i=Ke(e.val())-1,a=o?Re(o):"",c=i?Re(i):"";e.attr("max",null!=a?a:""),n.attr("min",null!=c?c:"")}function He(){const t=Ee(this).closest(".days-time-field"),e=t.find(".start-time"),n=t.find(".end-time"),o=Ke(e.val()),i=Ke(n.val());o>=i?e.addClass("error"):e.removeClass("error"),i<=o?n.addClass("error"):n.removeClass("error")}function Ve(){const t=Ee(this).closest(".options_group"),e=t.find("#_acfw_schedule_start"),n=t.find("#_acfw_schedule_expire"),o=function(t,e){const n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],o=[];if(!t||!e)return n;for(const i=new Date(t);i<=new Date(e);i.setDate(i.getDate()+1))o.push(n[i.getDay()]);return[...new Set(o)]}(e.is(":disabled")?"":e.val(),e.is(":disabled")?"":n.val());["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((t=>{const e=Ee(`.${t}-time-field`);o.includes(t)?e.find('input[type="checkbox"]').prop("disabled",!1).trigger("change"):(e.find('input[type="checkbox"]').prop("disabled",!0),e.find(".time-field").prop("disabled",!0))}))}function Ke(t){const[e,n]=t.split(":").map((t=>parseInt(t)));return 60*e+n}function Re(t){const e=Math.floor(t/60),n=t-60*e;return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}`}const Xe=jQuery,{bogo_toggle_editing_mode:Be}=acfw_edit_coupon,{post_id:Ge}=woocommerce_admin_meta_boxes;function Le(){const t=Xe(this),e=t.closest("#acfw_bogo_deals").find(".bogo-auto-add-products-field"),n=e.find("input[type='checkbox']");"specific-products"===t.val()?(n.prop("disabled",!1),e.addClass("show")):(n.prop("disabled",!1),e.removeClass("show"))}function Ue(){const t=Xe(this),e=t.find("select#bogo-deals-type"),n=t.find(".bogo-auto-add-products-field input[type='checkbox']"),o=t.find(".bogo-discount-order-field select"),i=e.val(),a={action:"acfw_save_bogo_additional_settings",coupon_id:Ge,auto_add_products:n.is(":checked")?"yes":"no",discount_order:o.val(),nonce:Xe(".bogo-settings-field").data("nonce")};"specific-products"!==i&&delete a.auto_add_products,Xe.post(ajaxurl,a)}function Ye(){const t=Xe("#acfw_bogo_deals"),e=t.find("input[name='bogo_type'][value='once']"),n=t.find("input[name='bogo_type'][value='repeat']"),o=t.find("#bogo-condition-type").val(),i=t.find("#bogo-deals-type").val();t.find(".repeat-incompatible").remove(),"any-products"===i&&"any-products"!==o?(e.prop("checked",!0),n.prop("disabled",!0),n.closest(".radio-group-wrap").append(`<span class="repeat-incompatible">${acfw_edit_coupon.repeat_incompatible_notice}</span>`)):n.prop("disabled",!1)}const Ze=document.querySelector(".acfw-sort-coupon-priority-field"),tn=jQuery;function en(){const t=tn(this),e=tn(Ze).find("input#_acfw_coupon_sort_priority"),n=t.val().toString();switch(n){case"0":case"1":case"10":case"30":case"50":case"90":e.hide(),e.val(n);break;default:e.show(),e.val(tn(Ze).data("value"))}}function nn(){const t=tn(this),e=parseInt(t.val());(isNaN(e)||1>e)&&(vex.dialog.alert(acfw_edit_coupon.coupon_sort_invalid),t.val(""))}const on=jQuery;function an(t){const e=jQuery(this),n=e.closest(".inside"),o=on("select.acfw-allowed-customers");"change"===t.type&&n.find(".save-notice").show(),e.is(":checked")?(n.removeClass("disabled"),o.prop("disabled",!0),o.closest(".options_group").hide(),cn(!0)):(n.addClass("disabled"),o.closest(".options_group").show(),o.prop("disabled",!1),cn(!1))}function cn(t){const e=jQuery(".form-field._acfw_coupon_url_field"),n=jQuery(".form-field._acfw_code_url_override_field");if(t){var o;const t=null!==(o=on("#acfw-virtual-coupon .feature-control").data("labels"))&&void 0!==o?o:{};e.find("input,button,span").hide(),e.append(`<span class="vc-manage-url-coupon">${t.url_coupon_message}</span>`),n.hide()}else e.find(".vc-manage-url-coupon").remove(),e.find("input,button,span").show(),n.show()}const ln=jQuery;function dn(){!function(){const t=jQuery("p.acfw-coupons-restriction-field"),e=t.closest(".options_group");t.insertAfter("p.form-field.individual_use_field"),e.remove()}(),ln("body").on("change acfw_load","input#individual_use",sn),ln("input#individual_use").trigger("acfw_load")}function sn(){const t=ln(this),e=ln(".acfw_allowed_coupons_field"),n=e.find("select");t.is(":checked")?(n.prop("disabled",!1),e.show()):(n.prop("disabled",!0),e.hide())}const rn=jQuery;function pn(){!function(){const t=jQuery("p.acfw-disallowed-emails-restriction-field").closest("div.options_group"),e=jQuery("p.customer_email_field").closest("div.options_group");t.length&&e.length&&t.insertAfter(e)}(),rn("#woocommerce-coupon-data").on("change acfwp_load","#discount_type",un),rn("#woocommerce-coupon-data").on("change acfw_load","select#discount_type",fn),rn("#discount_type").trigger("acfwp_load"),rn("#_acfw_coupon_label").trigger("acfw_load")}function un(){const t=rn(this),e=t.closest(".woocommerce_options_panel").find("._acfw_percentage_discount_cap_field");"percent"===t.val()||"acfw_percentage_cashback"===t.val()?(e.addClass("show"),e.find("input").prop("disabled",!1)):(e.removeClass("show"),e.find("input").prop("disabled",!0))}function fn(){rn("#_acfw_coupon_label").prop("disabled",!1)}const _n=jQuery;function hn(){const t=_n(this),e=_n("p.coupon_amount_field label"),{cashback_coupon:n}=acfw_edit_coupon;let o=e.data("default_label");switch(o||(e.data("default_label",e.text()),o=e.text()),t.val()){case"acfw_percentage_cashback":e.text(n.cashback_percentage_label);break;case"acfw_fixed_cashback":e.text(n.cashback_amount_label);break;default:e.text(o)}}function bn(){const t=_n(this),e=_n("#_acfw_cashback_waiting_period");switch(t.val()){case"acfw_percentage_cashback":case"acfw_fixed_cashback":e.closest("p.form-field").show(),e.prop("disabled",!1);break;default:e.closest("p.form-field").hide(),e.prop("disabled",!0)}}const vn=jQuery;function mn(){!function(){const t=jQuery("p.acfw-product-attributes-restriction-field").closest("div.options_group"),e=vn('label[for="exclude_product_categories"]').closest("div.options_group");t.insertAfter(e);const n=jQuery("p.acfw-exclude-product-attributes-restriction-field"),o=n.closest(".options_group");n.insertAfter("p.form-field.acfw_product_attributes_field"),o.remove()}()}const{modules:yn}=acfw_edit_coupon;jQuery(document).ready((t=>{yn.indexOf("acfw_cart_conditions_module")>-1&&Pt(),yn.indexOf("acfw_add_free_products_module")>-1&&ae(),yn.indexOf("acfw_auto_apply_module")>-1&&(se("body").on("change","#customer_email,#acfw_auto_apply_coupon_field,#usage_limit,#usage_limit_per_user,#_acfw_enable_virtual_coupons",re),se("#customer_email,#acfw_auto_apply_coupon_field").trigger("change")),yn.indexOf("acfw_shipping_overrides_module")>-1&&Je(),yn.indexOf("acfw_scheduler_module")>-1&&Te(),yn.indexOf("acfw_bogo_deals_module")>-1&&function(){const t=document.querySelector("#acfw_bogo_deals");Xe(t).on("change acfw_load","select#bogo-deals-type",Le),Xe(t).on("change acfw_load","select#bogo-condition-type,select#bogo-deals-type",Ye),Xe(t).on("change acfw_load",".bogo-auto-add-products-field input[type='checkbox']",(()=>Be(!0))),Xe(t).on("change acfw_load",".bogo-discount-order-field select",(()=>Be(!0))),Xe(t).on("save_bogo_deals",Ue),Xe(t).find("select#bogo-deals-type").trigger("acfw_load")}(),yn.indexOf("acfw_sort_coupons_module")>-1&&(tn(Ze).on("change","select#_acfw_coupon_sort_select",en),tn(Ze).on("change","input#_acfw_coupon_sort_priority",nn),tn(Ze).find("select#_acfw_coupon_sort_select").trigger("change")),yn.indexOf("acfw_virtual_coupons_module")>-1&&(on("body").on("change load_virtual_coupon","#_acfw_enable_virtual_coupons",an),on("#_acfw_enable_virtual_coupons").trigger("load_virtual_coupon")),dn(),pn(),_n("#general_coupon_data").on("change acfw_load","#discount_type",hn),_n("#general_coupon_data").on("change acfw_load","#discount_type",bn),_n("#discount_type").trigger("acfw_load"),mn()}))}}}))}();

import{g as ka,r as E,e as $a,u as ne,j as _e,R as u,L as Yt,d as et,B as tt,k as at,l as xa}from"../../common/reactLib.88bd1adb.js";import{f as zt,c as La,d as Ma,s as Ba,e as Fa,m as Ua,g as $,h as x,i as q,p as G,j as Wt,k as Kt,l as Qt,n as Jt,o as Xt,P as nt}from"../../common/redux.3f90f9cb.js";import{aa as ja,ab as Ga,ac as Zt,ad as rt,ae as ea,af as Ha,ag as qa,ah as Va,ai as ta,aj as Ya,ak as za,al as Wa,am as Ka,an as Qa,ao as Ja,ap as ct,aq as aa,ar as na,as as ra,at as Xa,au as Za,av as en,aw as tn,ax as O,ay as H,az as an,aA as be,aB as le,aC as K,aD as I,aE as J,n as ca,aF as se,aG as Se,F as nn,aH as st,aI as te,X as Be,aJ as De,aK as Y,aL as P,aM as Fe,aN as we,aO as Ce,aP as W,V as rn,aQ as ot,aR as fe,aS as Ve,aT as sa,aU as cn,aV as Ee,aW as oa,aX as St,aY as sn,R as Tt,aZ as la,a_ as on,a0 as ln,a$ as un,o as dn,b0 as mn,b1 as pn}from"../../common/antd.d0920666.js";import{T as ia,R as fn,S as ua,C as En,I as _n,W as gn,A as da,F as ma,G as hn,a as Rn,b as yn,M as Sn,D as Tn,L as Cn,U as bn,c as vn,d as wn,e as An,f as On,g as Nn,B as Dn,h as Pn,i as In,j as kn}from"../../common/antdIcons.12197f97.js";function Bm(){import.meta.url,import("_").catch(()=>1);async function*t(){}}var Ct=function(e){return{done:!0,value:e}},Ye={};function $n(t){return Ma(t)?"channel":Ba(t)?String(t):Fa(t)?t.name:String(t)}function xn(t,e,a){var r,n,c,s=e;function o(l,i){if(s===Ye)return Ct(l);if(i&&!n)throw s=Ye,i;r&&r(l);var d=i?t[n](i):t[s]();return s=d.nextState,c=d.effect,r=d.stateUpdater,n=d.errorState,s===Ye?Ct(l):c}return Ua(o,function(l){return o(null,l)},a)}function Ln(t,e){for(var a=arguments.length,r=new Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];var c={done:!1,value:La(t)},s=function(d){return{done:!1,value:zt.apply(void 0,[e].concat(r,[d]))}},o,l=function(d){return o=d};return xn({q1:function(){return{nextState:"q2",effect:c,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(o)}}},"q1","takeEvery("+$n(t)+", "+e.name+")")}function j(t,e){for(var a=arguments.length,r=new Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return zt.apply(void 0,[Ln,t,e].concat(r))}function Mn(t,e){for(var a=-1,r=t==null?0:t.length;++a<r&&e(t[a],a,t)!==!1;);return t}var Bn=Mn,Fn=ja,Un=function(){try{var t=Fn(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),jn=Un,bt=jn;function Gn(t,e,a){e=="__proto__"&&bt?bt(t,e,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[e]=a}var pa=Gn,Hn=pa,qn=Ga,Vn=Object.prototype,Yn=Vn.hasOwnProperty;function zn(t,e,a){var r=t[e];(!(Yn.call(t,e)&&qn(r,a))||a===void 0&&!(e in t))&&Hn(t,e,a)}var fa=zn,Wn=fa,Kn=pa;function Qn(t,e,a,r){var n=!a;a||(a={});for(var c=-1,s=e.length;++c<s;){var o=e[c],l=r?r(a[o],t[o],o,a,t):void 0;l===void 0&&(l=t[o]),n?Kn(a,o,l):Wn(a,o,l)}return a}var Ue=Qn,Jn=Ue,Xn=Zt;function Zn(t,e){return t&&Jn(e,Xn(e),t)}var er=Zn;function tr(t){var e=[];if(t!=null)for(var a in Object(t))e.push(a);return e}var ar=tr,nr=rt,rr=ea,cr=ar,sr=Object.prototype,or=sr.hasOwnProperty;function lr(t){if(!nr(t))return cr(t);var e=rr(t),a=[];for(var r in t)r=="constructor"&&(e||!or.call(t,r))||a.push(r);return a}var ir=lr,ur=Ha,dr=ir,mr=qa;function pr(t){return mr(t)?ur(t,!0):dr(t)}var lt=pr,fr=Ue,Er=lt;function _r(t,e){return t&&fr(e,Er(e),t)}var gr=_r,$e={exports:{}};$e.exports;(function(t,e){var a=Va,r=e&&!e.nodeType&&e,n=r&&!0&&t&&!t.nodeType&&t,c=n&&n.exports===r,s=c?a.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(i,d){if(d)return i.slice();var m=i.length,p=o?o(m):new i.constructor(m);return i.copy(p),p}t.exports=l})($e,$e.exports);var hr=$e.exports;function Rr(t,e){var a=-1,r=t.length;for(e||(e=Array(r));++a<r;)e[a]=t[a];return e}var yr=Rr,Sr=Ue,Tr=ta;function Cr(t,e){return Sr(t,Tr(t),e)}var br=Cr,vr=Ya,wr=vr(Object.getPrototypeOf,Object),Ea=wr,Ar=za,Or=Ea,Nr=ta,Dr=Wa,Pr=Object.getOwnPropertySymbols,Ir=Pr?function(t){for(var e=[];t;)Ar(e,Nr(t)),t=Or(t);return e}:Dr,_a=Ir,kr=Ue,$r=_a;function xr(t,e){return kr(t,$r(t),e)}var Lr=xr,Mr=Ka,Br=_a,Fr=lt;function Ur(t){return Mr(t,Fr,Br)}var jr=Ur,Gr=Object.prototype,Hr=Gr.hasOwnProperty;function qr(t){var e=t.length,a=new t.constructor(e);return e&&typeof t[0]=="string"&&Hr.call(t,"index")&&(a.index=t.index,a.input=t.input),a}var Vr=qr,vt=Qa;function Yr(t){var e=new t.constructor(t.byteLength);return new vt(e).set(new vt(t)),e}var it=Yr,zr=it;function Wr(t,e){var a=e?zr(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}var Kr=Wr,Qr=/\w*$/;function Jr(t){var e=new t.constructor(t.source,Qr.exec(t));return e.lastIndex=t.lastIndex,e}var Xr=Jr,wt=Ja,At=wt?wt.prototype:void 0,Ot=At?At.valueOf:void 0;function Zr(t){return Ot?Object(Ot.call(t)):{}}var ec=Zr,tc=it;function ac(t,e){var a=e?tc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}var nc=ac,rc=it,cc=Kr,sc=Xr,oc=ec,lc=nc,ic="[object Boolean]",uc="[object Date]",dc="[object Map]",mc="[object Number]",pc="[object RegExp]",fc="[object Set]",Ec="[object String]",_c="[object Symbol]",gc="[object ArrayBuffer]",hc="[object DataView]",Rc="[object Float32Array]",yc="[object Float64Array]",Sc="[object Int8Array]",Tc="[object Int16Array]",Cc="[object Int32Array]",bc="[object Uint8Array]",vc="[object Uint8ClampedArray]",wc="[object Uint16Array]",Ac="[object Uint32Array]";function Oc(t,e,a){var r=t.constructor;switch(e){case gc:return rc(t);case ic:case uc:return new r(+t);case hc:return cc(t,a);case Rc:case yc:case Sc:case Tc:case Cc:case bc:case vc:case wc:case Ac:return lc(t,a);case dc:return new r;case mc:case Ec:return new r(t);case pc:return sc(t);case fc:return new r;case _c:return oc(t)}}var Nc=Oc,Dc=rt,Nt=Object.create,Pc=function(){function t(){}return function(e){if(!Dc(e))return{};if(Nt)return Nt(e);t.prototype=e;var a=new t;return t.prototype=void 0,a}}(),Ic=Pc,kc=Ic,$c=Ea,xc=ea;function Lc(t){return typeof t.constructor=="function"&&!xc(t)?kc($c(t)):{}}var Mc=Lc,Bc=ct,Fc=aa,Uc="[object Map]";function jc(t){return Fc(t)&&Bc(t)==Uc}var Gc=jc,Hc=Gc,qc=ra,Dt=na,Pt=Dt&&Dt.isMap,Vc=Pt?qc(Pt):Hc,Yc=Vc,zc=ct,Wc=aa,Kc="[object Set]";function Qc(t){return Wc(t)&&zc(t)==Kc}var Jc=Qc,Xc=Jc,Zc=ra,It=na,kt=It&&It.isSet,es=kt?Zc(kt):Xc,ts=es,as=Xa,ns=Bn,rs=fa,cs=er,ss=gr,os=hr,ls=yr,is=br,us=Lr,ds=en,ms=jr,ps=ct,fs=Vr,Es=Nc,_s=Mc,gs=tn,hs=Za,Rs=Yc,ys=rt,Ss=ts,Ts=Zt,Cs=lt,bs=1,vs=2,ws=4,ga="[object Arguments]",As="[object Array]",Os="[object Boolean]",Ns="[object Date]",Ds="[object Error]",ha="[object Function]",Ps="[object GeneratorFunction]",Is="[object Map]",ks="[object Number]",Ra="[object Object]",$s="[object RegExp]",xs="[object Set]",Ls="[object String]",Ms="[object Symbol]",Bs="[object WeakMap]",Fs="[object ArrayBuffer]",Us="[object DataView]",js="[object Float32Array]",Gs="[object Float64Array]",Hs="[object Int8Array]",qs="[object Int16Array]",Vs="[object Int32Array]",Ys="[object Uint8Array]",zs="[object Uint8ClampedArray]",Ws="[object Uint16Array]",Ks="[object Uint32Array]",B={};B[ga]=B[As]=B[Fs]=B[Us]=B[Os]=B[Ns]=B[js]=B[Gs]=B[Hs]=B[qs]=B[Vs]=B[Is]=B[ks]=B[Ra]=B[$s]=B[xs]=B[Ls]=B[Ms]=B[Ys]=B[zs]=B[Ws]=B[Ks]=!0;B[Ds]=B[ha]=B[Bs]=!1;function Ie(t,e,a,r,n,c){var s,o=e&bs,l=e&vs,i=e&ws;if(a&&(s=n?a(t,r,n,c):a(t)),s!==void 0)return s;if(!ys(t))return t;var d=gs(t);if(d){if(s=fs(t),!o)return ls(t,s)}else{var m=ps(t),p=m==ha||m==Ps;if(hs(t))return os(t,o);if(m==Ra||m==ga||p&&!n){if(s=l||p?{}:_s(t),!o)return l?us(t,ss(s,t)):is(t,cs(s,t))}else{if(!B[m])return n?t:{};s=Es(t,m,o)}}c||(c=new as);var g=c.get(t);if(g)return g;c.set(t,s),Ss(t)?t.forEach(function(C){s.add(Ie(C,e,a,C,t,c))}):Rs(t)&&t.forEach(function(C,w){s.set(w,Ie(C,e,a,w,t,c))});var h=i?l?ms:ds:l?Cs:Ts,y=d?void 0:h(t);return ns(y||t,function(C,w){y&&(w=C,C=t[w]),rs(s,w,Ie(C,e,a,w,t,c))}),s}var Qs=Ie,Js=Qs,Xs=1,Zs=4;function eo(t){return Js(t,Xs|Zs)}var to=eo;const xe=ka(to);var Re=(t=>(t.READ_SECTIONS="READ_SECTIONS",t.READ_SECTION="READ_SECTION",t.SET_STORE_SECTIONS="SET_STORE_SECTIONS",t.SET_STORE_SECTION="SET_STORE_SECTION",t.TOGGLE_MODULE_SECTION="TOGGLE_MODULE_SECTION",t))(Re||{});const je={readSections:t=>({type:"READ_SECTIONS",payload:t}),readSection:t=>({type:"READ_SECTION",payload:t}),setStoreSectionItems:t=>({type:"SET_STORE_SECTIONS",payload:t}),setStoreSectionItem:t=>({type:"SET_STORE_SECTION",payload:t}),toggleModuleSection:t=>({type:"TOGGLE_MODULE_SECTION",payload:t})},ao=(t=[],e)=>{switch(e.type){case Re.SET_STORE_SECTIONS:{const{data:a}=e.payload;return a}case Re.SET_STORE_SECTION:{const{data:a}=e.payload,r=t.findIndex(c=>c.id===a.id);if(r<0)return t;const n=xe(t);return n[r]={...n[r],...a},n}case Re.TOGGLE_MODULE_SECTION:{const{module:a,show:r}=e.payload,n=t.findIndex(s=>s.module&&s.module===a);if(n<0)return t;const c=xe(t);return c[n].show=r,c}default:return t}};var ue=(t=>(t.CREATE_SETTING="CREATE_SETTING",t.UPDATE_SETTING="UPDATE_SETTING",t.DELETE_SETTING="DELETE_SETTING",t.READ_SETTINGS="READ_SETTINGS",t.REHYDRATE_STORE_SETTINGS="REHYDRATE_STORE_SETTINGS",t.REHYDRATE_STORE_SETTING="REHYDRATE_STORE_SETTING",t.SET_STORE_SETTINGS="SET_STORE_SETTINGS",t.SET_STORE_SETTING="SET_STORE_SETTING",t))(ue||{});const oe={createSetting:t=>({type:"CREATE_SETTING",payload:t}),updateSetting:t=>({type:"UPDATE_SETTING",payload:t}),deleteSetting:t=>({type:"DELETE_SETTING",payload:t}),readSettings:t=>({type:"READ_SETTINGS",payload:t}),rehydrateStoreSettings:t=>({type:"REHYDRATE_STORE_SETTINGS",payload:t}),rehydrateStoreSetting:t=>({type:"REHYDRATE_STORE_SETTING",payload:t}),setStoreSettingItems:t=>({type:"SET_STORE_SETTINGS",payload:t}),setStoreSettingItem:t=>({type:"SET_STORE_SETTING",payload:t})},no=(t=[],e)=>{switch(e.type){case ue.SET_STORE_SETTINGS:{const{data:a}=e.payload;let r=xe(t);for(const n of a){let c=t.findIndex(s=>s.id===n.id);r[c]?r[c]=n:r.push(n)}return r}case ue.SET_STORE_SETTING:{const{data:a}=e.payload,r=t.findIndex(c=>c.id===a.id);if(r<0)return t;const n=xe(t);return n[r]={...n[r],...a},n}default:return t}};var ya=(t=>(t.SET_STORE_PAGE="SET_STORE_PAGE",t))(ya||{});const ge={setStorePage:t=>({type:"SET_STORE_PAGE",payload:t})},ro=(t="",e)=>{switch(e.type){case ya.SET_STORE_PAGE:{const{data:a}=e.payload;return a}default:return t}};var ve=(t=>(t.READ_STORE_CREDITS_DASHBOARD_DATA="READ_STORE_CREDITS_DASHBOARD_DATA",t.READ_STORE_CREDITS_HISTORY_DATA="READ_STORE_CREDITS_HISTORY",t.SET_STORE_CREDITS_DASHBOARD_DATA="SET_STORE_CREDITS_DASHBOARD_DATA",t.SET_STORE_CREDITS_HISTORY_DATA="SET_STORE_CREDITS_HISTORY_DATA",t))(ve||{});const Ge={readStoreCreditsDashboardData:t=>({type:"READ_STORE_CREDITS_DASHBOARD_DATA",payload:t}),readStoreCreditsHistoryData:t=>({type:"READ_STORE_CREDITS_HISTORY",payload:t}),setStoreCreditsDashboardData:t=>({type:"SET_STORE_CREDITS_DASHBOARD_DATA",payload:t}),setStoreCreditsHistoryData:t=>({type:"SET_STORE_CREDITS_HISTORY_DATA",payload:t})},co=(t=null,e)=>{switch(e.type){case ve.SET_STORE_CREDITS_DASHBOARD_DATA:{const{status:a}=e.payload;return{...t,status:a}}case ve.SET_STORE_CREDITS_HISTORY_DATA:{const{data:a}=e.payload;return{...t,history:a}}default:return t}};var me=(t=>(t.READ_STORE_CREDITS_CUSTOMERS="READ_STORE_CREDITS_CUSTOMERS",t.READ_STORE_CREDITS_CUSTOMER_STATUS="READ_STORE_CREDITS_CUSTOMER_STATUS",t.READ_STORE_CREDITS_CUSTOMER_ENTRIES="READ_STORE_CREDITS_CUSTOMER_ENTRIES",t.ADJUST_CUSTOMER_STORE_CREDITS="ADJUST_CUSTOMER_STORE_CREDITS",t.SET_STORE_CREDITS_CUSTOMERS="SET_STORE_CREDITS_CUSTOMERS",t.SET_STORE_CREDITS_CUSTOMER_STATUS="SET_STORE_CREDITS_CUSTOMER_STATUS",t.SET_STORE_CREDITS_CUSTOMER_BALANCE="SET_STORE_CREDITS_CUSTOMER_BALANCE",t))(me||{});const Ae={readStoreCreditsCustomers:t=>({type:"READ_STORE_CREDITS_CUSTOMERS",payload:t}),readStoreCreditsCustomerStatus:t=>({type:"READ_STORE_CREDITS_CUSTOMER_STATUS",payload:t}),readStoreCreditsCustomerEntries:t=>({type:"READ_STORE_CREDITS_CUSTOMER_ENTRIES",payload:t}),adjustCustomerStoreCredits:t=>({type:"ADJUST_CUSTOMER_STORE_CREDITS",payload:t}),setStoreCreditsCustomers:t=>({type:"SET_STORE_CREDITS_CUSTOMERS",payload:t}),setStoreCreditsCustomerStatus:t=>({type:"SET_STORE_CREDITS_CUSTOMER_STATUS",payload:t}),setStoreCreditsCustomerBalance:t=>({type:"SET_STORE_CREDITS_CUSTOMER_BALANCE",payload:t})},so=(t=[],e)=>{let a;switch(e.type){case me.SET_STORE_CREDITS_CUSTOMERS:const{data:r}=e.payload;return r;case me.SET_STORE_CREDITS_CUSTOMER_STATUS:const{id:n,status:c,sources:s}=e.payload;return a=t.findIndex(i=>i.id===n),t[a]={...t[a],status:c,sources:s},[...t];case me.SET_STORE_CREDITS_CUSTOMER_BALANCE:const{balance:o,balance_raw:l}=e.payload;return a=t.findIndex(i=>i.id===e.payload.id),t[a]={...t[a],balance:o,balance_raw:l,status:[],sources:[]},[...t];default:return t}};var ut=(t=>(t.READ_DASHBOARD_WIDGETS_DATA="READ_DASHBOARD_WIDGETS_DATA",t.SET_DASHBOARD_WIDGETS_DATA="SET_DASHBOARD_WIDGETS_DATA",t))(ut||{});const Sa={readDashboardWidgetsData:t=>({type:"READ_DASHBOARD_WIDGETS_DATA",payload:t}),setDashboardWidgetsData:t=>({type:"SET_DASHBOARD_WIDGETS_DATA",payload:t})},oo=(t=null,e)=>{switch(e.type){case ut.SET_DASHBOARD_WIDGETS_DATA:{const{widgets:a}=e.payload;return a}default:return t}};var Le=(t=>(t.READ_ADMIN_NOTICES="READ_ADMIN_NOTICES",t.SET_ADMIN_NOTICES="SET_ADMIN_NOTICES",t.DISMISS_ADMIN_NOTICE="DISMISS_ADMIN_NOTICE",t.READ_ADMIN_NOTICE="READ_ADMIN_NOTICE",t))(Le||{});const dt={readAdminNotices:t=>({type:"READ_ADMIN_NOTICES",payload:t}),setAdminNotices:t=>({type:"SET_ADMIN_NOTICES",payload:t}),dismissAdminNotice:t=>({type:"DISMISS_ADMIN_NOTICE",payload:t}),readAdminNotice:t=>({type:"READ_ADMIN_NOTICE",payload:t})},lo=(t=[],e)=>{switch(e.type){case Le.SET_ADMIN_NOTICES:{const{notices:a}=e.payload;return a}case Le.DISMISS_ADMIN_NOTICE:{const{slug:a}=e.payload;return t.filter(n=>n.slug!==a)}default:return t}};var V=(t=>(t.READ_COUPON_TEMPLATES="READ_COUPON_TEMPLATES",t.READ_COUPON_TEMPLATE="READ_COUPON_TEMPLATE",t.READ_RECENT_COUPON_TEMPLATES="READ_RECENT_COUPON_TEMPLATES",t.READ_COUPON_TEMPLATE_CATEGORIES="READ_COUPON_TEMPLATE_CATEGORIES",t.READ_COUPON_TEMPLATE_CATEGORY="READ_COUPON_TEMPLATE_CATEGORY",t.CREATE_COUPON_FROM_TEMPLATE="CREATE_COUPON_FROM_TEMPLATE",t.DELETE_RECENT_COUPON_TEMPLATE="DELETE_RECENT_COUPON_TEMPLATE",t.SET_COUPON_TEMPLATES="SET_COUPON_TEMPLATES",t.SET_COUPON_TEMPLATE_CATEGORIES="SET_COUPON_TEMPLATE_CATEGORIES",t.UNSET_RECENT_COUPON_TEMPLATE="UNSET_RECENT_COUPON_TEMPLATE",t.SET_COUPON_TEMPLATES_LOADING="SET_COUPON_TEMPLATES_LOADING",t.SET_EDIT_COUPON_TEMPLATE="SET_EDIT_COUPON_TEMPLATE",t.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE="SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",t.SET_CART_CONDITION_ITEM_DATA="SET_CART_CONDITION_ITEM_DATA",t.VALIDATE_EDIT_COUPON_TEMPLATE_DATA="VALIDATE_EDIT_COUPON_TEMPLATE_DATA",t.VALIDATE_CART_CONDITIONS_DATA="VALIDATE_CART_CONDITIONS_DATA",t.SET_COUPON_CREATED_RESPONSE_DATA="SET_COUPON_CREATED_RESPONSE_DATA",t.CLEAR_COUPON_CREATED_RESPONSE_DATA="CLEAR_COUPON_CREATED_RESPONSE_DATA",t.TOGGLE_PREMIUM_MODAL="TOGGLE_PREMIUM_MODAL",t.SET_SEARCH_FILTERS="SET_SEARCH_FILTERS",t.SET_SORT_OPTIONS="SET_SORT_OPTIONS",t))(V||{});const Q={readCouponTemplates:t=>({type:"READ_COUPON_TEMPLATES",payload:t}),readCouponTemplate:t=>({type:"READ_COUPON_TEMPLATE",payload:t}),readRecentCouponTemplates:t=>({type:"READ_RECENT_COUPON_TEMPLATES",payload:t}),readCouponTemplateCategories:t=>({type:"READ_COUPON_TEMPLATE_CATEGORIES",payload:t}),readCouponTemplateCategory:t=>({type:"READ_COUPON_TEMPLATE_CATEGORY",payload:t}),createCouponFromTemplate:t=>({type:"CREATE_COUPON_FROM_TEMPLATE",payload:t}),deleteRecentCouponTemplate:t=>({type:"DELETE_RECENT_COUPON_TEMPLATE",payload:t}),setCouponTemplates:t=>({type:"SET_COUPON_TEMPLATES",payload:t}),setCouponTemplateCategories:t=>({type:"SET_COUPON_TEMPLATE_CATEGORIES",payload:t}),unsetRecentCouponTemplate:t=>({type:"UNSET_RECENT_COUPON_TEMPLATE",payload:t}),setCouponTemplatesLoading:t=>({type:"SET_COUPON_TEMPLATES_LOADING",payload:t}),setEditCouponTemplate:t=>({type:"SET_EDIT_COUPON_TEMPLATE",payload:t}),setEditCouponTemplateFieldValue:t=>({type:"SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",payload:t}),validateEditCouponTemplateData:()=>({type:"VALIDATE_EDIT_COUPON_TEMPLATE_DATA"}),validateCartConditionsData:()=>({type:"VALIDATE_CART_CONDITIONS_DATA"}),setCreatedCouponResponseData:t=>({type:"SET_COUPON_CREATED_RESPONSE_DATA",payload:t}),setCartConditionItemData:t=>({type:"SET_CART_CONDITION_ITEM_DATA",payload:t}),clearCreatedCouponResponseData:()=>({type:"CLEAR_COUPON_CREATED_RESPONSE_DATA"}),togglePremiumModal:t=>({type:"TOGGLE_PREMIUM_MODAL",payload:t}),setSearchFilters:t=>({type:"SET_SEARCH_FILTERS",payload:t}),setSortOptions:t=>({type:"SET_SORT_OPTIONS",payload:t})},Ta=t=>{const{value:e,onChange:a}=t,r=[{value:"and",label:"AND"},{value:"or",label:"OR"}];return React.createElement("div",{className:"condition-logic centered-line"},React.createElement("div",{className:"field-control"},React.createElement(O,{value:e,options:r,onSelect:a})))},ie=function(){return acfwAdminApp.admin_url.replace(location.origin,"")},Ca=t=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t),io=t=>{let e=window.moment().startOf("month"),a=window.moment().startOf("day");switch(t){case"week_to_date":e=window.moment().startOf("week"),a=window.moment().startOf("day");break;case"month_to_date":e=window.moment().startOf("month"),a=window.moment().startOf("day");break;case"quarter_to_date":e=window.moment().startOf("quarter"),a=window.moment().startOf("day");break;case"year_to_date":e=window.moment().startOf("year"),a=window.moment().startOf("day");break;case"last_week":e=window.moment().subtract(1,"weeks").startOf("week"),a=window.moment().subtract(1,"weeks").endOf("week");break;case"last_month":e=window.moment().subtract(1,"months").startOf("month"),a=window.moment().subtract(1,"months").endOf("month");break;case"last_quarter":e=window.moment().subtract(1,"quarters").startOf("quarter"),a=window.moment().subtract(1,"quarters").endOf("quarter");break;case"last_year":e=window.moment().subtract(1,"years").startOf("year"),a=window.moment().subtract(1,"years").endOf("year");break}return[e,a]};async function ba(t,e){const a=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_taxonomy_terms",term:t,taxonomy:"product_cat",security:acfwAdminApp.nonces.search_taxonomy_terms,exclude:e}});return Object.keys(a).map(r=>({label:a[r].name,value:a[r].term_id}))}async function mt(t,e){const a=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_products",term:t,security:acfwAdminApp.nonces.search_products,exclude:e}});return Object.keys(a).map(r=>({label:a[r],value:r}))}function va(t){return t.type==="increase"?"+":"-"}function X(t="default"){return t==="atleast"?[{value:"atleast",label:acfwAdminApp.condition_options.atleast},{value:"all",label:acfwAdminApp.condition_options.all}]:t==="period"?[{value:"within-a-period",label:acfwAdminApp.condition_options.withinaperiod},{value:"number-of-orders",label:acfwAdminApp.condition_options.numberoforders}]:[{value:"=",label:acfwAdminApp.condition_options.exactly},{value:"!=",label:acfwAdminApp.condition_options.anyexcept},{value:">",label:acfwAdminApp.condition_options.morethan},{value:"<",label:acfwAdminApp.condition_options.lessthan}]}const uo=t=>{var c,s;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(o,l)=>{const i={...e.data,[o]:l};a(i)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:X(),onSelect:o=>n("condition",o),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.field),React.createElement(H,{value:e.data.value,onChange:o=>n("value",o!=null?o:void 0),min:0,status:(s=e==null?void 0:e.errors)!=null&&s.includes("value")?"error":""}))))},mo=t=>{const e=t,a=[];return(e.value<0||typeof e.value!="number")&&a.push("value"),e.condition||a.push("condition"),a},po=t=>{var c,s;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(o,l)=>{const i={...e.data,[o]:l};a(i)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:X(),onSelect:o=>n("condition",o),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.field),React.createElement(H,{type:"number",value:e.data.value,onChange:o=>n("value",o!=null?o:void 0),status:(s=e==null?void 0:e.errors)!=null&&s.includes("value")?"error":""}))))},fo=t=>{const e=t,a=[];return(e.value<0||typeof e.value!="number")&&a.push("value"),e.condition||a.push("condition"),a},Eo=t=>{var c,s;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(o,l)=>{const i={...e.data,[o]:l};a(i)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:X(),onSelect:o=>n("condition",o),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.field),React.createElement(H,{value:e.data.value,onChange:o=>{var l,i;return n("value",(i=(l=o==null?void 0:o.target)==null?void 0:l.value)!=null?i:0)},min:0,status:(s=e==null?void 0:e.errors)!=null&&s.includes("value")?"error":""}))))},_o=t=>{const e=t,a=[];return(e.value<0||typeof e.value!="number")&&a.push("value"),e.condition||a.push("condition"),a},ae=({fetchOptions:t,optionMapper:e,debounceTimeout:a=800,...r})=>{const[n,c]=E.useState(!1),[s,o]=E.useState([]),l=E.useRef(0),i=E.useMemo(()=>an(m=>{l.current+=1;const p=l.current;o([]),c(!0),t(m).then(g=>{p===l.current&&(o(g),c(!1))})},a),[t,a]);return React.createElement(O,{labelInValue:!0,filterOption:!1,onSearch:i,notFoundContent:n?React.createElement(be,{size:"small"}):null,...r,options:s})},go=t=>{var s,o,l;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=async i=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"acfw_search_coupons",term:i,security:acfwAdminApp.nonces.search_products,include:!0,exclude:e.data.value}});return Object.keys(d).map(m=>({label:d[m],value:m}))},c=(i,d)=>{const m={...e.data,[i]:d};a(m)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("p",null,e.i18n.desc),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.coupons_label),React.createElement(ae,{mode:"multiple",placeholder:e.i18n.select_coupons,value:e.data.value,style:{width:"100%"},fetchOptions:n,status:(s=e==null?void 0:e.errors)!=null&&s.includes("value")?"error":"",onChange:i=>c("value",i.map(d=>d.value))}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,onSelect:i=>c("condition",i),status:(o=e==null?void 0:e.errors)!=null&&o.includes("condition")?"error":""},React.createElement(O.Option,{value:"atleast"},acfwAdminApp.condition_options.atleast),React.createElement(O.Option,{value:"all"},acfwAdminApp.condition_options.all))),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.quantity_label),React.createElement(H,{value:e.data.quantity,onChange:i=>c("quantity",i!=null?i:void 0),min:1,status:(l=e==null?void 0:e.errors)!=null&&l.includes("quantity")?"error":""}))))},ho=t=>{const e=t,a=[];return(e.quantity<0||typeof e.quantity!="number")&&a.push("quantity"),e.condition||a.push("condition"),e.value.length<1&&a.push("value"),a},Ro=t=>{const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(s,o)=>{const l=[...e.data];l[s]=o,a(l)},c=[{title:e.i18n.product_col,dataIndex:"product_id",key:"product_id",render:(s,o,l)=>{var i;return React.createElement(ae,{value:o.product_id?{value:o.product_id,label:o.product_label}:void 0,onChange:d=>n(l,{...o,product_id:parseInt(d.value),product_label:d.label}),showSearch:!0,fetchOptions:d=>mt(d,[]),placeholder:r.search_product,status:(i=e==null?void 0:e.errors)!=null&&i.includes("product_id_".concat(l))?"error":""})}},{title:e.i18n.condition_col,dataIndex:"condition",key:"condition",render:(s,o,l)=>{var i;return React.createElement(O,{value:o.condition,options:X(),onSelect:d=>n(l,{...o,condition:d.toString()}),status:(i=e==null?void 0:e.errors)!=null&&i.includes("condition_".concat(l))?"error":""})}},{title:e.i18n.quantity_col,dataIndex:"quantity",key:"quantity",render:(s,o,l)=>{var i;return React.createElement(H,{value:o.quantity,onChange:d=>n(l,{...o,quantity:d!=null?d:0}),min:0,status:(i=e==null?void 0:e.errors)!=null&&i.includes("quantity_".concat(l))?"error":""})}}];return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-table"},React.createElement(le,{columns:c,dataSource:e.data,bordered:!0,pagination:!1})))},yo=t=>{const e=t,a=[];return e.forEach((r,n)=>{r.product_id===0&&a.push("product_id_".concat(n)),(r.quantity<0||typeof r.quantity!="number")&&a.push("quantity_".concat(n)),r.condition||a.push("condition_".concat(n))}),a},So=t=>{const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(o,l)=>{const i=[...e.data.products];i[o]=l,a({products:i})},c=E.useMemo(()=>_.map(e.i18n.products.options.conditions,(o,l)=>({value:l,label:o})),[e.i18n.products.options]),s=[{title:r.product,dataIndex:"product_id",key:"product_id",render:(o,l,i)=>{var d;return React.createElement(ae,{value:l!=null&&l.product?{value:l.product.id,label:l.product.label}:void 0,onChange:m=>n(i,{...l,product:{id:m.value,label:m.label}}),showSearch:!0,fetchOptions:m=>mt(m,[]),placeholder:r.search_product,status:(d=e==null?void 0:e.errors)!=null&&d.includes("product_id_".concat(i))?"error":""})}},{title:r.condition,dataIndex:"condition",key:"condition",render:(o,l,i)=>{var d;return React.createElement(O,{labelInValue:!0,value:l!=null&&l.condition?{value:l.condition.id,label:l.condition.label}:void 0,options:c,onChange:m=>n(i,{...l,condition:{id:m.value,label:m.label}}),status:(d=e==null?void 0:e.errors)!=null&&d.includes("condition_".concat(i))?"error":""})}}];return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-table"},React.createElement(le,{columns:s,dataSource:e.data.products,bordered:!0,pagination:!1})))},To=t=>{const{products:e}=t,a=[];return e.forEach((r,n)=>{(!r.product.id||r.product.id==="0")&&a.push("product_id_".concat(n)),r.condition.id||a.push("condition_".concat(n))}),a},Co=t=>{var i,d;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,[n,c]=E.useState(e.i18n.within_a_period),s=(m,p)=>{const g={...e.data,[m]:p};a(g),m==="condition"&&c(p==="within-a-period"?e.i18n.within_a_period:e.i18n.number_of_orders)},o=(m,p)=>{const g=[...e.data.products];g[m]=p,a({...e.data,products:g})},l=[{title:r.product,dataIndex:"product_id",key:"product_id",render:(m,p,g)=>{var h;return React.createElement(ae,{value:p.product_id?{value:p.product_id,label:p.product_label}:void 0,onChange:y=>o(g,{...p,product_id:parseInt(y.value),product_label:y.label}),showSearch:!0,fetchOptions:y=>mt(y,[]),placeholder:r.search_product,status:(h=e==null?void 0:e.errors)!=null&&h.includes("product_id_".concat(g))?"error":""})}},{title:r.condition,dataIndex:"condition",key:"condition",render:(m,p,g)=>{var h;return React.createElement(O,{value:p.condition,options:X(),onSelect:y=>o(g,{...p,condition:y.toString()}),status:(h=e==null?void 0:e.errors)!=null&&h.includes("condition_".concat(g))?"error":""})}},{title:r.quantity,dataIndex:"quantity",key:"quantity",render:(m,p,g)=>{var h;return React.createElement(H,{value:p.quantity,onChange:y=>o(g,{...p,quantity:y!=null?y:0}),min:0,status:(h=e==null?void 0:e.errors)!=null&&h.includes("quantity_".concat(g))?"error":""})}}];return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.type),React.createElement(O,{value:e.data.condition,options:X("period"),onSelect:m=>s("condition",m),status:(i=e==null?void 0:e.errors)!=null&&i.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,n),React.createElement(H,{value:e.data.value,onChange:m=>s("value",m),min:0,status:(d=e==null?void 0:e.errors)!=null&&d.includes("value")?"error":""}))),React.createElement("div",{className:"condition-field-table"},React.createElement(le,{columns:l,dataSource:e.data.products,bordered:!0,pagination:!1})))},bo=t=>{const e=t,a=[];return e.condition||a.push("condition"),(e.value<0||typeof e.value!="number")&&a.push("value"),e.products.forEach((r,n)=>{r.product_id===0&&a.push("product_id_".concat(n)),(r.quantity<0||typeof r.quantity!="number")&&a.push("quantity_".concat(n)),r.condition||a.push("condition_".concat(n))}),a},vo=t=>{var c,s,o;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(l,i)=>{const d={...e.data,[l]:i};a(d)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.field),React.createElement(ae,{mode:"multiple",placeholder:"Select categories",value:e.data.value,style:{width:"100%"},fetchOptions:l=>ba(l,e.data.value),status:(c=e==null?void 0:e.errors)!=null&&c.includes("value")?"error":"",onChange:l=>n("value",l.map(i=>i.value))}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:X(),onSelect:l=>n("condition",l),status:(s=e==null?void 0:e.errors)!=null&&s.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,r.quantity),React.createElement(H,{value:e.data.quantity,onChange:l=>n("quantity",l!=null?l:0),min:0,status:(o=e==null?void 0:e.errors)!=null&&o.includes("quantity")?"error":""}))))},wo=t=>{const e=t,a=[];return(e.quantity<0||typeof e.quantity!="number")&&a.push("quantity"),e.condition||a.push("condition"),e.value.length<1&&a.push("value"),a},Ao=t=>{var s,o,l;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=async i=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_taxonomy_terms",term:i,taxonomy:"product_cat",security:acfwAdminApp.nonces.search_taxonomy_terms,exclude:e.data.value}});return Object.keys(d).map(m=>({label:d[m].name,value:d[m].term_id}))},c=(i,d)=>{const m={...e.data,[i]:d};a(m)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.field),React.createElement(ae,{mode:"multiple",placeholder:"Select categories",value:e.data.value,style:{width:"100%"},fetchOptions:n,status:(s=e==null?void 0:e.errors)!=null&&s.includes("value")?"error":"",onChange:i=>c("value",i.map(d=>d.value))}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:X(),onSelect:i=>c("condition",i),status:(o=e==null?void 0:e.errors)!=null&&o.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,r.quantity),React.createElement(H,{value:parseInt(e.data.quantity),onChange:i=>{var d;return c("quantity",(d=i==null?void 0:i.toString())!=null?d:void 0)},min:0,status:(l=e==null?void 0:e.errors)!=null&&l.includes("quantity")?"error":""}))))},Oo=t=>{var o,l,i,d,m;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,[n,c]=E.useState(e.i18n.within_a_period),s=(p,g)=>{const h={...e.data,[p]:g};a(h),p==="type"&&c(g.condition==="within-a-period"?e.i18n.within_a_period:e.i18n.number_of_orders)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.type),React.createElement(O,{value:e.data.type.condition,options:X("period"),onSelect:p=>s("type",{...e.data.type,condition:p}),status:(o=e==null?void 0:e.errors)!=null&&o.includes("type_condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,n),React.createElement(H,{value:e.data.type.value,onChange:p=>s("type",{...e.data.type,value:p}),min:0,status:(l=e==null?void 0:e.errors)!=null&&l.includes("type_value")?"error":""}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.field),React.createElement(ae,{mode:"multiple",placeholder:"Select categories",value:e.data.categories,style:{width:"100%"},fetchOptions:p=>ba(p,e.data.categories),status:(i=e==null?void 0:e.errors)!=null&&i.includes("categories")?"error":"",onChange:p=>s("categories",p.map(g=>g.value))}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:X(),onSelect:p=>s("condition",p),status:(d=e==null?void 0:e.errors)!=null&&d.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,r.quantity),React.createElement(H,{value:e.data.quantity,onChange:p=>s("quantity",p!=null?p:0),min:0,status:(m=e==null?void 0:e.errors)!=null&&m.includes("quantity")?"error":""}))))},No=t=>{const e=t,a=[];return(e.quantity<0||typeof e.quantity!="number")&&a.push("quantity"),e.condition||a.push("condition"),e.categories.length<1&&a.push("categories"),e.type.condition||a.push("type_condition"),(e.type.value<0||typeof e.type.value!="number")&&a.push("type_value"),a},Do=t=>{const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(o,l)=>{const i={...e.data,[o]:l};a(i)},c=()=>{switch(e.data.type.condition){case"within-a-period":return e.i18n.num_prev_days;case"number-of-orders":return e.i18n.number_of_orders;default:return""}},s=o=>Object.keys(o).map(l=>({value:l,label:o[l]}));return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.type),React.createElement(O,{value:e.data.type.condition,options:e.i18n.type_options,onSelect:o=>n("type",{...e.data.type,condition:o})})),React.createElement("div",{className:"field-control"},React.createElement("label",null,c()),React.createElement(H,{value:e.data.type.value,onChange:o=>n("type",{...e.data.type,value:o}),min:0}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.categories.field),React.createElement(O,{mode:"multiple",placeholder:"Select categories",style:{width:"100%"},options:s(e.i18n.categories.options),onChange:o=>n("categories",o)}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:X(),onSelect:o=>n("condition",o)})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.total_spend),React.createElement(H,{value:e.data.spend,onChange:o=>n("spend",o!=null?o:0),min:0}))))},Po=t=>{const e=t,a=[];return(e.spend<0||typeof e.spend!="number")&&a.push("spend"),e.condition||a.push("condition"),e.categories.length<1&&a.push("categories"),a},Io=t=>{var r;const{field:e,onChange:a}=t;return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement(O,{value:e.data,onSelect:a,status:(r=e.errors)!=null&&r.includes("value")?"error":""},React.createElement(O.Option,{value:"logged-in"},e.i18n.options["logged-in"]),React.createElement(O.Option,{value:"guest"},e.i18n.options.guest)))))},ko=t=>{const e=t,a=[];return e||a.push("value"),a},$o=t=>{var n;const{field:e,onChange:a}=t,r=E.useMemo(()=>_.map(e.i18n.options,(c,s)=>({value:s,label:c})),[e.i18n.options]);return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement(O,{mode:"multiple",placeholder:e.i18n.placeholder,value:e.data,options:r,onChange:a,status:(n=e.errors)!=null&&n.includes("value")?"error":""}))))},xo=t=>{const e=t,a=[];return e.length<1&&a.push("value"),a},$t=t=>{var n;const{field:e,min:a,onChange:r}=t;return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("p",null,e.i18n.desc),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement(H,{type:"number",value:e.data,onChange:c=>r(c!=null?c:1),min:a,addonAfter:e.i18n.hours,status:(n=e.errors)!=null&&n.includes("value")?"error":""}))))},Lo=t=>{const e=t,a=[];return e||a.push("value"),a},Mo=t=>{var c,s,o;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(l,i)=>{const d={...e.data,[l]:i};a(d)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("p",null,e.i18n.desc),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:X(),onSelect:l=>n("condition",l),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.total_spend),React.createElement(H,{value:parseFloat(e.data.value),onChange:l=>n("value",l!=null?l:""),decimalSeparator:".",parser:l=>parseFloat(l!=null?l:""),status:(s=e==null?void 0:e.errors)!=null&&s.includes("value")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.days_offset),React.createElement(H,{value:e.data.offset,onChange:l=>n("offset",l!=null?l:void 0),min:0,status:(o=e==null?void 0:e.errors)!=null&&o.includes("offset")?"error":""}))))},Bo=t=>{const e=t,a=[];return(parseInt(e.value)<0||e.value==="")&&a.push("value"),(e.offset<0||typeof e.offset!="number")&&a.push("offset"),e.condition||a.push("condition"),a},Fo=t=>{var c,s,o;const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(l,i)=>{const d={...e.data,[l]:i};a(d)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("p",null,e.i18n.desc),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:X(),onSelect:l=>n("condition",l),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.count_label),React.createElement(H,{value:parseInt(e.data.value),onChange:l=>n("value",l!=null?l:0),min:0,status:(s=e==null?void 0:e.errors)!=null&&s.includes("value")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.prev_days_label),React.createElement(H,{value:e.data.offset,onChange:l=>n("offset",l!=null?l:0),min:0,status:(o=e==null?void 0:e.errors)!=null&&o.includes("offset")?"error":""}))))},Uo=t=>{const e=t,a=[];return(e.offset<0||typeof e.offset!="number")&&a.push("offset"),(parseInt(e.value)<0||e.value==="")&&a.push("value"),e.condition||a.push("condition"),a},jo=t=>{const{value:e,type:a,handleChange:r}=t;return a==="number"?React.createElement(H,{value:parseInt(e),onChange:n=>r("value",n==null?void 0:n.toString())}):a==="price"?React.createElement(H,{value:parseFloat(e),onChange:n=>r("value",n==null?void 0:n.toString()),decimalSeparator:".",parser:n=>parseFloat(n!=null?n:"")}):React.createElement(K,{value:e,onChange:n=>r("value",n.target.value)})},Go=t=>{const{field:e,onChange:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,n=(s,o)=>{const l={...e.data,[s]:o};a(l)},c=E.useMemo(()=>X().map(s=>({...s,disabled:["<",">"].includes(s.value)&&e.data.type==="string"})),[e.data.type]);return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.value_type),React.createElement(O,{value:e.data.type,onSelect:s=>n("type",s)},React.createElement(O.Option,{value:"string"},e.i18n.type_options.string),React.createElement(O.Option,{value:"number"},e.i18n.type_options.number),React.createElement(O.Option,{value:"price"},e.i18n.type_options.price))),React.createElement("div",{className:"field-control"},React.createElement("label",null,r.condition),React.createElement(O,{value:e.data.condition,options:c,onSelect:s=>n("condition",s)})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.meta_key),React.createElement(K,{value:e.data.key,onChange:s=>n("key",s)})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.meta_value),React.createElement(jo,{value:e.data.value,type:e.data.type,handleChange:n}))))},Ho=t=>{const e=t,a=[];return e.type||a.push("type"),(e.type==="string"&&!e.value||parseInt(e.value)<0||e.value==="")&&a.push("value"),e.key||a.push("key"),e.condition||a.push("condition"),a},{setCartConditionItemData:qo}=Q,Vo=t=>{const{field:e,groupKey:a,fieldKey:r,actions:n}=t,c=s=>{n.setCartConditionItemData({groupKey:a,fieldKey:r,data:s})};switch(e.type){case"logic":return React.createElement(Ta,{value:e.data,onChange:c});case"cart-quantity":return React.createElement(uo,{field:e,onChange:c});case"cart-subtotal":return React.createElement(po,{field:e,onChange:c});case"cart-weight":return React.createElement(Eo,{field:e,onChange:c});case"coupons-applied-in-cart":return React.createElement(go,{field:e,onChange:c});case"product-quantity":return React.createElement(Ro,{field:e,onChange:c});case"product-stock-availability-exists-in-cart":return React.createElement(So,{field:e,onChange:c});case"has-ordered-before":return React.createElement(Co,{field:e,onChange:c});case"product-category":return React.createElement(vo,{field:e,onChange:c});case"custom-taxonomy":return React.createElement(Ao,{field:e,onChange:c});case"has-ordered-product-categories-before":return React.createElement(Oo,{field:e,onChange:c});case"total-customer-spend-on-product-category":return React.createElement(Do,{field:e,onChange:c});case"customer-logged-in-status":return React.createElement(Io,{field:e,onChange:c});case"customer-user-role":case"disallowed-customer-user-role":return React.createElement($o,{field:e,onChange:c});case"customer-registration-date":return React.createElement($t,{field:e,onChange:c,min:1});case"customer-last-ordered":return React.createElement($t,{field:e,onChange:c,min:0});case"total-customer-spend":return React.createElement(Mo,{field:e,onChange:c});case"number-of-orders":return React.createElement(Fo,{field:e,onChange:c});case"custom-user-meta":case"custom-cart-item-meta":return React.createElement(Go,{field:e,onChange:c})}return React.createElement("div",null,"Unknown field type")},Yo=t=>({actions:x({setCartConditionItemData:qo},t)}),zo=$(null,Yo)(Vo);function Wo(t,e){switch(t){case"cart-quantity":return mo(e);case"cart-subtotal":return fo(e);case"cart-weight":return _o(e);case"coupons-applied-in-cart":return ho(e);case"product-quantity":return yo(e);case"product-stock-availability-exists-in-cart":return To(e);case"has-ordered-before":return bo(e);case"product-category":return wo(e);case"has-ordered-product-categories-before":return No(e);case"total-customer-spend-on-product-category":return Po(e);case"customer-logged-in-status":return ko(e);case"customer-user-role":case"disallowed-customer-user-role":return xo(e);case"customer-registration-date":case"customer-last-ordered":return Lo(e);case"total-customer-spend":return Bo(e);case"number-of-orders":return Uo(e);case"custom-user-meta":case"custom-cart-item-meta":return Ho(e)}return[]}const Ko=(t={loading:!1,templates:[],recent:[],review:[],edit:null,categories:[],formResponse:null,premiumModal:!1,searchFilters:{searchTerm:"",licenseFilter:"all"},sortOptions:{sortBy:"title",sortOrder:"asc"}},e)=>{let a;switch(e.type){case V.SET_COUPON_TEMPLATES:{const{data:r,type:n="main"}=e.payload;switch(n){case"main":return{...t,templates:r};case"recent":return{...t,recent:r};case"review":return{...t,review:r}}}case V.SET_COUPON_TEMPLATE_CATEGORIES:{const{data:r}=e.payload;return{...t,categories:r}}case V.UNSET_RECENT_COUPON_TEMPLATE:{const{id:r}=e.payload,n=[...t.recent];return a=n.findIndex(c=>c.id===r),n.splice(a,1),{...t,recent:n}}case V.SET_COUPON_TEMPLATES_LOADING:{const{loading:r}=e.payload;return{...t,loading:r}}case V.SET_EDIT_COUPON_TEMPLATE:{const{data:r}=e.payload;return{...t,edit:r}}case V.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE:{const{field:r,value:n}=e.payload,c={...t.edit};if(!c||!c.fields)return t;const s=c.fields.findIndex(o=>o.field===r);return s>-1&&(c.fields[s].value=n),{...t,edit:{...c}}}case V.VALIDATE_EDIT_COUPON_TEMPLATE_DATA:{const r={...t.edit};if(!r||!r.fields)return t;const n=r.fields.map(c=>{var s,o;return c.is_required&&(!c.value||((o=(s=c.fixtures)==null?void 0:s.options)==null?void 0:o.disabled)===c.value)?c.error="This field is required":c.error=void 0,c});return{...t,edit:{...r,fields:n}}}case V.VALIDATE_CART_CONDITIONS_DATA:{const r={...t.edit};if(!r||!r.cart_conditions||!r.cart_conditions.length)return t;let n=window.lodash.cloneDeep(r.cart_conditions);return n=n.map(c=>{if(c.type==="group_logic")return c;let s=c.fields;return s=s.map(o=>(o.type==="logic"||(o.errors=Wo(o.type,o.data)),o)),{...c,fields:s}}),{...t,edit:{...r,cart_conditions:n}}}case V.SET_COUPON_CREATED_RESPONSE_DATA:{const{data:r}=e.payload;return{...t,formResponse:r}}case V.SET_CART_CONDITION_ITEM_DATA:{const{groupKey:r,fieldKey:n,data:c}=e.payload,s={...t.edit};if(!s||!s.cart_conditions)return t;const o=window.lodash.cloneDeep(s.cart_conditions),l=o[r].type==="group_logic"?o[r]:null,i=o[r].type==="group"?o[r]:null;return n===null&&l!==null?(l.value=c,o[r]=l):n!==null&&(i==null?void 0:i.type)==="group"&&(i.fields[n].data=c,o[r]=i),{...t,edit:{...s,cart_conditions:o}}}case V.CLEAR_COUPON_CREATED_RESPONSE_DATA:{const r={...t.edit};return r.fields=r.fields.map(n=>{var c;return n.value=(c=n.pre_filled_value)!=null?c:"",n}),{...t,formResponse:null,edit:null}}case V.TOGGLE_PREMIUM_MODAL:{const{show:r}=e.payload;return{...t,premiumModal:r}}case V.SET_SEARCH_FILTERS:{const{searchTerm:r,licenseFilter:n}=e.payload;return{...t,searchFilters:{searchTerm:r,licenseFilter:n}}}case V.SET_SORT_OPTIONS:{const{sortBy:r,sortOrder:n}=e.payload;return{...t,sortOptions:{sortBy:r,sortOrder:n}}}}return t};(function(){(function(t){(function(e){var a={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(f){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function r(f){return f&&DataView.prototype.isPrototypeOf(f)}if(a.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(f){return f&&n.indexOf(Object.prototype.toString.call(f))>-1};function s(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(f))throw new TypeError("Invalid character in header field name");return f.toLowerCase()}function o(f){return typeof f!="string"&&(f=String(f)),f}function l(f){var R={next:function(){var A=f.shift();return{done:A===void 0,value:A}}};return a.iterable&&(R[Symbol.iterator]=function(){return R}),R}function i(f){this.map={},f instanceof i?f.forEach(function(R,A){this.append(A,R)},this):Array.isArray(f)?f.forEach(function(R){this.append(R[0],R[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(R){this.append(R,f[R])},this)}i.prototype.append=function(f,R){f=s(f),R=o(R);var A=this.map[f];this.map[f]=A?A+", "+R:R},i.prototype.delete=function(f){delete this.map[s(f)]},i.prototype.get=function(f){return f=s(f),this.has(f)?this.map[f]:null},i.prototype.has=function(f){return this.map.hasOwnProperty(s(f))},i.prototype.set=function(f,R){this.map[s(f)]=o(R)},i.prototype.forEach=function(f,R){for(var A in this.map)this.map.hasOwnProperty(A)&&f.call(R,this.map[A],A,this)},i.prototype.keys=function(){var f=[];return this.forEach(function(R,A){f.push(A)}),l(f)},i.prototype.values=function(){var f=[];return this.forEach(function(R){f.push(R)}),l(f)},i.prototype.entries=function(){var f=[];return this.forEach(function(R,A){f.push([A,R])}),l(f)},a.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);function d(f){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}function m(f){return new Promise(function(R,A){f.onload=function(){R(f.result)},f.onerror=function(){A(f.error)}})}function p(f){var R=new FileReader,A=m(R);return R.readAsArrayBuffer(f),A}function g(f){var R=new FileReader,A=m(R);return R.readAsText(f),A}function h(f){for(var R=new Uint8Array(f),A=new Array(R.length),k=0;k<R.length;k++)A[k]=String.fromCharCode(R[k]);return A.join("")}function y(f){if(f.slice)return f.slice(0);var R=new Uint8Array(f.byteLength);return R.set(new Uint8Array(f)),R.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(f){this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:a.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:a.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():a.arrayBuffer&&a.blob&&r(f)?(this._bodyArrayBuffer=y(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||c(f))?this._bodyArrayBuffer=y(f):this._bodyText=f=Object.prototype.toString.call(f):this._bodyText="",this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var f=d(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var f=d(this);if(f)return f;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(h(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function N(f){var R=f.toUpperCase();return w.indexOf(R)>-1?R:f}function b(f,R){R=R||{};var A=R.body;if(f instanceof b){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,R.headers||(this.headers=new i(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!A&&f._bodyInit!=null&&(A=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new i(R.headers)),this.method=N(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&A)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(A)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function T(f){var R=new FormData;return f.trim().split("&").forEach(function(A){if(A){var k=A.split("="),U=k.shift().replace(/\+/g," "),D=k.join("=").replace(/\+/g," ");R.append(decodeURIComponent(U),decodeURIComponent(D))}}),R}function S(f){var R=new i,A=f.replace(/\r?\n[\t ]+/g," ");return A.split(/\r?\n/).forEach(function(k){var U=k.split(":"),D=U.shift().trim();if(D){var ce=U.join(":").trim();R.append(D,ce)}}),R}C.call(b.prototype);function v(f,R){R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in R?R.statusText:"OK",this.headers=new i(R.headers),this.url=R.url||"",this._initBody(f)}C.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var f=new v(null,{status:0,statusText:""});return f.type="error",f};var L=[301,302,303,307,308];v.redirect=function(f,R){if(L.indexOf(R)===-1)throw new RangeError("Invalid status code");return new v(null,{status:R,headers:{location:f}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(f){e.DOMException=function(R,A){this.message=R,this.name=A;var k=Error(R);this.stack=k.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function z(f,R){return new Promise(function(A,k){var U=new b(f,R);if(U.signal&&U.signal.aborted)return k(new e.DOMException("Aborted","AbortError"));var D=new XMLHttpRequest;function ce(){D.abort()}D.onload=function(){var ee={status:D.status,statusText:D.statusText,headers:S(D.getAllResponseHeaders()||"")};ee.url="responseURL"in D?D.responseURL:ee.headers.get("X-Request-URL");var F="response"in D?D.response:D.responseText;A(new v(F,ee))},D.onerror=function(){k(new TypeError("Network request failed"))},D.ontimeout=function(){k(new TypeError("Network request failed"))},D.onabort=function(){k(new e.DOMException("Aborted","AbortError"))},D.open(U.method,U.url,!0),U.credentials==="include"?D.withCredentials=!0:U.credentials==="omit"&&(D.withCredentials=!1),"responseType"in D&&a.blob&&(D.responseType="blob"),U.headers.forEach(function(ee,F){D.setRequestHeader(F,ee)}),U.signal&&(U.signal.addEventListener("abort",ce),D.onreadystatechange=function(){D.readyState===4&&U.signal.removeEventListener("abort",ce)}),D.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}return z.polyfill=!0,t.fetch||(t.fetch=z,t.Headers=i,t.Request=b,t.Response=v),e.Headers=i,e.Request=b,e.Response=v,e.fetch=z,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:$a)})();const Qo=axios.CancelToken,M=axios.create({baseURL:wpApiSettings.root,timeout:0,headers:{"X-WP-Nonce":wpApiSettings.nonce,"X-ACFW-Context":"admin"}}),We=new Map,He=t=>{const e=We.get(t);e&&(e(),We.delete(t))},re=t=>new Qo(e=>We.set(t,e));function*Jo(t){const{id:e,processingCB:a,successCB:r,failCB:n}=t.payload,c=e||"general_section";try{typeof a=="function"&&a();const s=yield q(()=>M.get("coupons/v1/settings/sections",{headers:{section:c}}));if(s&&s.data){const o=c?s.data.findIndex(l=>l.id===c):0;yield G(oe.rehydrateStoreSettings({data:s.data[o]})),yield G(je.setStoreSectionItems({data:s.data})),typeof r=="function"&&r(s)}}catch(s){typeof n=="function"&&n({error:s})}}function*Xo(t){const{id:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{typeof a=="function"&&a();const c=e||"general_section",s=yield q(()=>M.get("coupons/v1/settings/sections/".concat(c)));s&&s.data&&(yield G(oe.rehydrateStoreSettings({data:s.data})),yield G(je.setStoreSectionItem({data:s.data})),typeof r=="function"&&r(s))}catch(c){typeof n=="function"&&n({error:c})}}const Zo=[j(Re.READ_SECTIONS,Jo),j(Re.READ_SECTION,Xo)];function*el(t){const{data:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{typeof a=="function"&&a();const c=yield q(()=>M.post("coupons/v1/setting/sections",e));c&&c.data&&(yield G(oe.rehydrateStoreSettings({})),typeof r=="function"&&r(c))}catch(c){typeof n=="function"&&n({error:c,payload:e})}}function*tl(t){const{data:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{if(typeof a=="function"&&a(),!e.id)throw new Error("Can not update survey. No survey id provided.");const c=yield q(()=>{const{id:s,...o}=e;return M.put("coupons/v1/settings/".concat(s),o)});c&&c.data&&(yield G(oe.rehydrateStoreSetting({id:c.data.id,data:c.data})),e.type==="module"&&(yield G(je.toggleModuleSection({module:e.id,show:e.value==="yes"}))),typeof r=="function"&&r(c))}catch(c){typeof n=="function"&&n({error:c,payload:e})}}function*al(t){const{id:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{typeof a=="function"&&a();const c=yield q(()=>M.delete("coupons/v1/settings/".concat(e)));c&&c.data&&(yield G(oe.rehydrateStoreSettings({})),typeof r=="function"&&r(c))}catch(c){typeof n=="function"&&n({error:c})}}function*nl(t){const{processingCB:e,successCB:a,failCB:r}=t.payload;try{typeof e=="function"&&e();const n=yield q(()=>M.get("coupons/v1/settings/"));n&&n.data&&(yield G(oe.rehydrateStoreSettings({data:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*rl(t){const{data:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{if(typeof a=="function"&&a(),e){let c=e.fields.filter(s=>s.type!=="title"&&s.type!=="sectionend");c=c.map(s=>({id:s.id,value:s.value})),yield G(oe.setStoreSettingItems({data:c})),typeof r=="function"&&r(c)}}catch(c){typeof n=="function"&&n({error:c})}}function*cl(t){const{id:e,data:a,processingCB:r,successCB:n,failCB:c}=t.payload;try{if(typeof r=="function"&&r(),a)yield G(oe.setStoreSettingItem({data:a})),typeof n=="function"&&n(a);else{const s=yield q(()=>M.get("coupons/v1/settings/".concat(e)));s&&s.data&&(yield G(oe.setStoreSettingItem({data:s.data})),typeof n=="function"&&n(s))}}catch(s){typeof c=="function"&&c({error:s})}}const sl=[j(ue.CREATE_SETTING,el),j(ue.UPDATE_SETTING,tl),j(ue.DELETE_SETTING,al),j(ue.READ_SETTINGS,nl),j(ue.REHYDRATE_STORE_SETTINGS,rl),j(ue.REHYDRATE_STORE_SETTING,cl)];function*ol(t){const{startPeriod:e,endPeriod:a,processingCB:r,successCB:n,failCB:c}=t.payload;try{typeof r=="function"&&r();const s=yield q(()=>M.get("store-credits/v1/customers/status",{params:{startPeriod:e,endPeriod:a},cancelToken:re("scdashboard")}));s&&s.data&&(yield G(Ge.setStoreCreditsDashboardData({status:s.data})),typeof n=="function"&&n(s))}catch(s){typeof c=="function"&&c({error:s})}}function*ll(t){const{page:e,startPeriod:a,endPeriod:r,processingCB:n,successCB:c,failCB:s}=t.payload;try{typeof n=="function"&&n();const o=yield q(()=>M.get("store-credits/v1/entries",{params:{page:e,startPeriod:a,endPeriod:r,is_admin:!0}}));o&&o.data&&G&&(yield G(Ge.setStoreCreditsHistoryData({data:o.data})),typeof c=="function"&&c(o))}catch(o){typeof s=="function"&&s({error:o})}}const il=[j(ve.READ_STORE_CREDITS_DASHBOARD_DATA,ol),j(ve.READ_STORE_CREDITS_HISTORY_DATA,ll)];function*ul(t){const{params:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{typeof a=="function"&&a();const c=yield q(()=>M.get("store-credits/v1/customers",{params:e,cancelToken:re("customer_search")}));c&&c.data&&(yield G(Ae.setStoreCreditsCustomers({data:c.data})),typeof r=="function"&&r(c))}catch(c){typeof n=="function"&&n({error:c})}}function*dl(t){const{id:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{if(typeof a=="function"&&a(),!e)throw new Error("Can't fetch data. No customer ID was provided.");const c=yield q(()=>M.get("store-credits/v1/customers/".concat(e)));c&&c.data&&(yield G(Ae.setStoreCreditsCustomerStatus({id:e,status:c.data.status,sources:c.data.sources})),typeof r=="function"&&r(c))}catch(c){typeof n=="function"&&n({error:c})}}function*ml(t){const{id:e,page:a,processingCB:r,successCB:n,failCB:c}=t.payload;try{if(typeof r=="function"&&r(),!e)throw new Error("Can't fetch data. No customer ID was provided.");const s=yield q(()=>M.get("store-credits/v1/entries",{params:{user_id:e,page:a!=null?a:1,is_admin:!0}}));s&&s.data&&typeof n=="function"&&n(s)}catch(s){typeof c=="function"&&c({error:s})}}function*pl(t){const{id:e,type:a,amount:r,note:n,processingCB:c,successCB:s,failCB:o}=t.payload;try{if(typeof c=="function"&&c(),!e)throw new Error("Can't adjust store credits. No customer ID was provided.");const l=yield q(()=>M.post("store-credits/v1/entries",{user_id:e,type:a,amount:r,note:n!=null?n:"",action:"admin_".concat(a)}));l&&l.data&&typeof s=="function"&&s(l)}catch(l){typeof o=="function"&&o({error:l})}}const fl=[j(me.READ_STORE_CREDITS_CUSTOMERS,ul),j(me.READ_STORE_CREDITS_CUSTOMER_STATUS,dl),j(me.READ_STORE_CREDITS_CUSTOMER_ENTRIES,ml),j(me.ADJUST_CUSTOMER_STORE_CREDITS,pl)];function*El(t){const{startPeriod:e,endPeriod:a,processingCB:r,successCB:n,failCB:c}=t.payload;try{typeof r=="function"&&r();const s=yield q(()=>M.get("coupons/v1/reports",{params:{startPeriod:e,endPeriod:a},cancelToken:re("dashboardwidgets")}));s&&s.data&&(yield G(Sa.setDashboardWidgetsData({widgets:s.data})),typeof n=="function"&&n(s))}catch(s){typeof c=="function"&&c({error:s})}}const _l=[j(ut.READ_DASHBOARD_WIDGETS_DATA,El)];function*gl(t){const{processingCB:e,successCB:a,failCB:r}=t.payload;try{typeof e=="function"&&e();const n=yield q(()=>M.get("coupons/v1/reports/notices"));n&&n.data&&(yield G(dt.setAdminNotices({notices:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}const hl=[j(Le.READ_ADMIN_NOTICES,gl)];function*Rl(t){const{isReview:e=!1,processingCB:a,successCB:r,failCB:n}=t.payload;try{typeof a=="function"&&a();const c=yield q(()=>M.get("coupons/v1/templates",{cancelToken:re("coupon_templates"),params:e?{is_review:1}:{}}));c&&c.data&&(yield G(Q.setCouponTemplates({data:c.data,type:e?"review":"main"})),typeof r=="function"&&r(c))}catch(c){typeof n=="function"&&n({error:c})}}function*yl(t){const{id:e,isReview:a,processingCB:r,successCB:n,failCB:c}=t.payload;try{typeof r=="function"&&r();const s=yield q(()=>M.get("coupons/v1/templates/".concat(e),{cancelToken:re("coupon_template"),params:a?{is_review:1}:{}}));s&&s.data&&(s.data.fields=s.data.fields.map(o=>{var l;return o.value=(l=o.pre_filled_value)!=null?l:"",o}),typeof n=="function"&&n(s))}catch(s){typeof c=="function"&&c({error:s})}}function*Sl(t){const{processingCB:e,successCB:a,failCB:r}=t.payload;try{typeof e=="function"&&e();const n=yield q(()=>M.get("coupons/v1/templates/recent",{cancelToken:re("recent_coupon_templates")}));n&&n.data&&(yield G(Q.setCouponTemplates({data:n.data,type:"recent"})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*Tl(t){const{processingCB:e,successCB:a,failCB:r}=t.payload;try{typeof e=="function"&&e();const n=yield q(()=>M.get("coupons/v1/templates/categories",{cancelToken:re("coupon_template_categories")}));n&&n.data&&(yield G(Q.setCouponTemplateCategories({data:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*Cl(t){const{slug:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{typeof a=="function"&&a();const c=yield q(()=>M.get("coupons/v1/templates/categories/".concat(e),{cancelToken:re("coupon_template_category")}));c&&c.data&&(yield G(Q.setCouponTemplates({data:c.data})),typeof r=="function"&&r(c))}catch(c){typeof n=="function"&&n({error:c})}}function*bl(t){const{data:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{typeof a=="function"&&a();const c={...e};c.cart_conditions=e.cart_conditions.map(o=>{if(o.type==="group_logic")return o;const l=o.fields;return{type:o.type,fields:l.map(({type:i,data:d})=>({type:i,data:d}))}});const s=yield q(()=>M.post("coupons/v1/templates",c,{cancelToken:re("coupon_template_create")}));s&&s.data&&typeof r=="function"&&r(s)}catch(c){typeof n=="function"&&n({error:c})}}function*vl(t){const{id:e,processingCB:a,successCB:r,failCB:n}=t.payload;try{typeof a=="function"&&a();const c=yield q(()=>M.delete("coupons/v1/templates/recent/".concat(e),{cancelToken:re("coupon_template_delete")}));typeof r=="function"&&r(c)}catch(c){typeof n=="function"&&n({error:c})}}const wl=[j(V.READ_COUPON_TEMPLATES,Rl),j(V.READ_COUPON_TEMPLATE,yl),j(V.READ_RECENT_COUPON_TEMPLATES,Sl),j(V.READ_COUPON_TEMPLATE_CATEGORIES,Tl),j(V.READ_COUPON_TEMPLATE_CATEGORY,Cl),j(V.CREATE_COUPON_FROM_TEMPLATE,bl),j(V.DELETE_RECENT_COUPON_TEMPLATE,vl)];function*Al(){yield Wt([...Zo,...sl,...fl,...il,..._l,...hl,...wl])}const Ol=t=>Xt(...t);function Nl(t=void 0){const e=Kt(),a=Qt(Jt({sections:ao,settingValues:no,page:ro,storeCreditsDashboard:co,storeCreditsCustomers:so,dashboardWidgets:oo,adminNotices:lo,couponTemplates:Ko}),t,Ol([e]));return e.run(Al),a}const pt=t=>{const{hideUpgrade:e}=t,{app_pages:a,premium_page:r}=acfwAdminApp,[n]=a.filter(c=>c.slug==="acfw-premium");return React.createElement("div",{className:"acfw-logo-div"},n?React.createElement(React.Fragment,null,React.createElement("a",{href:acfwAdminApp.link_logo,target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"})),!e&&React.createElement("a",{className:"acfw-header-upgrade-btn",href:acfwAdminApp.link_upgrade,target:"_blank",rel:"noreferrer"},r.upgrade)):React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"}))},pe=t=>{var n;const{title:e,className:a,description:r}=t;return(n=t.hideUpgrade)!=null,React.createElement("div",{className:"page-header ".concat(a!=null?a:"")},React.createElement(pt,{hideUpgrade:!0}),!!e&&React.createElement("h1",null,e),!!r&&React.createElement("p",null,r))},Dl=()=>{const{admin_url:t,dashboard_page:{create_coupon:e}}=acfwAdminApp;return React.createElement("div",{className:"quick-create-coupon"},React.createElement("span",{className:"label"},"".concat(e.label,":")),React.createElement(I,{type:"primary",href:"".concat(t,"post-new.php?post_type=shop_coupon&type=percent"),target:"_blank",size:"small",ghost:!0},e.percentage),React.createElement(I,{type:"primary",href:"".concat(t,"post-new.php?post_type=shop_coupon&type=fixed_cart"),target:"_blank",size:"small",ghost:!0},e.fixed),React.createElement(I,{type:"primary",href:"".concat(t,"post-new.php?post_type=shop_coupon&type=acfw_bogo"),target:"_blank",size:"small",ghost:!0},e.bogo))},Pl=t=>{const{notice:{slug:e,heading:a,content:r,type:n,nonce:c,actions:s,is_dismissable:o,is_in_app_notifications:l},onDismiss:i,onRead:d}=t,{dashboard_page:{labels:m}}=acfwAdminApp;return React.createElement(J,{className:"single-notice notice-".concat(n," ").concat(e,"-notice"),onMouseEnter:l?()=>d(e,c):void 0},a&&React.createElement("div",{className:"notice-heading"},React.createElement("h3",null,a)),React.createElement("div",{className:"notice-content"},r.map((p,g)=>React.createElement("p",{key:g,dangerouslySetInnerHTML:{__html:p}}))),React.createElement("div",{className:"notice-actions"},s.map((p,g)=>React.createElement(I,{key:p.key,type:g===0?"primary":"default",href:p.link?p.link.replace(/&amp;/g,"&"):void 0,target:p!=null&&p.is_external?"_blank":void 0,onClick:p!=null&&p.response?()=>i(e,c,p.response):void 0},p.text)),o&&e!=="review_request"&&React.createElement(I,{onClick:()=>i(e,c)},m.dismiss)),o&&React.createElement(I,{className:"dismiss-notice-icon",icon:React.createElement(ca,null),size:"small",type:"text",shape:"circle",onClick:()=>i(e,c,e==="review_request"?"snooze":"dismissed")}))};const{dismissAdminNotice:Il,readAdminNotice:kl}=dt,$l=t=>{const{notices:e,actions:a}=t,[r,n]=E.useState(1),[c,s]=E.useState(0),o=E.useRef(null),{dashboard_page:{labels:l}}=acfwAdminApp,i=(m,p,g="yes")=>{a.dismissAdminNotice({slug:m}),jQuery.ajax({method:"post",url:ajaxurl,data:{action:"acfw_dismiss_admin_notice",notice:m,nonce:p,response:g},dataType:"json"})},d=(m,p)=>{a.readAdminNotice({slug:m}),jQuery.ajax({method:"post",url:ajaxurl,data:{action:"acfw_read_admin_notice",notice:m,nonce:p},dataType:"json"})};return E.useEffect(()=>{e.length&&!window.lodash.isNull(o)&&s(o.current.clientHeight)}),0>=e.length?null:React.createElement("div",{className:"dashboard-notices"},React.createElement("h2",null,l.notices),React.createElement("div",{className:"list-overflow",style:{height:0<c?c+5:"auto"}},React.createElement("div",{className:"notices-list",ref:o},e.slice(0,r).map(m=>React.createElement(Pl,{key:m.slug,notice:m,onRead:d,onDismiss:i})))),1<e.length&&React.createElement(se,null,React.createElement(I,{className:"toggle-view-all",size:"small",type:"primary",onClick:()=>n(1>=r?e.length:1),ghost:!0},1>=r?l.view_all:l.hide)))},xl=t=>({notices:t.adminNotices}),Ll=t=>({actions:x({dismissAdminNotice:Il,readAdminNotice:kl},t)}),Ml=$(xl,Ll)($l),wa=()=>React.createElement("svg",{width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{clipPath:"url(#clip0_559_38)"},React.createElement("path",{d:"M7.5 1.875C7.5 1.35732 7.91895 0.9375 8.4375 0.9375H12.1611C12.3135 0.9375 12.4365 0.962695 12.5449 1.00869C12.6299 1.0541 12.7588 1.12119 12.8496 1.20996C12.8496 1.21143 12.8496 1.21289 12.8525 1.21406C13.0342 1.39629 13.0986 1.63418 13.125 1.87207C13.125 1.87324 13.125 1.87412 13.125 1.875V5.625C13.125 6.14355 12.7061 6.5625 12.1875 6.5625C11.6689 6.5625 11.25 6.14355 11.25 5.625V4.13965L6.28711 9.09961C5.9209 9.46582 5.3291 9.46582 4.96289 9.09961C4.59668 8.7334 4.59668 8.1416 4.96289 7.77539L9.92285 2.8125H8.4375C7.91895 2.8125 7.5 2.39268 7.5 1.875ZM0 3.75C0 2.71436 0.839356 1.875 1.875 1.875H4.6875C5.20605 1.875 5.625 2.29482 5.625 2.8125C5.625 3.33105 5.20605 3.75 4.6875 3.75H1.875V12.1875H10.3125V9.375C10.3125 8.85645 10.7314 8.4375 11.25 8.4375C11.7686 8.4375 12.1875 8.85645 12.1875 9.375V12.1875C12.1875 13.2217 11.3467 14.0625 10.3125 14.0625H1.875C0.839356 14.0625 0 13.2217 0 12.1875V3.75Z",fill:"#4A86FB"})),React.createElement("defs",null,React.createElement("clipPath",{id:"clip0_559_38"},React.createElement("rect",{width:"13.125",height:"15",fill:"white"})))),Aa=t=>{const{content:e}=t;return React.createElement("span",{className:"tooltip"},React.createElement(Se,{overlayClassName:"dashboard-tooltip",placement:"top",content:React.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),trigger:"click"},React.createElement(nn,null)))},Bl=t=>{var n;const{widget:e,onClickLink:a}=t,r=(n=e.page_link)!=null?n:!1;return React.createElement(J,{className:"widget big-number-widget"},React.createElement("p",{className:"title"},React.createElement("span",{className:"widget-value",dangerouslySetInnerHTML:{__html:e.title_html}}),e!=null&&e.tooltip_html?React.createElement(Aa,{content:e.tooltip_html}):null),React.createElement("p",{className:"description"},React.createElement("span",{className:"widget-name",dangerouslySetInnerHTML:{__html:e.description_html}}),r?React.createElement("a",{onClick:()=>a(r),href:"javascript:void(0);"},React.createElement(wa,null)):null))},Fl=t=>{const{widget:e}=t,{dashboard_page:{labels:a,coupons_list_link:r},admin_url:n}=acfwAdminApp,c=[{title:a.coupon,dataIndex:"coupon",key:"coupon",render:(s,o)=>React.createElement("a",{href:"".concat(n,"post.php?post=").concat(o.id,"&action=edit"),target:"_blank",rel:"noreferrer"},s)},{title:a.uses,dataIndex:"usage_total",key:"usage_total"},{title:React.createElement(React.Fragment,null,React.createElement("span",{className:"discounted-label"},a.discounted),e!=null&&e.tooltip_html?React.createElement(Aa,{content:e.tooltip_html}):null),dataIndex:"discount_total",key:"discount_total"}];return React.createElement("div",{className:"widget coupon-table-widget"},React.createElement("div",{className:"widget-header"},React.createElement("h3",{className:"widget-name",dangerouslySetInnerHTML:{__html:e.title_html}}),React.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},React.createElement(wa,null))),e.table_data&&React.createElement(le,{bordered:!0,dataSource:e.table_data,columns:c,pagination:!1}))},Ul=t=>{const{widget:e}=t;return React.createElement(J,{className:"widget upsell-widget"},React.createElement("p",{className:"title widget-name",dangerouslySetInnerHTML:{__html:e.title_html}}),React.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.description_html}}))},{setStorePage:jl}=ge,Gl=t=>{const{widgets:e,actions:a}=t,r=ne(),n=c=>{r.push("".concat(ie(),"admin.php?page=").concat(c)),a.setStorePage({data:c})};return e?React.createElement("div",{className:"report-widgets"},e.map(c=>{switch(c.type){case"big_number":return React.createElement(Bl,{key:c.key,widget:c,onClickLink:n});case"table":return React.createElement(Fl,{key:c.key,widget:c});case"upsell":return React.createElement(Ul,{key:c.key,widget:c});case"section_title":return React.createElement("h2",{key:c.key,className:"section-title"},c.title_html)}return null})):null},Hl=t=>({actions:x({setStorePage:jl},t)}),ql=$(null,Hl)(Gl),Vl=t=>{const{store_credits_page:{labels:e,period_options:a}}=acfwAdminApp,{className:r,periodValue:n,startPeriod:c,endPeriod:s,onPeriodChange:o,onCustomDateRange:l}=t;return React.createElement("div",{className:"report-date-range-picker ".concat(r)},React.createElement(O,{value:n,onSelect:o},a.map((i,d)=>React.createElement(O.Option,{key:d,value:i.value},i.label))),React.createElement(st.RangePicker,{value:[c,s],onChange:l}))},Yl=()=>React.createElement("div",{className:"report-widgets"},[...Array(8)].map((t,e)=>React.createElement(J,{key:e,className:"widget widget-skeleton"},React.createElement(te,{active:!0})))),Ke=t=>{const{iconKey:e}=t;return e==="getting_started"?React.createElement(ia,null):e==="documentation"?React.createElement(fn,null):e==="settings"?React.createElement(ua,null):e==="support"?React.createElement(Be,null):e==="active"?React.createElement(En,null):e==="inactive"?React.createElement(_n,null):e==="expired"?React.createElement(gn,null):e==="learn_more"?React.createElement(da,null):null},zl=t=>{const{slug:e,label:a,link:r,onClick:n}=t;return r.includes("http")?React.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},React.createElement(Ke,{iconKey:e}),a):React.createElement("a",{onClick:()=>n&&n(r),href:"javascript:void(0);"},React.createElement(Ke,{iconKey:e}),a)},Wl=t=>{const{name:e,campaign:a,status:r,itemKey:n}=t,{dashboard_page:{labels:c}}=acfwAdminApp;let s;if(r==="learn_more"){let o="https://advancedcouponsplugin.com/pricing/",l="";switch(n){case"acfwp":l="";break;case"lpfw":l="loyalty/";break;case"agc":l="gift-cards/";break;default:l=""}const i="".concat(o).concat(l,"?utm_source=acfwf&utm_medium=dashboard&utm_campaign=").concat(a);s='<a class="'.concat(r,'" href="').concat(i,'" target="_blank" href="javascript:void(0);">').concat(c[r],"</a>")}else s='<span class="plugin-status '.concat(r,'">').concat(c[r],"</span>");return React.createElement(React.Fragment,null,React.createElement(Ke,{iconKey:r}),React.createElement("span",{className:"plugin-name",dangerouslySetInnerHTML:{__html:"".concat(e," (").concat(s,")")}}))},{setStorePage:Kl}=ge,Ql=ie(),Jl=t=>{const{actions:e}=t,a=ne(),[r,n]=E.useState([]),[c,s]=E.useState(!0),{dashboard_page:{labels:o,resources_links:l}}=acfwAdminApp;E.useEffect(()=>{M.get("coupons/v1/reports/license").then(d=>{n(d.data),s(!1)})},[]);const i=d=>{a.push("".concat(Ql,"admin.php?page=").concat(d)),e.setStorePage({data:d})};return React.createElement("div",{className:"sidebar-inner"},React.createElement(De,{className:"resources-section sidebar-section",header:React.createElement("h2",null,"".concat(o.helpful_resources,":")),dataSource:l,renderItem:d=>React.createElement(De.Item,{key:d.key},React.createElement(zl,{...d,onClick:i}))}),React.createElement(De,{className:"plugins-section sidebar-section",header:React.createElement("h2",null,"".concat(o.license_activation_status,":")),loading:c,dataSource:r,renderItem:d=>React.createElement(De.Item,{key:d.key},React.createElement(Wl,{...d,itemKey:d.key}))}),React.createElement("p",{className:"view-licenses"},React.createElement("a",{onClick:()=>i("acfw-license")},o.view_licenses)))},Xl=t=>({actions:x({setStorePage:Kl},t)}),Zl=$(null,Xl)(Jl);const{readDashboardWidgetsData:ei}=Sa,ti=t=>{const{widgets:e,actions:a}=t,[r,n]=E.useState("month_to_date"),[c,s]=E.useState(window.moment().startOf("month")),[o,l]=E.useState(window.moment().startOf("day")),[i,d]=E.useState(!1),{dashboard_page:{title:m}}=acfwAdminApp;E.useEffect(()=>{d(!0),He("dashboardwidgets"),a.readDashboardWidgetsData({startPeriod:c.format("YYYY-MM-DD"),endPeriod:o.format("YYYY-MM-DD"),successCB:()=>d(!1)})},[c,o]);const p=h=>{if(h===r)return;const[y,C]=io(h);n(h),s(y),l(C)},g=h=>{var y,C;h&&(s((y=h[0])!=null?y:""),l((C=h[1])!=null?C:""),n("custom"))};return React.createElement("div",{className:"dashboard-page"},React.createElement(pe,{title:m,className:"dashboard-header"}),React.createElement(Y,{gutter:16},React.createElement(P,{className:"dashboard-content",span:18},React.createElement(Ml,null),React.createElement(Dl,null),React.createElement(Vl,{periodValue:r,startPeriod:c,endPeriod:o,onPeriodChange:p,onCustomDateRange:g}),i?React.createElement(Yl,null):React.createElement(ql,{widgets:e})),React.createElement(P,{className:"dashboard-sidebar",span:6},React.createElement(Zl,null))))},ai=t=>({widgets:t.dashboardWidgets}),ni=t=>({actions:x({readDashboardWidgetsData:ei},t)}),ri=$(ai,ni)(ti),{readStoreCreditsHistoryData:ci}=Ge,si=t=>{const{entries:e,actions:a,filter:r}=t,{store_credits_page:{labels:n}}=acfwAdminApp,[c,s]=E.useState(1),[o,l]=E.useState(!0),[i,d]=E.useState(0),{beforeDate:m,afterDate:p}=r;E.useEffect(()=>{l(!0),a.readStoreCreditHistory({page:c,startPeriod:m.format("YYYY-MM-DD"),endPeriod:p.format("YYYY-MM-DD"),successCB:h=>{d(h.headers["x-total"]),l(!1)}})},[c,m,p]),E.useEffect(()=>{e&&e.length&&l(!1)},[e,l]);const g=[{title:n.customer_name,dataIndex:"customer_name",key:"customer_name"},{title:n.email,dataIndex:"customer_email",key:"customer_email"},{title:n.amount,dataIndex:"amount",key:"amount",render:(h,y)=>"".concat(va(y)).concat(h)},{title:n.activity,dataIndex:"activity",key:"activity",render:(h,y)=>[h,y.note?React.createElement(Se,{placement:"top",content:y.note,trigger:"click",overlayClassName:"entry-note-popover"},React.createElement(ma,{style:{paddingLeft:"5px"}})):null]},{title:n.related,dataIndex:"rel_label",key:"rel_label",render:(h,y)=>y.rel_link?React.createElement("a",{href:y.rel_link},h):h},{title:n.date,dataIndex:"date",key:"date"}];return React.createElement(J,{className:"acfw-dashboard-history",title:n.history},React.createElement(le,{loading:o,pagination:!1,dataSource:e,columns:g}),i>10&&React.createElement(Fe,{disabled:o,current:c,total:i,onChange:s,showSizeChanger:!1}))},oi=t=>{var e;return{entries:(e=t.storeCreditsDashboard)==null?void 0:e.history}},li=t=>({actions:x({readStoreCreditHistory:ci},t)}),ii=$(oi,li)(si);const{readStoreCreditsDashboardData:ui}=Ge,di=t=>{const{status:e,actions:a}=t,{store_credits_page:{labels:r,period_options:n}}=acfwAdminApp,[c,s]=E.useState(!1),[o,l]=E.useState("month_to_date"),[i,d]=E.useState(window.moment().startOf("month")),[m,p]=E.useState(window.moment().startOf("day")),[g,h]=E.useState({periodValue:"month_to_date",beforeDate:window.moment().startOf("month"),afterDate:window.moment().startOf("day")}),y=b=>{h(b)},C=[{title:r.statistics,dataIndex:"label",key:"label"},{title:r.amount,dataIndex:"amount",key:"amount"}];E.useEffect(()=>{s(!0),He("scdashboard"),a.readDashboardData({startPeriod:i.format("YYYY-MM-DD"),endPeriod:m.format("YYYY-MM-DD"),successCB:()=>s(!1)})},[i,m]);const w=b=>{l(b);let T,S;switch(b){case"week_to_date":T=window.moment().startOf("week"),S=window.moment().startOf("day");break;case"month_to_date":T=window.moment().startOf("month"),S=window.moment().startOf("day");break;case"quarter_to_date":T=window.moment().startOf("quarter"),S=window.moment().startOf("day");break;case"year_to_date":T=window.moment().startOf("year"),S=window.moment().startOf("day");break;case"last_week":T=window.moment().subtract(1,"weeks").startOf("week"),S=window.moment().subtract(1,"weeks").endOf("week");break;case"last_month":T=window.moment().subtract(1,"months").startOf("month"),S=window.moment().subtract(1,"months").endOf("month");break;case"last_quarter":T=window.moment().subtract(1,"quarters").startOf("quarter"),S=window.moment().subtract(1,"quarters").endOf("quarter");break;case"last_year":T=window.moment().subtract(1,"years").startOf("year"),S=window.moment().subtract(1,"years").endOf("year");break;default:T=window.moment().startOf("day"),S=window.moment().startOf("day");break}d(T),p(S),y({periodValue:b,beforeDate:T,afterDate:S})},N=b=>{d(b[0]),p(b[1]),l("custom"),y({periodValue:"custom",beforeDate:b[0],afterDate:b[1]})};return React.createElement(React.Fragment,null,React.createElement("div",{className:"store-credits-period-selector"},React.createElement(O,{value:o,onSelect:w},n.map(b=>React.createElement(O.Option,{value:b.value},b.label))),React.createElement(st.RangePicker,{value:[i,m],onChange:N})),React.createElement(J,{title:r.status},React.createElement(le,{loading:c,pagination:!1,dataSource:e,columns:C})),React.createElement(se,null),React.createElement(ii,{filter:g}))},mi=t=>{var e;return{status:(e=t.storeCreditsDashboard)==null?void 0:e.status}},pi=t=>({actions:x({readDashboardData:ui},t)}),fi=$(mi,pi)(di),Ei=(t,e)=>{switch(e.type){case"SET_PAGE":return{...t,page:e.value};case"SET_PER_PAGE":return{...t,per_page:e.value};case"SET_SEARCH":return{...t,search:e.value,page:1};case"SET_SORT_BY":return{...t,sort_by:e.value};case"SET_SORT_ORDER":return{...t,sort_order:e.value};case"SET_META_KEY":return{...t,meta_key:e.value};case"SET_QUERY":return e.value}return t},Oa=E.createContext({params:{page:1},dispatchParams:t=>{}}),_i=({children:t})=>{const e={page:1},[a,r]=E.useReducer(Ei,e);return React.createElement(Oa.Provider,{value:{params:a,dispatchParams:r}},t)},gi=t=>{const{status:e}=t,[a,r]=E.useState(!0),{store_credits_page:{labels:n}}=acfwAdminApp,c=[{title:n.statistics,dataIndex:"label",key:"label"},{title:n.amount,dataIndex:"amount",key:"amount"}];return E.useEffect(()=>{e&&e.length?r(!1):r(!0)},[e,r]),React.createElement(J,{className:"customer-status",title:n.status},React.createElement(le,{loading:a,pagination:!1,dataSource:e,columns:c}))},hi=t=>{const{sources:e}=t,{store_credits_page:{labels:a}}=acfwAdminApp,r=[{title:a.source,dataIndex:"label",key:"label"},{title:a.amount,dataIndex:"amount",key:"amount"}];return React.createElement(J,{className:"customer-sources",title:a.sources},React.createElement(le,{loading:!e||!e.length,pagination:!1,dataSource:e,columns:r}))},Ri=t=>{const{entries:e,total:a,loadEntries:r,loaded:n}=t,{store_credits_page:{labels:c}}=acfwAdminApp,[s,o]=E.useState(1),l=[{title:c.date,dataIndex:"date",key:"date"},{title:c.activity,dataIndex:"activity",key:"activity",render:(d,m)=>[d,m.note?React.createElement(Se,{placement:"top",content:m.note,trigger:"click",overlayClassName:"entry-note-popover"},React.createElement(ma,{style:{paddingLeft:"5px"}})):null]},{title:c.amount,dataIndex:"amount",key:"amount",render:(d,m)=>"".concat(va(m)).concat(d)},{title:c.related,dataIndex:"rel_label",key:"rel_label",render:(d,m)=>m.rel_link?React.createElement("a",{href:m.rel_link},d):d}],i=d=>{o(d),r(d)};return React.createElement(J,{className:"customer-entries",title:c.history},React.createElement(le,{loading:!n,columns:l,dataSource:e,pagination:!1}),0<a&&React.createElement(Fe,{defaultCurrent:s,current:s,hideOnSinglePage:!0,disabled:!e||!e.length,total:a,pageSize:10,showSizeChanger:!1,onChange:i}))},{readStoreCreditsCustomerStatus:yi,readStoreCreditsCustomerEntries:Si}=Ae,Ti=t=>{var C,w;const{customer:e,setCustomer:a,actions:r}=t,[n,c]=E.useState((C=e==null?void 0:e.status)!=null?C:[]),[s,o]=E.useState((w=e==null?void 0:e.sources)!=null?w:[]),[l,i]=E.useState([]),[d,m]=E.useState(0),[p,g]=E.useState(!1),h=(N=1)=>{e!=null&&e.id&&(g(!1),r.readStoreCreditsCustomerEntries({id:e==null?void 0:e.id,page:N,successCB:b=>{i(b.data),m(b.headers["x-total"]),g(!0)}}))},y=()=>{a(null),o([]),i([])};return E.useEffect(()=>{if(!(e!=null&&e.id)){c([]),o([]),i([]),m(0);return}r.readStoreCreditsCustomerStatus({id:e==null?void 0:e.id,successCB:N=>{c(N.data.status),o(N.data.sources)}}),h()},[e]),e?React.createElement(we,{width:1100,visible:!window.lodash.isNull(e),footer:!1,onCancel:()=>y(),onOk:()=>y()},React.createElement("h2",null,"".concat(e.first_name," ").concat(e.last_name," Stats")),React.createElement(Y,{gutter:16},React.createElement(P,{span:12},React.createElement(gi,{status:n})),React.createElement(P,{span:12},React.createElement(hi,{sources:s}))),React.createElement(se,null),React.createElement(Ri,{entries:l,total:d,loadEntries:h,loaded:p})):null},Ci=t=>({actions:x({readStoreCreditsCustomerStatus:yi,readStoreCreditsCustomerEntries:Si},t)}),bi=$(null,Ci)(Ti);function vi({precision:t=null,decimalSeparator:e=".",thousandSeparator:a=","},r){if(window.lodash.isNull(t)){const[,l]=r.toString().split(".");t=l?l.length:0}let n=r.toFixed(t),[c,s]=n.split(".");const o=/(\d+)(\d{3})/;for(;o.test(c);)c=c.replace(o,"$1"+a+"$2");return"".concat(c).concat(e).concat(s)}function wi(t,e=!1){const{currency:a}=acfwAdminApp.store_credits_page,r={precision:a.decimals,decimalSeparator:a.decimal_separator,thousandSeparator:a.thousand_separator},n=vi(r,t);return n===""?n:"".concat(a.symbol).concat(n)}function Ai(t){const{currency:e}=acfwAdminApp.store_credits_page,a=new RegExp("[^-0-9%\\".concat(e.decimal_separator,"]+"),"gi"),r=new RegExp("[^\\".concat(e.decimal_separator,'"]'),"gi");let n=t.replace(a,"");1<n.replace(r,"").length&&(n=n.replace(r,""));const c=parseFloat(n.replace(e.decimal_separator,"."));return t===n&&c>0}function ke(t){const{currency:e}=acfwAdminApp.store_credits_page;return parseFloat(t.replace(e.decimal_separator,"."))}const{adjustCustomerStoreCredits:Oi,setStoreCreditsCustomerBalance:Ni}=Ae,Di=t=>{const{customer:e,setAdjustCustomer:a,actions:r}=t,{adjust_modal:n,currency:c}=acfwAdminApp.store_credits_page,[s,o]=E.useState(!1),[l,i]=E.useState("increase"),[d,m]=E.useState(""),[p,g]=E.useState(""),[h,y]=E.useState(""),[C,w]=E.useState(!1),N=E.useRef(null),b=()=>{w(!C),setTimeout(()=>{var S;return(S=N.current)==null?void 0:S.focus()},400)},T=()=>{if(e){if(!Ai(d)){W.error(n.invalid_price);return}o(!0),r.adjustCustomerStoreCredits({id:e==null?void 0:e.id,type:l,amount:ke(d),note:C&&h?h:"",successCB:S=>{o(!1),W.success(S.data.message),r.setStoreCreditsCustomerBalance({id:e==null?void 0:e.id,balance:S.data.balance,balance_raw:S.data.balance_raw}),a(null),m(""),i("increase"),y("")},failCB:({error:S})=>{o(!1),W.error(S.response.data.message)}})}};return E.useEffect(()=>{if(!e||!d){g("");return}const S=l==="increase"?e.balance_raw+ke(d):e.balance_raw-ke(d);g(wi(Math.max(0,S)))},[e,d,l]),e?React.createElement("div",{className:"adjust-store-credits"},React.createElement("h2",null,n.title),React.createElement("p",{className:"description"},n.description),React.createElement("h3",{className:"current-balance"},n.current_balance.replace("{balance}",e.balance)),React.createElement("div",{className:"adjust-store-credits-form"},React.createElement(O,{value:l,onSelect:S=>i(S)},React.createElement(O.Option,{value:"increase"},n.increase),React.createElement(O.Option,{value:"decrease"},n.decrease)),React.createElement(K,{value:d,onChange:S=>m(S.target.value),addonBefore:c.symbol,allowClear:!0}),React.createElement(Ce.Compact,{direction:"vertical",className:"entry-note-wrap"},React.createElement("a",{onClick:b,style:{marginBottom:"0px"}},n.add_note),C?React.createElement(K.TextArea,{ref:N,rows:2,placeholder:n.note_placeholder,value:h!=null?h:void 0,onChange:S=>y(S.target.value),maxLength:255}):null)),p?React.createElement("h3",{className:"new-balance",dangerouslySetInnerHTML:{__html:n.new_balance.replace("{balance}","<span>".concat(p,"</span>"))}}):null,React.createElement(I,{className:"make-adjustment-btn",type:"primary",size:"large",loading:s,onClick:T},n.make_adjustment)):null},Pi=t=>({actions:x({adjustCustomerStoreCredits:Oi,setStoreCreditsCustomerBalance:Ni},t)}),Ii=$(null,Pi)(Di),ki=t=>{var C,w,N,b,T,S;const{store_credits_page:{rest_url:e,labels:a,nonce:r}}=acfwAdminApp,{customer:n}=t,[c,s]=E.useState(!1),[o,l]=E.useState(!1),[i,d]=W.useMessage(),m=()=>{s(!0)},p=()=>{let v="".concat(acfwAdminApp.admin_url,"admin-ajax.php?action=acfwp_store_credit_reminder_preview_email");return v+=n!=null&&n.first_name&&(n!=null&&n.last_name)?"&args[name]=".concat(n==null?void 0:n.first_name," ").concat(n==null?void 0:n.last_name):"",v+=n!=null&&n.email?"&args[email]=".concat(n==null?void 0:n.email):"",v+=n!=null&&n.id?"&args[user_id]=".concat(n==null?void 0:n.id):"",v+="&_wpnonce=".concat(r==null?void 0:r.preview),v},g=()=>{s(!1)},h=()=>{s(!1),window.open(p())},y=()=>{l(!0);const v=()=>{l(!1),s(!1)};jQuery.ajax({type:"GET",url:e,data:{user_id:n==null?void 0:n.id},success:function(L){var z,f,R,A;!L.status||L.status==="error"?i.open({type:"error",content:"".concat((f=(z=a==null?void 0:a.modal)==null?void 0:z.error)==null?void 0:f.heading,": ").concat(L==null?void 0:L.message)}):i.open({type:"success",content:React.createElement(React.Fragment,null,(A=(R=a==null?void 0:a.modal)==null?void 0:R.success)==null?void 0:A.text,n!=null&&n.email?" <".concat(n==null?void 0:n.email,">."):"")}),v()},error:function(L,z,f){var R,A,k;(R=L==null?void 0:L.responseJSON)!=null&&R.message&&(f=L.responseJSON.message),i.open({type:"error",content:"".concat((k=(A=a==null?void 0:a.modal)==null?void 0:A.error)==null?void 0:k.heading,": ").concat(f)}),v()}})};return a!=null&&a.remind?React.createElement(React.Fragment,null,d,React.createElement(I,{onClick:m},a.remind),React.createElement(we,{title:(C=a==null?void 0:a.modal)==null?void 0:C.heading,className:"acfw-modal send-a-reminder-modal",width:500,open:c,onCancel:g,footer:[React.createElement(I,{key:"preview",className:"action-preview",onClick:h,"data-url":p()},(N=(w=a==null?void 0:a.modal)==null?void 0:w.button)==null?void 0:N.preview),React.createElement(I,{key:"send",className:"action-send",type:"primary",onClick:y,disabled:o},o?"".concat(a==null?void 0:a.loading,"..."):(T=(b=a==null?void 0:a.modal)==null?void 0:b.button)==null?void 0:T.send)]},React.createElement("p",null,(S=a==null?void 0:a.modal)==null?void 0:S.text),React.createElement("p",null,n==null?void 0:n.first_name," ",n==null?void 0:n.last_name,n!=null&&n.email?" <".concat(n==null?void 0:n.email,">"):""))):null};const{readStoreCreditsCustomers:$i,adjustCustomerStoreCredits:xi}=Ae,Li=t=>{var v;const{customers:e,actions:a}=t,{store_credits_page:{labels:r}}=acfwAdminApp,{params:n,dispatchParams:c}=E.useContext(Oa),[s,o]=E.useState(!1),[l,i]=E.useState(0),[d,m]=E.useState(n.search),[p,g]=E.useState(null),[h,y]=E.useState(null),[C,w]=E.useState(null),N=[{title:r.customer_name,dataIndex:"first_name",key:"first_name",sorter:!0,render:(L,z)=>"".concat(z.first_name," ").concat(z.last_name)},{title:r.email,dataIndex:"email",key:"email",sorter:!0},{title:r.balance,dataIndex:"balance",key:"balance",sorter:!0},{title:"",dataIndex:"id",key:"id",render:(L,z)=>React.createElement(React.Fragment,null,React.createElement(I,{onClick:()=>y(z)},r.view_stats),React.createElement(I,{onClick:()=>w(z)},r.adjust),React.createElement(ki,{customer:z}))}],b=L=>{m(L),p&&(He("customer_search"),clearTimeout(p)),g(setTimeout(()=>c({type:"SET_SEARCH",value:L}),1e3))},T=L=>{c({type:"SET_PAGE",value:L})},S=(L,z,f)=>{if(f.columnKey){switch(f.columnKey){case"first_name":c({type:"SET_META_KEY",value:"billing_first_name"}),c({type:"SET_SORT_BY",value:"meta_value"});break;case"balance":c({type:"SET_META_KEY",value:"acfw_store_credit_balance"}),c({type:"SET_SORT_BY",value:"meta_value_num"});break;default:c({type:"SET_SORT_BY",value:f.columnKey});break}c({type:"SET_SORT_ORDER",value:f.order==="descend"?"desc":"asc"})}};return E.useEffect(()=>{o(!0),a.readCustomers({params:n,successCB:L=>{i(L.headers["x-total"]),o(!1)}})},[n]),React.createElement(React.Fragment,null,React.createElement(J,{title:r.customers_list},React.createElement("div",{className:"customer-search"},React.createElement("label",null,r.search_label),React.createElement(K.Search,{allowClear:!0,value:d,onChange:L=>b(L.target.value)})),React.createElement(le,{className:"customers-list-table",loading:s,pagination:!1,dataSource:e,columns:N,onChange:S}),0<l&&React.createElement(Fe,{className:"customers-list-pagination",defaultCurrent:n.page,current:n.page,hideOnSinglePage:!0,disabled:s,total:l,pageSize:(v=n.per_page)!=null?v:10,showSizeChanger:!1,onChange:T})),React.createElement(bi,{customer:h,setCustomer:y}),React.createElement(we,{width:500,visible:!window.lodash.isNull(C),footer:!1,onCancel:()=>w(null),onOk:()=>w(null)},React.createElement(Ii,{customer:C,setAdjustCustomer:w})))},Mi=t=>({customers:t.storeCreditsCustomers}),Bi=t=>({actions:x({readCustomers:$i,adjustCustomerStoreCredits:xi},t)}),Fi=$(Mi,Bi)(Li),Ui=t=>{const{slug:e}=t,{img_path:a}=acfwAdminApp.uncanny_automator;let r,n="";switch(e){case"woocommerce":r="woo-logo.png",n="WooCommerce";break;case"twilio":r="twilio-logo.png",n="Twilio";break;case"google_sheets":r="gsheets-logo.png",n="Google Sheets";break;default:r="Advanced-Coupons-Icon-WC-Marketing.png",n="Advanced Coupon";break}return React.createElement("div",{className:"icon-text ".concat(e)},React.createElement("img",{src:"".concat(a).concat(r)}),React.createElement("span",null,n))},ft=t=>{const{pluginSlug:e,className:a,type:r,size:n,text:c,successMessage:s,nonce:o,afterInstall:l,isActivation:i=!1}=t,[d,m]=E.useState(!1),p=()=>{m(!0),console.log(i?"Activating plugin:":"Installing plugin:",e),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"acfw_install_activate_plugin",plugin_slug:e,nonce:o},dataType:"json"}).done(g=>{var h,y;if(console.log(i?"Activation response:":"Installation response:",g),m(!1),g.success)W.success(s),typeof l=="function"&&l(),setTimeout(()=>{window.location.reload()},1e3);else{const C=((h=g.data)==null?void 0:h.message)||g.data||(i?"Unknown error occurred during activation":"Unknown error occurred during installation");W.error(C),console.error(i?"Activation failed:":"Installation failed:",C),(y=g.data)!=null&&y.debug&&console.log("Debug info:",g.data.debug)}}).fail(g=>{var y,C,w,N,b;console.error("AJAX request failed:",g),m(!1);const h=((C=(y=g.responseJSON)==null?void 0:y.data)==null?void 0:C.message)||((w=g.responseJSON)==null?void 0:w.data)||(i?"Activation failed - please try again":"Installation failed - please try again");W.error(h),(b=(N=g.responseJSON)==null?void 0:N.data)!=null&&b.debug&&console.log("Debug info:",g.responseJSON.data.debug)})};return React.createElement(I,{className:a,type:r,size:n,loading:d,onClick:p},c)};const ji=()=>{const{logo:t,main_content:e,action_text:a,action_url:r,is_plugin_active:n,nonce:c,labels:s,triggers_actions:o,sample_automations:l}=acfwAdminApp.uncanny_automator,[i,d]=E.useState(!!n);return React.createElement("div",{className:"store-credit-automations"},React.createElement("div",{className:"store-credit-automations__inner"},React.createElement("div",{className:"store-credit-automations__header"},React.createElement("img",{src:t}),React.createElement("p",{dangerouslySetInnerHTML:{__html:e}}),i?React.createElement(I,{className:"main-cta-btn",type:"primary",size:"large",href:r,icon:React.createElement(rn,null)},s.add_new_recipe):React.createElement(ft,{pluginSlug:"uncanny-automator",className:"main-cta-btn",type:"primary",size:"large",text:a,nonce:c,successMessage:s.success_message,afterInstall:()=>d(!0)})),React.createElement("div",{className:"triggers-actions"},React.createElement(Y,{gutter:16},o.map((m,p)=>React.createElement(P,{key:p,span:12},React.createElement(J,null,React.createElement("span",{className:"trigger-action__type"},m.type," ",m.is_pro&&React.createElement(ot,{color:"#1393A6"},s.pro)),React.createElement("span",{className:"trigger-action__desc"},m.desc)))))),React.createElement(se,null),React.createElement("div",{className:"sample-automations"},React.createElement("p",null,s.sample_automations),React.createElement(Y,{gutter:16},l.map((m,p)=>React.createElement(P,{key:p,span:8},React.createElement(J,{bordered:!1},React.createElement("h3",null,m.title),React.createElement("p",null,s.requires),React.createElement("ul",null,m.requires.map((g,h)=>React.createElement("li",{key:h},React.createElement(Ui,{slug:g})))))))))))};const Gi=t=>{const{tabKey:e}=t;switch(e){case"dashboard":return React.createElement(fi,null);case"customers":return React.createElement(_i,null,React.createElement(Fi,null));case"automations":return React.createElement(ji,null)}return null},Hi=()=>{var s;const{store_credits_page:{title:t,tabs:e}}=acfwAdminApp,a=ne(),n=(s=new URLSearchParams(_e().search).get("tab"))!=null?s:"dashboard",c=o=>{a.push("".concat(ie(),"admin.php?page=acfw-store-credits&tab=").concat(o))};return React.createElement("div",{className:"store-credits-page"},React.createElement(pe,{title:t,className:"store-credits-header"}),React.createElement(fe,{defaultActiveKey:n,onTabClick:c},e.map(o=>React.createElement(fe.TabPane,{tab:o.label,key:o.key},React.createElement(Gi,{tabKey:o.key})))))};const xt=t=>{const{section:e}=t;switch(e){case"modules_section":return React.createElement(On,null);case"general_section":return React.createElement(ua,null);case"checkout_section":return React.createElement(An,null);case"bogo_deals_section":return React.createElement(wn,null);case"scheduler_section":return React.createElement(vn,null);case"role_restrictions_section":return React.createElement(bn,null);case"url_coupons_section":return React.createElement(Cn,null);case"store_credits_section":return React.createElement(Tn,null);case"advanced_section":return React.createElement(ia,null);case"help_page":return React.createElement(Sn,null);case"license_page":return React.createElement(da,null);case"premium_upgrade":return React.createElement(yn,null);case"loyalty_program_section":case"loyalty_program":return React.createElement(Rn,null);case"advanced_gift_cards":return React.createElement(hn,null)}return null},{setStorePage:qi}=ge,Lt=ie(),Vi=t=>{const{sections:e,currentSection:a,actions:r}=t,{app_pages:n}=acfwAdminApp,c=a||"general_section",s=ne();if(e.length<1)return u.createElement("div",{className:"settings-nav-skeleton"},u.createElement(te,{active:!0,paragraph:!1}),u.createElement(te,{active:!0,paragraph:!1}),u.createElement(te,{active:!0,paragraph:!1}),u.createElement(te,{active:!0,paragraph:!1}),u.createElement(te,{active:!0,paragraph:!1}));const o=d=>{s.push("".concat(Lt,"admin.php?page=").concat(d)),r.setStorePage({data:d})},l=e.filter(({show:d})=>d),i=["acfw-settings","acfw-about","acfw-store-credits"];return u.createElement(Ve,{className:"acfw-settings-nav",defaultSelectedKeys:[c]},l.map(({id:d,title:m})=>u.createElement(Ve.Item,{key:d},u.createElement(Yt,{to:"".concat(Lt,"admin.php?page=acfw-settings&section=").concat(d)},u.createElement(xt,{section:d}),m))),n.filter(({slug:d})=>!i.includes(d)).map(({slug:d,label:m,page:p})=>u.createElement(Ve.Item,{key:p,className:p},u.createElement("button",{className:"buttonlink",onClick:()=>o(d)},u.createElement(xt,{section:p}),m))))},Yi=t=>({sections:t.sections}),zi=t=>({actions:x({setStorePage:qi},t)}),Wi=$(Yi,zi)(Vi),Ki=t=>{const{classname:e,title:a,description:r,button_text:n,image:c,nonce:s,success_message:o}=t.noticeData;return React.createElement("p",{className:"acfw-dyk-notice acfw-funnelkit-upsell-notice ".concat(e)},!!c&&React.createElement("img",{src:c}),React.createElement("span",{className:"title"},a),React.createElement("br",null),React.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:r}}),React.createElement("span",{className:"button-wrap"},React.createElement(ft,{pluginSlug:"funnel-builder",className:"install-funnelkit-btn",type:"primary",size:"middle",text:n,nonce:s,successMessage:o,afterInstall:()=>window.location.href="".concat(acfwAdminApp.admin_url,"admin.php?page=bwf")})))};const Qi=t=>{var ee;const{field:e}=t,{id:a,title:r,desc:n,desc_tip:c,placeholder:s,options:o,data:l,labels:i}=e,[d,m]=E.useState((ee=l==null?void 0:l.plugin)!=null?ee:null),[p,g]=E.useState(o!=null?o:[]),[h,y]=E.useState(l?l==null?void 0:l.deactivate:!0),[C,w]=E.useState(!!(l!=null&&l.plugin)),[N,b]=E.useState(!1),[T,S]=E.useState(0),[v,L]=E.useState({total:0,imported:0,failed:0}),[z,f]=E.useState(0),R=c?u.createElement("div",{className:"setting-tooltip-content"},c):null,A=E.useMemo(()=>{if(!(p!=null&&p.length)||!d)return"";const F=p==null?void 0:p.findIndex(Z=>Z.key.toString()===d);return F<=-1?"":p[F].label},[d,p]),k=F=>{m(F),b(!1)},U=F=>{m(null),g(Z=>{const Oe=Z.findIndex(he=>{var Ne;return((Ne=he.label)==null?void 0:Ne.key.toString())===String(F)});if(Oe>-1){const he=[...Z];return he.splice(Oe,1),he}return Z})},D=()=>{w(!0),M.post("coupons/v1/import-store-credits",{plugin:d,deactivate:h}).then(()=>ce()).catch(F=>{W.error(F.response.data.message),F.response.data.code==="acfw_invalid_plugin_importer"&&U(d),w(!1)})},ce=()=>{M.get("coupons/v1/import-store-credits",{params:{plugin:d}}).then(F=>{const{data:Z}=F.data,Oe=100-Z.pending/Z.total*100;if(S(parseInt(Oe.toString())),Z.pending>0){setTimeout(()=>ce(),2e3);return}const{summary:he,total_store_credits:Ne}=F.data;w(!1),L(he),f(Ne),b(!0),h&&U(d),W.success(F.data.message)}).catch(F=>{W.error(F.response.data.message),w(!1)})};return E.useEffect(()=>{l!=null&&l.plugin&&ce()},[]),u.createElement(u.Fragment,null,u.createElement(Y,{gutter:16,className:"form-control",id:"".concat(a,"_field"),key:a},u.createElement(se,null),u.createElement(P,{span:8},u.createElement("label",{className:"lpfw-setting-field-label tool-field-label"},u.createElement("strong",null,r)),c?u.createElement(Se,{placement:"right",content:R,trigger:"click"},u.createElement(Be,{className:"setting-tooltip-icon"})):null),u.createElement(P,{className:"setting-field-column tool-field-column",span:16},p!=null&&p.length?u.createElement(u.Fragment,null,n?u.createElement("p",{className:"field-desc",dangerouslySetInnerHTML:{__html:n}}):null,u.createElement("div",{className:"import-store-credits-form-wrapper"},u.createElement(O,{style:{width:"100%"},placeholder:s,allowClear:!0,value:d,disabled:C,onSelect:F=>k(F),onClear:()=>k(null)},p.map(({label:F})=>{const Z=F;return u.createElement(O.Option,{key:Z.key.toString(),value:Z.key.toString()},Z.label)})),u.createElement(sa,{className:"deactivate-plugin-checkbox",checked:h,disabled:C,onChange:F=>y(F.target.checked)},i.deactivate_plugin),u.createElement(I,{type:"primary",disabled:!d||N,loading:C,onClick:()=>D()},i.import_btn)),(C||N)&&u.createElement("div",{className:"import-store-credits-progress-wrapper"},u.createElement("p",{dangerouslySetInnerHTML:{__html:i.progress_text.replace("%s","<strong>".concat(A,"</strong>"))}}),u.createElement(cn,{percent:T,status:100>T?"active":void 0,strokeColor:{from:"#108ee9",to:"#87d068"}}),N&&u.createElement(Ee,{column:1,bordered:!0,size:"small"},u.createElement(Ee.Item,{label:i.processed},v.imported.toLocaleString()," ",i.users),u.createElement(Ee.Item,{label:i.failed},v.failed.toLocaleString()," ",i.users),u.createElement(Ee.Item,{label:i.total_imported_store_credits},z.toLocaleString()," ",i.store_credits)))):u.createElement("p",{className:"field-desc"},i.no_plugins_found))))};const Na=E.createContext({showModal:!1,setShowModal:t=>{}}),Ji=t=>{const{data:{title:e,content:a,buttonTxt:r},showModal:n,setShowModal:c}=t,s=ne(),o=ie(),l=()=>{s.push("".concat(o,"admin.php?page=acfw-premium"))};return u.createElement(we,{className:"acfw-upsell-modal",centered:!0,width:600,visible:n,onCancel:()=>c(!1),footer:null},u.createElement(Nn,null),u.createElement("h2",null,e),a.map(i=>u.createElement("p",null,i)),u.createElement(I,{type:"primary",onClick:l},r))},Xi=t=>{const{children:e}=t,[a,r]=E.useState(!1);return u.createElement(Na.Provider,{value:{showModal:a,setShowModal:r}},e,acfwAdminApp!=null&&acfwAdminApp.upsellModal?u.createElement(Ji,{data:acfwAdminApp==null?void 0:acfwAdminApp.upsellModal,showModal:a,setShowModal:r}):null)},Zi=t=>{const{id:e}=t.field,a=E.useContext(Na);return u.createElement(oa,{key:e,checked:!1,defaultChecked:!1,onChange:()=>a.setShowModal(!0)})},{updateSetting:eu,setStoreSettingItem:tu}=oe,{action_notices:Mt}=acfwAdminApp,au=t=>{const{field:e,setShowSpinner:a,validateInput:r,value:n,actions:c,order:s}=t,{id:o,title:l,type:i,placeholder:d,default:m,suffix:p,format:g,min:h,max:y}=e,[C,w]=E.useState(null),N=n!==void 0&&n!==!1?n:m,b=(T,S=!1)=>{const v=()=>{r(T)&&(c.setStoreSettingItem({data:{id:o,value:T}}),c.updateSetting({data:{id:o,value:T,type:i},processingCB:()=>a(!0),successCB:()=>{W.success(u.createElement(u.Fragment,null,u.createElement("strong",null,e.title)," ",Mt.success)),a(!1)},failCB:()=>{W.error(u.createElement(u.Fragment,null,u.createElement("strong",null,e.title)," ",Mt.fail)),a(!1)}}))};S?(C&&(clearTimeout(C),w(null)),w(setTimeout(v,1e3))):v()};if(i==="checkbox"||i==="module")return u.createElement(oa,{key:o,checked:N==="yes",defaultChecked:N==="yes",onChange:T=>b(T?"yes":"")});if(i==="premiummodule")return u.createElement(Zi,{field:e});if(i==="textarea")return u.createElement(K.TextArea,{key:o,rows:3,placeholder:d,defaultValue:N,onChange:T=>b(T.target.value,!0)});if(i==="radio"){const{options:T}=e;return u.createElement(St.Group,{onChange:S=>b(S.target.value),value:N},u.createElement(Ce,{direction:"vertical"},(T==null?void 0:T.length)&&T.map(({key:S,label:v})=>u.createElement(St,{key:S.toString(),value:S.toString()},v))))}if(i==="select"){let{options:T}=e,S=T||[];return S=S.map(v=>v.label.label?v.label:{value:v.key,label:v.label}),u.createElement(O,{key:o,defaultValue:N.toString(),style:{width:"50%"},placeholder:d,options:S,onSelect:v=>b(v)})}if(i==="multiselect"){let{options:T}=e,S=T||[];return S=S.map(v=>v.label.label?v.label:{value:v.key,label:v.label}),u.createElement(O,{mode:"multiple",key:o,defaultValue:N,style:{width:"100%"},placeholder:d,options:S,onChange:v=>{v.length||(v=N),b(v)}})}if(i==="timepicker"){let T=g||"HH:mm:ss",S=N||e.default;return S=S||"00:00:00",S=window.moment(S,T),u.createElement(sn,{key:o,defaultValue:S,format:T,onChange:v=>b(v.format("HH:mm:ss"))})}if(["text","url","permalink","customurl"].indexOf(i)>-1){let T=["permalink","customurl"];return u.createElement(K,{key:o,type:T.indexOf(i)>-1?"text":i,name:o,placeholder:d,defaultValue:N,onChange:S=>b(S.target.value,!0),suffix:p})}if(i==="number")return u.createElement(H,{key:o,name:o,placeholder:d,defaultValue:N,onChange:T=>b(T,!0),min:h!=null?h:void 0,max:y!=null?y:void 0});if(i==="price")return u.createElement(K,{type:"text",className:"wc_input_price",name:o,placeholder:d,defaultValue:N,onChange:T=>b(T.target.value,!0)});if(i==="acfwflicense"){const{licenseContent:T}=e;return u.createElement("div",{className:"acfw-license-field"},T==null?void 0:T.map(S=>u.createElement("p",{dangerouslySetInnerHTML:{__html:S}})))}return i==="subtitle"?u.createElement("div",{className:"form-heading ".concat(s>0?"spacer":"")},u.createElement("h3",null,l)):null},nu=(t,e)=>{const{id:a}=e.field,r=t.settingValues.findIndex(c=>c.id===a);return{value:r>-1?t.settingValues[r].value:""}},ru=t=>({actions:x({updateSetting:eu,setStoreSettingItem:tu},t)}),Bt=$(nu,ru)(au),{Text:Ft}=la,cu=t=>{const{field:e}=t,{id:a,title:r,type:n,desc:c,desc_tip:s}=e,{validation:o}=acfwAdminApp,[l,i]=E.useState(!1),[d,m]=E.useState(!1),p=s?u.createElement("div",{className:"setting-tooltip-content"},s):null;if(n==="title")return u.createElement("div",{className:"form-heading"},u.createElement("h1",null,r),u.createElement("p",null,c));if(n==="notice"&&(e!=null&&e.noticeData)){const{classname:C,title:w,description:N,button_text:b,button_link:T,button_class:S,image:v}=e==null?void 0:e.noticeData;return u.createElement("p",{className:"acfw-dyk-notice ".concat(C)},!!v&&u.createElement("img",{src:v}),u.createElement("span",{className:"title"},w),u.createElement("br",null),u.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:N}}),b&&T?u.createElement("a",{className:"acfw-button ".concat(S),href:T,rel:"noreferrer noopener",target:"_blank"},b):null)}if(n==="funnelkit_upsell"&&(e!=null&&e.noticeData))return u.createElement(Ki,{noticeData:e==null?void 0:e.noticeData});if(a==="acfw_store_credits_importer")return u.createElement(Qi,{field:e});if(n==="sectionend")return null;const g=C=>C&&n==="url"&&!Ca(C+"")?(m(!0),!1):(m(!1),!0),h=()=>u.createElement(u.Fragment,null,u.createElement(P,{span:8,className:"setting-title-column"},u.createElement("label",null,u.createElement("strong",null,r),n==="premiummodule"?u.createElement(u.Fragment,null,u.createElement("br",null),u.createElement(ot,{className:"premium-tag"},"Premium")):null),s?u.createElement(Se,{placement:"right",content:p,trigger:"click"},u.createElement(Be,{className:"setting-tooltip-icon"})):null),u.createElement(P,{className:"setting-field-column",span:16},u.createElement(Bt,{field:e,setShowSpinner:i,validateInput:g}),l?u.createElement(be,{indicator:u.createElement(Tt,{style:{fontSize:24},spin:!0})}):null,u.createElement("div",{className:"invalid-input".concat(d?" show":"")},d?u.createElement(Ft,{type:"danger"},o[n]?o[n]:o.default):null),c?u.createElement("p",{dangerouslySetInnerHTML:{__html:c}}):null)),y=()=>u.createElement(u.Fragment,null,u.createElement(P,{className:"setting-field-column"},u.createElement(Bt,{field:e,setShowSpinner:i,validateInput:g}),l?u.createElement(be,{indicator:u.createElement(Tt,{style:{fontSize:24},spin:!0})}):null,u.createElement("div",{className:"invalid-input".concat(d?" show":"")},d?u.createElement(Ft,{type:"danger"},o[n]?o[n]:o.default):null),c?u.createElement("p",{dangerouslySetInnerHTML:{__html:c}}):null));return u.createElement(Y,{gutter:16,className:"form-control",id:"".concat(a,"_field"),key:a},u.createElement(se,null),n==="subtitle"?u.createElement(y,null):u.createElement(h,null))};const Et=t=>{var R,A;const{className:e,showSubtitle:a,showTag:r}=t,{free_guide:{show:n,tag:c,title:s,subtitle:o,content:l,image:i,button:d,list:m,field_values:p,placeholders:g,form_nonce:h,missing_form_fields:y,failed_form_error:C}}=acfwAdminApp,[w,N]=E.useState((R=p.name)!=null?R:""),[b,T]=E.useState((A=p.email)!=null?A:""),[S,v]=E.useState(!1),[L,z]=E.useState(n),f=async k=>{if(k.preventDefault(),!w||!b){W.error(y);return}v(!0);const U=new Date,D=new FormData;D.append("action","acfwf_get_free_training_guide"),D.append("name",w),D.append("email",b),D.append("title",document.title),D.append("url",window.location.href),D.append("referrer",document.referrer),D.append("timestamp",U.getTime().toString()),D.append("nonce",h);try{const ee=await(await fetch(ajaxurl,{method:"post",body:D})).json();ee.status==="success"?(W.success(ee.message),acfwAdminApp.free_guide.show=!1,z(!1)):W.error(ee.error_msg)}catch(ce){W.error(C)}v(!1)};return L?u.createElement("div",{className:"coupons-free-guide ".concat(e)},u.createElement("div",{className:"inner"},u.createElement("form",{onSubmit:f},r?u.createElement(ot,{color:"#1693A7"},c):null,u.createElement("h2",null,s),u.createElement("img",{src:i,alt:s}),a?u.createElement("h3",null,o):null,u.createElement("p",{dangerouslySetInnerHTML:{__html:l}}),u.createElement("ul",null,m.map((k,U)=>u.createElement("li",{key:U},u.createElement(Dn,null),k))),u.createElement("p",{className:"form-fields"},u.createElement(K,{value:w,onChange:k=>N(k.target.value),placeholder:g.name}),u.createElement(K,{value:b,type:"email",onChange:k=>T(k.target.value),placeholder:g.email})),u.createElement("p",{className:"form-actions"},u.createElement(I,{type:"link",htmlType:"submit",className:"cta",size:"large",loading:S},d.text))))):null};Et.defaultProps={className:"",showSubtitle:!1,showTag:!0};const su=t=>{const{sections:e,settingValues:a,currentSection:r}=t,n=r?e.findIndex(o=>o.id===r):0,c=e.length?e[n].id:"",s=e.length?e[n].fields:[];return s.length<1||a.length<1?u.createElement(u.Fragment,null,u.createElement(te,{loading:!0,active:!0,paragraph:{rows:1}}),u.createElement(se,null),u.createElement(te,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),u.createElement(se,null),u.createElement(te,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),u.createElement(se,null),u.createElement(te,{loading:!0,active:!0,paragraph:{rows:2},title:!1})):u.createElement(Xi,null,u.createElement("div",{className:"settings-form ".concat(c,"-form")},s.map(o=>u.createElement(cu,{key:o.id,field:o})),!r||r==="general_section"?u.createElement(u.Fragment,null,u.createElement(se,null),u.createElement(Et,null)):null))},ou=t=>({sections:t.sections,settingValues:t.settingValues}),lu=t=>({actions:x({},t)}),iu=$(ou,lu)(su),{readSections:uu,readSection:du}=je,mu=t=>{const{sections:e,actions:a}=t,n=new URLSearchParams(_e().search).get("section");return E.useEffect(()=>{e.length>0||a.readSections({id:n})},[a]),E.useEffect(()=>{if(e.length<1)return;const c=n?e.findIndex(s=>s.id===n):0;e[c].fields.length<1&&a.readSection({id:n})},[e,a,n]),u.createElement(u.Fragment,null,u.createElement(pe,{title:acfwAdminApp.title,description:acfwAdminApp.desc,className:"settings-header"}),u.createElement(Y,{className:"settings-content"},u.createElement(P,{span:6},u.createElement(Wi,{currentSection:n})),u.createElement(P,{span:18,className:"content-column"},u.createElement(iu,{currentSection:n}))))},pu=t=>({sections:t.sections}),fu=t=>({actions:x({readSections:uu,readSection:du},t)}),Eu=$(pu,fu)(mu),{LicensePremium:_u}=acfwpElements,gu=parseInt(acfwpElements.is_acfwp_active),hu=()=>{const{license_page:{title:t,desc:e,feature_comparison:a,license_status:r,content:n,specs:c}}=acfwAdminApp;return gu?u.createElement(_u,null):u.createElement("div",{className:"acfw-license-box"},u.createElement("div",{className:"overview"},u.createElement("h1",null,t),u.createElement("p",null,e),u.createElement("a",{className:"action-button feature-comparison",href:a.link,target:"_blank",rel:"noopener noreferrer"},a.text)),u.createElement("div",{className:"license-info"},u.createElement("div",{className:"heading"},u.createElement("div",{className:"left"},u.createElement("span",null,r.label)),u.createElement("div",{className:"right"},u.createElement("a",{className:"action-button upgrade-premium",href:r.link,target:"_blank",rel:"noopener noreferrer"},r.text))),u.createElement("div",{className:"content"},u.createElement("h2",null,n.title),u.createElement("p",null,n.text),u.createElement("table",{className:"license-specs"},u.createElement("thead",null,u.createElement("tr",null,c.map(s=>u.createElement("th",{key:s.label},s.label)))),u.createElement("tbody",null,u.createElement("tr",null,c.map(s=>u.createElement("td",{key:s.value},s.value))))))))};const{setStorePage:Ru}=ge,yu=t=>{var i;const{actions:e}=t,a=ne(),n=(i=new URLSearchParams(_e().search).get("tab"))!=null?i:"ACFW",[c,s]=u.useState(n),{license_tabs:o}=acfwAdminApp,l=d=>{a.push("".concat(ie(),"admin.php?page=acfw-license&tab=").concat(d)),s(d),e.setStorePage({data:"acfw-license/".concat(d)})};return E.useEffect(()=>{n!=="ACFW"&&e.setStorePage({data:"acfw-license/".concat(n)})},[]),u.createElement("div",{className:"license-page"},u.createElement(pe,{className:"license-header",hideUpgrade:!0}),u.createElement(fe,{defaultActiveKey:n,items:o,onTabClick:l}),c==="ACFW"&&u.createElement(hu,null))},Su=t=>({actions:x({setStorePage:Ru},t)}),Tu=$(null,Su)(yu);const Cu=()=>{const{about_page:{title:t,desc:e,main_card:a,cards:r,status:n,status_texts:c,button_texts:s}}=acfwAdminApp;return u.createElement("div",{className:"about-page"},u.createElement(pe,{title:t,description:e,className:"about-header",hideUpgrade:!0}),u.createElement(Y,{className:"about-rymera-team"},u.createElement(P,{className:"content",span:12},u.createElement("div",{className:"inner"},u.createElement("h2",null,a.title),a.content.map((o,l)=>u.createElement("p",{key:l},o)))),u.createElement(P,{className:"photo",span:12},u.createElement("img",{src:a.image,alt:"Rymera Team"}))),u.createElement(Y,{className:"plugin-cards",gutter:[16,16]},r.map((o,l)=>u.createElement(P,{key:l,span:12},u.createElement(J,{className:"plugin-card",bordered:!0,actions:[u.createElement(u.Fragment,null,u.createElement("strong",null,n,": "),u.createElement("span",null,c[o.action.status])),o.action.link?(o.action.status==="not_installed"||o.action.status==="installed")&&!o.action.external&&o.action.plugin_slug?u.createElement(ft,{pluginSlug:o.action.plugin_slug,type:"primary",size:"middle",text:s[o.action.status],nonce:acfwAdminApp.nonces.install_plugin,successMessage:"".concat(o.title," has been ").concat(o.action.status==="installed"?"activated":"installed"," successfully!"),isActivation:o.action.status==="installed"}):u.createElement(I,{type:"primary",href:o.action.link,target:o.action.external?"_blank":void 0},s[o.action.status]):null]},u.createElement(J.Meta,{avatar:u.createElement(on,{src:o.icon}),title:o.title,description:o.content}))))))};const{Text:de,Link:Ut}=la,bu=()=>{const{premium_page:{image:t,title:e,desc:a,header:r,rows:n,action:c,link:s},logo_alt:o}=acfwAdminApp;return React.createElement("div",{id:"acfw-premium",className:"acfwf-upgrade-settings-block"},React.createElement("p",null,React.createElement("a",{href:s,target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"logo",src:t,alt:o}))),React.createElement("h2",{dangerouslySetInnerHTML:{__html:e}}),React.createElement("p",null,React.createElement(Ut,{className:"acfw-upgrade-button",href:c.btn_link,target:"_blank"},c.btn_text)),React.createElement("p",null,React.createElement(de,null,a)),React.createElement("div",{className:"responsive-table"},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"feature"},React.createElement(de,null,r.feature)),React.createElement("th",{className:"free"},React.createElement(de,null,r.free)),React.createElement("th",{className:"premium"},React.createElement(de,null,r.premium)))),React.createElement("tbody",null,n.map(({feature:l,free:i,premium:d},m)=>React.createElement("tr",{key:m},React.createElement("td",{className:"feature"},React.createElement(de,null,l)),React.createElement("td",{className:"free dashicons-before dashicons-no"},React.createElement(de,null,i)),React.createElement("td",{className:"premium dashicons-before dashicons-yes-alt"},React.createElement(de,null,d))))))),React.createElement("div",{className:"cta-block"},React.createElement("h3",null,React.createElement(de,null,c.title)),React.createElement("p",null,React.createElement(Ut,{className:"acfw-upgrade-button",href:c.btn_link,target:"_blank"},c.btn_text))))};const vu=()=>{const{help_page:{title:t,desc:e,cards:a}}=acfwAdminApp,{HelpPremium:r}=acfwpElements;return u.createElement("div",{className:"help-page"},u.createElement(pe,{title:t,description:e,className:"help-header"}),u.createElement(Y,{gutter:10},a.map((n,c)=>u.createElement(P,{key:c,className:"acfw-border-box",span:12},u.createElement(J,null,u.createElement("h2",null,n.title),u.createElement("p",null,n.content),u.createElement(I,{type:"primary",href:n.action.link,size:"large",target:"_blank"},n.action.text))))),u.createElement(Y,{gutter:10},u.createElement(P,{className:"acfw-border-box",span:24},u.createElement(Et,{className:"help-guide",showSubtitle:!0,showTag:!1}))),r?u.createElement(r,null):null)};const wu=t=>{const{step_count:e,title:a,description:r,is_active:n,action_text:c,link:s,is_external:o}=t;return React.createElement("div",{className:"plugin-step ".concat(n?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,e)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},r),React.createElement("p",{className:"actions"},React.createElement(I,{href:s,target:o?"_blank":""},c))))},Au=()=>{const{loyalty_program:{title:t,description:e,plugin_image:a,features_list:r,steps_list:n}}=acfwAdminApp;return React.createElement("div",{className:"loyalty-program-page-upsell"},React.createElement(pe,{title:t,className:"loyalty-program-header",description:e,hideUpgrade:!0}),React.createElement(Y,{className:"features-list",gutter:60},React.createElement(P,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(P,{span:12,className:"content"},React.createElement("ul",null,r.map((c,s)=>React.createElement("li",{key:s},c))))),React.createElement("div",{className:"action-steps"},n.map((c,s)=>React.createElement(wu,{key:s,...c}))))};const Ou=t=>{const{step_count:e,title:a,description:r,is_active:n,action_text:c,link:s,is_external:o}=t;return React.createElement("div",{className:"plugin-step ".concat(n?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,e)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},r),React.createElement("p",{className:"actions"},React.createElement(I,{href:s,target:o?"_blank":""},c))))},Nu=()=>{const{advanced_gift_cards:{title:t,description:e,plugin_image:a,features_list:r,steps_list:n}}=acfwAdminApp;return React.createElement("div",{className:"advanced-gift-cards-page-upsell"},React.createElement("div",{className:"page-header advanced-gift-cards-header"},React.createElement(pt,{hideUpgrade:!0}),React.createElement("h1",null,t),React.createElement("p",null,e)),React.createElement(Y,{className:"features-list",gutter:60},React.createElement(P,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(P,{span:12,className:"content"},React.createElement("ul",null,r.map((c,s)=>React.createElement("li",{key:s},c))))),React.createElement("div",{className:"action-steps"},n.map((c,s)=>React.createElement(Ou,{key:s,...c}))))},_t=t=>{const{className:e}=t,a={rows:2,width:100};return React.createElement("div",{className:"coupon-templates-list ".concat(e)},[...Array(9)].map((r,n)=>React.createElement("div",{key:n,className:"coupon-template-card"},React.createElement("div",{className:"template-image"}),React.createElement("div",{className:"template-content"},React.createElement(te,{active:!0,paragraph:a})))))},{togglePremiumModal:Du,deleteRecentCouponTemplate:Pu,unsetRecentCouponTemplate:Iu}=Q,ku=t=>{const{labels:e}=acfwAdminApp.coupon_templates_page,a=ne(),{template:r,isReview:n,showClose:c,actions:s}=t,o=()=>{if(r.license_type==="premium"&&!parseInt(acfwpElements.is_acfwp_active)){s.togglePremiumModal({show:!0});return}const i=n?"id=".concat(r.id,"&is_review=true"):"id=".concat(r.id);a.push("".concat(ie(),"admin.php?page=acfw-coupon-templates&").concat(i))},l=()=>{s.deleteRecentCouponTemplate({id:r.id}),s.unsetRecentCouponTemplate({id:r.id})};return React.createElement("div",{className:"coupon-template-card"},React.createElement("div",{className:"template-image",style:{backgroundColor:r.image_bg_color}},c&&React.createElement("span",{className:"close-icon",onClick:l},React.createElement(ca,null)),React.createElement("span",{className:"image-svg",onClick:o,dangerouslySetInnerHTML:{__html:r.image_svg}}),r.license_type==="premium"&&React.createElement("span",{className:"premium-badge"},e.premium)),React.createElement("div",{className:"template-content"},React.createElement("h3",{onClick:o},r.title),React.createElement("p",null,r.description)))},$u=t=>({actions:x({togglePremiumModal:Du,deleteRecentCouponTemplate:Pu,unsetRecentCouponTemplate:Iu},t)}),xu=$(null,$u)(ku),gt=t=>{const{templates:e,isReview:a,showClose:r}=t,{labels:n}=acfwAdminApp.coupon_templates_page,[c,s]=E.useState(1),o=9,l=E.useMemo(()=>e.slice((c-1)*o,c*o),[e,c]);return E.useEffect(()=>{s(1)},[e]),e.length?React.createElement(React.Fragment,null,React.createElement("div",{className:"queried-templates-list coupon-templates-list"},l.map(i=>React.createElement(xu,{key:i.id,template:i,isReview:a,showClose:r}))),React.createElement("div",{className:"templates-list-pagination"},React.createElement(Fe,{defaultCurrent:1,pageSize:o,current:c,total:e.length,onChange:i=>s(i),hideOnSinglePage:!0,showSizeChanger:!1}))):React.createElement("div",{className:"no-templates-message"},n.no_templates_found)},{Option:jt}=O,Lu=t=>{const{sortBy:e,sortOrder:a,onSortByChange:r,onSortOrderChange:n}=t,{labels:c}=acfwAdminApp.coupon_templates_page,s=i=>{r(i)},o=()=>{n(a==="asc"?"desc":"asc")},l=i=>{switch(i){case"title":return c.sort_by_title;case"date":return c.sort_by_date;default:return i}};return React.createElement("div",{className:"coupon-templates-sort-control"},React.createElement(Y,{gutter:8,align:"middle"},React.createElement(P,null,React.createElement("span",{className:"sort-label"},c.sort_by,":")),React.createElement(P,null,React.createElement(O,{value:e,onChange:s,style:{width:120}},React.createElement(jt,{value:"title"},l("title")),React.createElement(jt,{value:"date"},l("date")))),React.createElement(P,null,React.createElement("div",{className:"sort-order-toggle ".concat(a),onClick:o,title:a==="asc"?c.sort_ascending:c.sort_descending},a==="asc"?React.createElement(Pn,null):React.createElement(In,null)))))},{Option:ze}=O,ye=t=>{const{onSearchChange:e,onLicenseFilterChange:a,onSortByChange:r,onSortOrderChange:n,searchTerm:c,licenseFilter:s,sortBy:o,sortOrder:l}=t,{labels:i}=acfwAdminApp.coupon_templates_page,[d,m]=E.useState(c),p=E.useRef(e);E.useEffect(()=>{p.current=e},[e]),E.useEffect(()=>{const y=setTimeout(()=>{p.current(d)},300);return()=>clearTimeout(y)},[d]);const g=y=>{m(y.target.value)},h=y=>{a(y)};return React.createElement("div",{className:"coupon-templates-search-filter"},React.createElement(Y,{gutter:[16,16],align:"middle",className:"search-filter-row"},React.createElement(P,{xs:24,sm:24,md:8,lg:12},React.createElement(K,{placeholder:i.search_templates_placeholder,prefix:React.createElement(ln,null),value:d,onChange:g,allowClear:!0,size:"small"})),React.createElement(P,{xs:24,sm:12,md:7,lg:5},React.createElement(O,{value:s,onChange:h,style:{width:"100%"},size:"middle"},React.createElement(ze,{value:"all"},i.all_templates),React.createElement(ze,{value:"free"},i.free_templates),React.createElement(ze,{value:"premium"},i.premium_templates))),React.createElement(P,{xs:24,sm:12,md:9,lg:7},React.createElement(Lu,{sortBy:o,sortOrder:l,onSortByChange:r,onSortOrderChange:n}))))},{readRecentCouponTemplates:Mu,setSearchFilters:Bu,setSortOptions:Fu}=Q,Uu=t=>{const{templates:e,searchFilters:a,sortOptions:r,actions:n}=t,[c,s]=E.useState(!1),o=E.useMemo(()=>{let p=[...e];if(a.searchTerm.trim()){const g=a.searchTerm.toLowerCase().trim();p=p.filter(h=>h.title.toLowerCase().includes(g)||h.description.toLowerCase().includes(g))}return a.licenseFilter!=="all"&&(p=p.filter(g=>g.license_type===a.licenseFilter)),p.sort((g,h)=>{let y=0;switch(r.sortBy){case"title":y=g.title.localeCompare(h.title);break;case"date":const C=g.date?new Date(g.date).getTime():0,w=h.date?new Date(h.date).getTime():0;y=C-w;break;default:y=0}return r.sortOrder==="desc"?-y:y}),p},[e,a,r]),l=E.useCallback(p=>{n.setSearchFilters({searchTerm:p,licenseFilter:a.licenseFilter})},[n,a.licenseFilter]),i=E.useCallback(p=>{n.setSearchFilters({searchTerm:a.searchTerm,licenseFilter:p})},[n,a.searchTerm]),d=E.useCallback(p=>{n.setSortOptions({sortBy:p,sortOrder:r.sortOrder})},[n,r.sortOrder]),m=E.useCallback(p=>{n.setSortOptions({sortBy:r.sortBy,sortOrder:p})},[n,r.sortBy]);return E.useEffect(()=>{s(!0),n.readRecentCouponTemplates({successCB:()=>s(!1)})},[n]),c?React.createElement(React.Fragment,null,React.createElement(ye,{onSearchChange:l,onLicenseFilterChange:i,onSortByChange:d,onSortOrderChange:m,searchTerm:a.searchTerm,licenseFilter:a.licenseFilter,sortBy:r.sortBy,sortOrder:r.sortOrder}),React.createElement(_t,{className:"coupon-templates-list"})):React.createElement(React.Fragment,null,React.createElement(ye,{onSearchChange:l,onLicenseFilterChange:i,onSortByChange:d,onSortOrderChange:m,searchTerm:a.searchTerm,licenseFilter:a.licenseFilter,sortBy:r.sortBy,sortOrder:r.sortOrder}),React.createElement(gt,{templates:o,showClose:!0}))},ju=t=>{var e,a,r,n,c,s;return{templates:(a=(e=t.couponTemplates)==null?void 0:e.recent)!=null?a:[],searchFilters:(n=(r=t.couponTemplates)==null?void 0:r.searchFilters)!=null?n:{searchTerm:"",licenseFilter:"all"},sortOptions:(s=(c=t.couponTemplates)==null?void 0:c.sortOptions)!=null?s:{sortBy:"title",sortOrder:"asc"}}},Gu=t=>({actions:x({readRecentCouponTemplates:Mu,setSearchFilters:Bu,setSortOptions:Fu},t)}),Hu=$(ju,Gu)(Uu),{readCouponTemplates:qu,setCouponTemplatesLoading:Vu,setSearchFilters:Yu,setSortOptions:zu}=Q,Wu=t=>{const{templates:e,loading:a,searchFilters:r,sortOptions:n,actions:c}=t,s=E.useMemo(()=>{let m=[...e];if(r.searchTerm.trim()){const p=r.searchTerm.toLowerCase().trim();m=m.filter(g=>g.title.toLowerCase().includes(p)||g.description.toLowerCase().includes(p))}return r.licenseFilter!=="all"&&(m=m.filter(p=>p.license_type===r.licenseFilter)),m.sort((p,g)=>{let h=0;switch(n.sortBy){case"title":h=p.title.localeCompare(g.title);break;case"date":const y=p.date?new Date(p.date).getTime():0,C=g.date?new Date(g.date).getTime():0;h=y-C;break;default:h=0}return n.sortOrder==="desc"?-h:h}),m},[e,r,n]),o=E.useCallback(m=>{c.setSearchFilters({searchTerm:m,licenseFilter:r.licenseFilter})},[c,r.licenseFilter]),l=E.useCallback(m=>{c.setSearchFilters({searchTerm:r.searchTerm,licenseFilter:m})},[c,r.searchTerm]),i=E.useCallback(m=>{c.setSortOptions({sortBy:m,sortOrder:n.sortOrder})},[c,n.sortOrder]),d=E.useCallback(m=>{c.setSortOptions({sortBy:n.sortBy,sortOrder:m})},[c,n.sortBy]);return E.useEffect(()=>{c.setCouponTemplatesLoading({loading:!0}),c.readCouponTemplates({successCB:()=>c.setCouponTemplatesLoading({loading:!1})})},[c]),a?React.createElement(React.Fragment,null,React.createElement(ye,{onSearchChange:o,onLicenseFilterChange:l,onSortByChange:i,onSortOrderChange:d,searchTerm:r.searchTerm,licenseFilter:r.licenseFilter,sortBy:n.sortBy,sortOrder:n.sortOrder}),React.createElement(_t,{className:"queried-templates-list"})):React.createElement(React.Fragment,null,React.createElement(ye,{onSearchChange:o,onLicenseFilterChange:l,onSortByChange:i,onSortOrderChange:d,searchTerm:r.searchTerm,licenseFilter:r.licenseFilter,sortBy:n.sortBy,sortOrder:n.sortOrder}),React.createElement(gt,{templates:s}))},Ku=t=>{var e,a,r,n,c,s,o,l;return{templates:(a=(e=t.couponTemplates)==null?void 0:e.templates)!=null?a:[],loading:(n=(r=t.couponTemplates)==null?void 0:r.loading)!=null?n:!1,searchFilters:(s=(c=t.couponTemplates)==null?void 0:c.searchFilters)!=null?s:{searchTerm:"",licenseFilter:"all"},sortOptions:(l=(o=t.couponTemplates)==null?void 0:o.sortOptions)!=null?l:{sortBy:"title",sortOrder:"asc"}}},Qu=t=>({actions:x({readCouponTemplates:qu,setCouponTemplatesLoading:Vu,setSearchFilters:Yu,setSortOptions:zu},t)}),Ju=$(Ku,Qu)(Wu),{readCouponTemplates:Xu,setCouponTemplatesLoading:Zu,setSearchFilters:ed,setSortOptions:td}=Q,ad=t=>{const{templates:e,loading:a,searchFilters:r,sortOptions:n,actions:c}=t,s=E.useMemo(()=>{let m=[...e];if(r.searchTerm.trim()){const p=r.searchTerm.toLowerCase().trim();m=m.filter(g=>g.title.toLowerCase().includes(p)||g.description.toLowerCase().includes(p))}return r.licenseFilter!=="all"&&(m=m.filter(p=>p.license_type===r.licenseFilter)),m.sort((p,g)=>{let h=0;switch(n.sortBy){case"title":h=p.title.localeCompare(g.title);break;case"date":const y=p.date?new Date(p.date).getTime():0,C=g.date?new Date(g.date).getTime():0;h=y-C;break;default:h=0}return n.sortOrder==="desc"?-h:h}),m},[e,r,n]),o=E.useCallback(m=>{c.setSearchFilters({searchTerm:m,licenseFilter:r.licenseFilter})},[c,r.licenseFilter]),l=E.useCallback(m=>{c.setSearchFilters({searchTerm:r.searchTerm,licenseFilter:m})},[c,r.searchTerm]),i=E.useCallback(m=>{c.setSortOptions({sortBy:m,sortOrder:n.sortOrder})},[c,n.sortOrder]),d=E.useCallback(m=>{c.setSortOptions({sortBy:n.sortBy,sortOrder:m})},[c,n.sortBy]);return E.useEffect(()=>{c.setCouponTemplatesLoading({loading:!0}),c.readCouponTemplates({isReview:!0,successCB:()=>c.setCouponTemplatesLoading({loading:!1})})},[c]),a?React.createElement(React.Fragment,null,React.createElement(ye,{onSearchChange:o,onLicenseFilterChange:l,onSortByChange:i,onSortOrderChange:d,searchTerm:r.searchTerm,licenseFilter:r.licenseFilter,sortBy:n.sortBy,sortOrder:n.sortOrder}),React.createElement(_t,{className:"queried-templates-list"})):React.createElement(React.Fragment,null,React.createElement(ye,{onSearchChange:o,onLicenseFilterChange:l,onSortByChange:i,onSortOrderChange:d,searchTerm:r.searchTerm,licenseFilter:r.licenseFilter,sortBy:n.sortBy,sortOrder:n.sortOrder}),React.createElement(gt,{templates:s,isReview:!0}))},nd=t=>{var e,a,r,n,c,s,o,l;return{templates:(a=(e=t.couponTemplates)==null?void 0:e.review)!=null?a:[],loading:(n=(r=t.couponTemplates)==null?void 0:r.loading)!=null?n:!1,searchFilters:(s=(c=t.couponTemplates)==null?void 0:c.searchFilters)!=null?s:{searchTerm:"",licenseFilter:"all"},sortOptions:(l=(o=t.couponTemplates)==null?void 0:o.sortOptions)!=null?l:{sortBy:"title",sortOrder:"asc"}}},rd=t=>({actions:x({readCouponTemplates:Xu,setCouponTemplatesLoading:Zu,setSearchFilters:ed,setSortOptions:td},t)}),cd=$(nd,rd)(ad),{readCouponTemplateCategories:sd,readCouponTemplateCategory:od,setCouponTemplatesLoading:Te,readCouponTemplates:ld}=Q,id=t=>{const{categories:e,actions:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page,[n,c]=E.useState(!1),[s,o]=E.useState("all"),l=i=>{if(i!==s){if(o(i),i==="all"){a.readCouponTemplates({processingCB:()=>Te({loading:!0}),successCB:()=>Te({loading:!1})});return}a.readCouponTemplateCategory({slug:i,processingCB:()=>Te({loading:!0}),successCB:()=>Te({loading:!1})})}};return E.useEffect(()=>{c(!0),a.readCouponTemplateCategories({successCB:()=>c(!1)})},[]),React.createElement("div",{className:"coupon-templates-sidebar"},React.createElement("div",{className:"sidebar-inner"},React.createElement("h3",null,r.categories),React.createElement("ul",{className:"categories-list"},n?React.createElement(be,null):React.createElement(React.Fragment,null,React.createElement("li",{className:s==="all"?"current":"",onClick:()=>l("all")},React.createElement("span",null,r.all_templates)),e.map(i=>React.createElement("li",{className:s===i.slug?"current":"",key:i.slug,onClick:()=>l(i.slug)},React.createElement("span",null,i.name)))))))},ud=t=>{var e,a;return{categories:(a=(e=t.couponTemplates)==null?void 0:e.categories)!=null?a:[]}},dd=t=>({actions:x({readCouponTemplateCategories:sd,readCouponTemplateCategory:od,setCouponTemplatesLoading:Te,readCouponTemplates:ld},t)}),md=$(ud,dd)(id),pd=t=>{const{defaultValue:e,onChange:a}=t,[r,n]=E.useState(e!=null?e:""),c=o=>{n(o.target.value),a(o.target.value)},s=()=>{const o="ABCDEFGHJKMNPQRSTUVWXYZ123456789";let i="";for(let d=0;d<10;d++)i+=o.charAt(Math.floor(Math.random()*o.length));n(i),a(i)};return React.createElement(Ce,{direction:"horizontal",size:"middle"},React.createElement(Ce.Compact,null,React.createElement(K,{allowClear:!0,value:r,onChange:c})),React.createElement(Ce.Compact,null,React.createElement(I,{onClick:()=>s()},"Generate")))},fd=t=>{const{defaultValue:e,editable:a,fixtures:r,onChange:n}=t;return React.createElement(H,{placeholder:r==null?void 0:r.placeholder,defaultValue:e,readOnly:!a,min:r==null?void 0:r.min,max:r==null?void 0:r.max,step:r==null?void 0:r.step,onChange:n})},Ed=t=>{const{defaultValue:e,editable:a,fixtures:r,onChange:n}=t;return React.createElement("div",null,React.createElement(K,{placeholder:r==null?void 0:r.placeholder,defaultValue:e,readOnly:!a,onChange:c=>n(c.target.value)}))},_d=t=>{const{defaultValue:e,editable:a,fixtures:r,onChange:n}=t,{currency:c}=acfwAdminApp.store_credits_page;return React.createElement("div",null,React.createElement(H,{placeholder:r==null?void 0:r.placeholder,defaultValue:e,readOnly:!a,decimalSeparator:c.decimal_separator,parser:s=>ke(s!=null?s:"").toString(),onChange:n}))},gd=t=>{var s;const{defaultValue:e,editable:a,fixtures:r,onChange:n}=t,c=Object.keys((s=r==null?void 0:r.options)!=null?s:{}).map(o=>({value:o,label:r!=null&&r.options?r==null?void 0:r.options[o]:""}));return React.createElement("div",null,React.createElement(O,{placeholder:r==null?void 0:r.placeholder,disabled:!a,defaultValue:e,options:c,onChange:n}))},hd=t=>{const{defaultValue:e,editable:a,fixtures:r,onChange:n}=t;return React.createElement("div",null,React.createElement(K.TextArea,{placeholder:r==null?void 0:r.placeholder,defaultValue:e,readOnly:!a,onChange:c=>n(c.target.value)}))},Rd=t=>{var i,d,m,p;const{defaultValue:e,editable:a,fixtures:r,onChange:n}=t,[c,s]=E.useState(e==="yes"),o=(d=(i=r==null?void 0:r.options)==null?void 0:i.enabled)!=null?d:"yes",l=(p=(m=r==null?void 0:r.options)==null?void 0:m.disabled)!=null?p:"";return E.useEffect(()=>{e!==o&&e!==l&&(s(!1),n(l))},[]),React.createElement("div",null,React.createElement(sa,{checked:c,disabled:!a,onChange:g=>{s(g.target.checked),n(g.target.checked?o:l)}}),React.createElement("span",null,r.description))},yd=()=>{var c;const[t,e]=E.useState(!1),[a,r]=E.useState((c=acfwAdminApp.user_role_options)!=null?c:[]),n=async()=>{try{e(!0);const s=await M.get("coupons/v1/templates/options",{params:{type:"user_role"},cancelToken:re("fetch_user_roles")});s&&s.data&&(acfwAdminApp.user_role_options=s.data,r(s.data)),e(!1)}catch(s){console.log(s)}};return E.useEffect(()=>(acfwAdminApp.user_role_options||n(),()=>He("fetch_user_roles")),[]),{options:a,loading:t}},Sd=t=>{const{defaultValue:e,editable:a,fixtures:r,onChange:n}=t,{options:c,loading:s}=yd();return React.createElement("div",null,React.createElement(O,{mode:"multiple",placeholder:r==null?void 0:r.placeholder,disabled:!a,defaultValue:e.length?e:void 0,options:c,loading:s,onChange:o=>n(o)}))},Td=t=>{const{fixtures:e,onChange:a}=t,[r,n]=E.useState([]),c=async o=>{const l=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_products_and_variations",term:o,security:acfwAdminApp.nonces.search_products,exclude:r.map(d=>d.value)}});return Object.keys(l).map(d=>({label:l[d],value:d}))},s=o=>{n(o),a(o)};return React.createElement(ae,{mode:"multiple",placeholder:e==null?void 0:e.placeholder,fetchOptions:c,onChange:s,fixtures:e,style:{width:"100%"}})},Cd=t=>{const{fixtures:e,onChange:a}=t,[r,n]=E.useState([]),c=async o=>{const l=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_taxonomy_terms",term:o,taxonomy:"product_cat",security:acfwAdminApp.nonces.search_taxonomy_terms,exclude:r.map(d=>d.value)}});return Object.keys(l).map(d=>({label:l[d].name,value:l[d].term_id}))},s=o=>{n(o),a(o)};return React.createElement(ae,{mode:"multiple",placeholder:e==null?void 0:e.placeholder,fetchOptions:c,onChange:s,fixtures:e,style:{width:"100%"}})},bd=t=>{const{defaultValue:e,editable:a,onChange:r}=t,n=e?window.moment(e):void 0,c=s=>{var o;r((o=s==null?void 0:s.format("YYYY-MM-DD HH:mm:ss"))!=null?o:"")};return React.createElement(st,{showTime:!0,defaultValue:n,disabled:!a,onChange:c})},vd=t=>{const{fixtures:e,onChange:a}=t,[r,n]=E.useState([]),c=async o=>{const l=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"acfw_search_coupons",term:o,security:acfwAdminApp.nonces.search_products,include:!0,exclude:r.map(d=>d.value)}});return Object.keys(l).map(d=>({label:l[d],value:d}))},s=o=>{n(o),a(o)};return React.createElement(ae,{mode:"multiple",placeholder:e==null?void 0:e.placeholder,fetchOptions:c,onChange:s,fixtures:e,style:{width:"100%"},value:r})},wd=t=>{const{fixtures:e,onChange:a}=t,[r,n]=E.useState([]),c=async o=>{const l=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_customers",term:o,security:acfwAdminApp.nonces.search_customers,exclude:r.map(d=>d.value)}});return Object.keys(l).map(d=>({label:l[d].replace("&ndash;",""),value:d}))},s=o=>{n(o),a(o)};return React.createElement(ae,{mode:"multiple",placeholder:e==null?void 0:e.placeholder,fetchOptions:c,onChange:s,fixtures:e,style:{width:"100%"},value:r})},Ad=t=>{const{fixtures:e,onChange:a}=t,[r,n]=E.useState([]),c=async o=>{const l=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"acfw_search_product_attributes",term:o,security:acfwAdminApp.nonces.search_products,exclude:r.map(d=>d.value)}});return Object.keys(l).map(d=>({label:l[d],value:d}))},s=o=>{n(o),a(o)};return React.createElement(ae,{mode:"multiple",placeholder:e==null?void 0:e.placeholder,fetchOptions:c,onChange:s,fixtures:e,style:{width:"100%"}})},Gt={coupon_code:pd,number:fd,text:Ed,price:_d,select:gd,textarea:hd,checkbox:Rd,user_roles:Sd,products:Td,product_categories:Cd,product_attributes:Ad,date:bd,coupons:vd,customers:wd};function Od(t){return Gt[t]?Gt[t]:()=>u.createElement("div",null,"Field type not found")}const{setEditCouponTemplateFieldValue:Nd}=Q,Dd=t=>{const{templateField:e,actions:a}=t,{field:r,value:n,field_value:c,fixtures:s}=e,o="input-field-".concat(r),l=Od(s.type),i=d=>{a.setFieldValue({field:e.field,value:d})};return React.createElement("div",{className:"template-field"},React.createElement("div",{className:"template-field-inner"},React.createElement("label",{htmlFor:o},s.label),React.createElement("div",{className:"field-input-wrap"},React.createElement(l,{defaultValue:n,editable:c!=="readonly",fixtures:s,onChange:i}),s.tooltip&&React.createElement(Se,{className:"acfw-field-tooltip",placement:"right",content:s.tooltip,trigger:"click"},React.createElement(Be,null))),!!(e!=null&&e.error)&&React.createElement("div",{className:"field-error"},e.error)))},Pd=t=>({actions:x({setFieldValue:Nd},t)}),Id=$(null,Pd)(Dd),Qe=t=>{const{text:e,onClick:a,...r}=t,n=ne(),c=()=>{typeof a=="function"&&a(),n.goBack()};return React.createElement(I,{onClick:c,...r},e)},kd=t=>{const{group:e,groupKey:a}=t;return React.createElement("div",{className:"condition-group"},e.fields.length?React.createElement("div",{className:"condition-group-fields"},e.fields.map((r,n)=>React.createElement(zo,{key:n,field:r,groupKey:a,fieldKey:n}))):React.createElement("div",{className:"empty-conditions"},"This is an empty condition group, just waiting for you to add some conditions in it..."))};const{setCartConditionItemData:$d}=Q,xd=t=>{const{data:e,actions:a}=t;return React.createElement("div",{className:"cart-conditions"},React.createElement("h2",null,"IF..."),React.createElement("div",{className:"condition-groups"},e.map((r,n)=>React.createElement(React.Fragment,null,r.type==="group_logic"?React.createElement(Ta,{key:n,value:r.value,onChange:c=>a.setCartConditionItemData({groupKey:n,fieldKey:null,data:c})}):React.createElement(kd,{key:n,groupKey:n,group:r})))),React.createElement("h2",null,"...THEN ALLOW COUPON TO BE APPLIED"))},Ld=t=>{var e,a,r;return{data:(r=(a=(e=t.couponTemplates)==null?void 0:e.edit)==null?void 0:a.cart_conditions)!=null?r:[]}},Md=t=>({actions:x({setCartConditionItemData:$d},t)}),Bd=$(Ld,Md)(xd),{validateEditCouponTemplateData:Fd,validateCartConditionsData:Ud,createCouponFromTemplate:jd,setCreatedCouponResponseData:Gd}=Q,Hd=t=>{const{template:e,text:a,size:r,disabled:n,actions:c}=t,[s,o]=E.useState(!1),l=()=>{var m,p;c.validateEditCouponTemplateData(),c.validateCartConditionsData();const i=(m=e==null?void 0:e.fields)==null?void 0:m.filter(g=>g.error);if(!e||i!=null&&i.length)return;const d={id:e.id,fields:e.fields.map(g=>({key:g.field,value:g.value,type:g.fixtures.type})),cart_conditions:(p=e.cart_conditions)!=null?p:[]};o(!0),c.createCouponFromTemplate({data:d,successCB:g=>{o(!1),c.setCreatedCouponResponseData({data:g.data})}})};return React.createElement(I,{loading:s,type:"primary",onClick:l,size:r,disabled:n},a)},qd=t=>{var e,a,r,n;return{template:(a=(e=t.couponTemplates)==null?void 0:e.edit)!=null?a:null,formResponse:(n=(r=t.couponTemplates)==null?void 0:r.formResponse)!=null?n:null}},Vd=t=>({actions:x({validateEditCouponTemplateData:Fd,validateCartConditionsData:Ud,createCouponFromTemplate:jd,setCreatedCouponResponseData:Gd},t)}),Yd=$(qd,Vd)(Hd);var qe={};function Je(t){"@babel/helpers - typeof";return Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(t)}Object.defineProperty(qe,"__esModule",{value:!0});qe.CopyToClipboard=void 0;var Pe=Da(E),zd=Da(un),Wd=["text","onCopy","options","children"];function Da(t){return t&&t.__esModule?t:{default:t}}function Ht(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function qt(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Ht(Object(a),!0).forEach(function(r){ht(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ht(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Kd(t,e){if(t==null)return{};var a=Qd(t,e),r,n;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(n=0;n<c.length;n++)r=c[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Qd(t,e){if(t==null)return{};var a={},r=Object.keys(t),n,c;for(c=0;c<r.length;c++)n=r[c],!(e.indexOf(n)>=0)&&(a[n]=t[n]);return a}function Jd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xd(t,e,a){return e&&Vt(t.prototype,e),a&&Vt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xe(t,e)}function Xe(t,e){return Xe=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},Xe(t,e)}function em(t){var e=am();return function(){var r=Me(t),n;if(e){var c=Me(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return tm(this,n)}}function tm(t,e){if(e&&(Je(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pa(t)}function Pa(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function am(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},Me(t)}function ht(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Ia=function(t){Zd(a,t);var e=em(a);function a(){var r;Jd(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return r=e.call.apply(e,[this].concat(c)),ht(Pa(r),"onClick",function(o){var l=r.props,i=l.text,d=l.onCopy,m=l.children,p=l.options,g=Pe.default.Children.only(m),h=(0,zd.default)(i,p);d&&d(i,h),g&&g.props&&typeof g.props.onClick=="function"&&g.props.onClick(o)}),r}return Xd(a,[{key:"render",value:function(){var n=this.props;n.text,n.onCopy,n.options;var c=n.children,s=Kd(n,Wd),o=Pe.default.Children.only(c);return Pe.default.cloneElement(o,qt(qt({},s),{},{onClick:this.onClick}))}}]),a}(Pe.default.PureComponent);qe.CopyToClipboard=Ia;ht(Ia,"defaultProps",{onCopy:void 0,options:void 0});var nm=qe,Ze=nm.CopyToClipboard;Ze.CopyToClipboard=Ze;var rm=Ze;const cm=t=>{const{value:e,...a}=t;return React.createElement(K.Group,{className:"copy-input-field-component",compact:!0},React.createElement(K,{style:{width:"calc(100% - 46px)"},...a,value:e,readOnly:!0}),React.createElement(rm.CopyToClipboard,{text:e,onCopy:()=>W.success("Copy success")},React.createElement(I,null,React.createElement(dn,null))))};const{clearCreatedCouponResponseData:sm}=Q,om=t=>{const{formResponse:e,actions:a}=t,{labels:r}=acfwAdminApp.coupon_templates_page;if(e){const{message:n,coupon_edit_url:c}=e;return React.createElement("div",{className:"coupon-template-success-page"},React.createElement("div",{className:"inner"},React.createElement("div",{className:"content-box"},React.createElement("h2",null,n),React.createElement("p",null,r.success_page_desc),React.createElement(Ee,{bordered:!0,size:"small",layout:"horizontal",column:1},e.fields.map(s=>React.createElement(Ee.Item,{key:s.key,label:s.label},["coupon_code","coupon_url"].includes(s.key)?React.createElement(cm,{value:s.value}):s.value)),!!e.cart_conditions&&React.createElement(Ee.Item,{label:r.cart_conditions},e.cart_conditions))),React.createElement("div",{className:"actions-box"},React.createElement(Qe,{className:"create-another-btn",text:r.create_another_coupon,type:"primary",size:"large",onClick:()=>a.clearCreatedCouponResponseData()}),React.createElement(I,{href:"".concat(c,"&sendcoupon"),size:"large"},r.send_coupon),React.createElement(I,{href:c,size:"large"},r.edit_coupon))))}return null},lm=t=>{var e,a;return{formResponse:(a=(e=t.couponTemplates)==null?void 0:e.formResponse)!=null?a:null}},im=t=>({actions:x({clearCreatedCouponResponseData:sm},t)}),um=$(lm,im)(om);const{readCouponTemplate:dm,setEditCouponTemplate:mm,validateEditCouponTemplateData:pm,setCreatedCouponResponseData:fm}=Q,Em=t=>{var y,C;const{template:e,formResponse:a,actions:r}=t,[n,c]=E.useState(!0),[s,o]=E.useState(0),{labels:l}=acfwAdminApp.coupon_templates_page,i=new URLSearchParams(_e().search),d=(y=i.get("id"))!=null?y:"0",m=(C=i.get("is_review"))!=null?C:!1,p={rows:2,width:100},g=[{title:l.coupon_details}];e!=null&&e.cart_conditions&&e.cart_conditions.length>0&&g.push({title:l.cart_conditions});const h=w=>{var b;if(w==="prev"){o(s-1);return}let N=[];switch(s){case 0:r.validateEditCouponTemplateData(),N=(b=e==null?void 0:e.fields)==null?void 0:b.filter(T=>T.error);break}N.length||o(s+1)};return E.useEffect(()=>{e&&(e!=null&&e.fields)||r.readCouponTemplate({id:parseInt(d),isReview:!!m,successCB:w=>{c(!1),r.setEditCouponTemplate({data:w.data})},failCB:()=>c(!1)})},[]),e!=null&&e.fields?a?React.createElement(um,null):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(Y,{gutter:16},React.createElement(P,{span:18},React.createElement("div",{className:"template-form-main"},e?React.createElement(React.Fragment,null,React.createElement("div",{className:"template-heading"},React.createElement("h2",null,e.title),React.createElement("p",null,e.description)),React.createElement("div",{className:"form-instruction"},React.createElement("em",null,l.form_instruction))):React.createElement(te,{active:!0,paragraph:p}),g.length>1?React.createElement("div",{className:"template-steps"},React.createElement(mn,{current:s,items:g})):null,s===0?React.createElement("div",{className:"template-fields"},e.fields.map((w,N)=>{var b;return React.createElement(Id,{key:"".concat(w.field,"-").concat((b=w==null?void 0:w.error)!=null?b:""),templateField:w})})):null,s===1?React.createElement(Bd,null):null),g.length>1?React.createElement("div",{className:"template-step-actions"},React.createElement(I,{type:"default",disabled:s===0,onClick:()=>h("prev")},"Previous"),React.createElement(I,{type:"primary",disabled:s===g.length-1,onClick:()=>h("next")},"Next")):null),React.createElement(P,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(Yd,{text:l.create_coupon,size:"large",disabled:s!==g.length-1}),React.createElement(Qe,{text:l.cancel,onClick:()=>r.setEditCouponTemplate({data:null}),size:"large"}))))):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(Y,{gutter:16},React.createElement(P,{span:18},React.createElement("div",{className:"template-form-main template-loading"},n?React.createElement(be,null):React.createElement("p",{className:"template-not-found"},l.template_not_found))),React.createElement(P,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(Qe,{text:l.go_back,onClick:()=>r.setEditCouponTemplate({data:null}),size:"large"})))))},_m=t=>{var e,a,r,n;return{template:(a=(e=t.couponTemplates)==null?void 0:e.edit)!=null?a:null,formResponse:(n=(r=t.couponTemplates)==null?void 0:r.formResponse)!=null?n:null}},gm=t=>({actions:x({readCouponTemplate:dm,setEditCouponTemplate:mm,validateEditCouponTemplateData:pm,setCreatedCouponResponseData:fm},t)}),hm=$(_m,gm)(Em);const{togglePremiumModal:Rm}=Q,ym=t=>{var g,h;const{showModal:e,actions:a}=t,{title:r,labels:n,enable_review_tab:c}=acfwAdminApp.coupon_templates_page,s=ne(),o=_e(),l=new URLSearchParams(o.search),i=(g=l.get("id"))!=null?g:null,d=ie(),m=(h=l.get("cttab"))!=null?h:"main",p=y=>{s.push("".concat(d,"admin.php?page=acfw-coupon-templates&cttab=").concat(y))};return React.createElement("div",{className:"coupon-templates-page"},React.createElement(pe,{title:r,className:"coupon-templates-header"}),i?React.createElement(hm,null):React.createElement(fe,{defaultActiveKey:m,className:"coupon-templates-tabs",onTabClick:p},React.createElement(fe.TabPane,{tab:n.recently_used_templates,key:"recent"},React.createElement(Y,{gutter:16},React.createElement(P,{xs:24,sm:24,md:18,lg:18,xl:18},React.createElement(Hu,null)))),React.createElement(fe.TabPane,{tab:n.available_templates,key:"main"},React.createElement(Y,{gutter:16},React.createElement(P,{xs:24,sm:24,md:18,lg:18,xl:18},React.createElement(Ju,null)),React.createElement(P,{xs:24,sm:24,md:6,lg:6,xl:6},React.createElement(md,null)))),c&&React.createElement(fe.TabPane,{tab:n.review_templates,key:"review"},React.createElement(Y,{gutter:16},React.createElement(P,{xs:24,sm:24,md:18,lg:18,xl:18},React.createElement(cd,null))))),React.createElement(we,{className:"coupon-templates-premium-modal",open:e,centered:!0,onCancel:()=>a.togglePremiumModal({show:!1}),footer:null},React.createElement(pt,{hideUpgrade:!0}),React.createElement("p",null,n.premium_modal_text),React.createElement(I,{type:"primary",href:acfwAdminApp.coupon_templates_page.link,size:"large",target:"_blank"},n.premium_modal_btn)))},Sm=t=>{var e,a;return{showModal:(a=(e=t.couponTemplates)==null?void 0:e.premiumModal)!=null?a:!1}},Tm=t=>({actions:x({togglePremiumModal:Rm},t)}),Cm=$(Sm,Tm)(ym),bm=parseInt(acfwpElements.is_lpfw_active),vm=parseInt(acfwpElements.is_agc_active),{setStorePage:wm}=ge,{readAdminNotices:Am}=dt;acfwpElements.axiosInstance=M;const Om=t=>{const{page:e,actions:a}=t,n=new URLSearchParams(_e().search).get("page");return acfwpElements.appPage=n,E.useEffect(()=>{a.setStorePage({data:n||""})},[n,a]),E.useEffect(()=>{a.readAdminNotices({})},[]),u.createElement("div",{className:"app"},e==="acfw-dashboard"?u.createElement(ri,null):null,e==="acfw-store-credits"?u.createElement(Hi,null):null,e==="acfw-coupon-templates"?u.createElement(Cm,null):null,e==="acfw-settings"?u.createElement(Eu,null):null,e.includes("acfw-license")?u.createElement(Tu,null):null,e==="acfw-premium"?u.createElement(bu,null):null,e==="acfw-help"?u.createElement(vu,null):null,e==="acfw-about"?u.createElement(Cu,null):null,e==="acfw-loyalty-program"&&!bm?u.createElement(Au,null):null,e==="acfw-advanced-gift-cards"&&!vm?u.createElement(Nu,null):null)},Nm=t=>({page:t.page}),Dm=t=>({actions:x({setStorePage:wm,readAdminNotices:Am},t)}),Pm=$(Nm,Dm)(Om);const{setStorePage:Im}=ge,km=t=>{const{page:e,notices:a,actions:r}=t,[n,c]=E.useState(""),s=ne(),o=ie(),{coupon_nav:{toplevel:l,dashboard:i,links:d},app_pages:m}=acfwAdminApp,p=g=>{s.push("".concat(o,"admin.php?page=").concat(g)),r.setStorePage({data:g})};return E.useEffect(()=>{document.body.classList.add(e),n&&document.body.classList.remove(n),c(e)},[e]),React.createElement(React.Fragment,null,React.createElement("a",{href:"".concat(o,"edit.php?post_type=shop_coupon"),className:"wp-has-submenu wp-has-current-submenu wp-menu-open menu-top toplevel_page_acfw-admin"},React.createElement("div",{className:"wp-menu-arrow"},React.createElement("div",null)),React.createElement("div",{className:"wp-menu-image dashicons-before dashicons-tickets-alt"},React.createElement("br",null)),React.createElement("div",{className:"wp-menu-name"},l,0<a.length&&React.createElement(React.Fragment,null,"",React.createElement("span",{className:"update-plugins count-".concat(a.length)},React.createElement("span",{className:"notices-count"},a.length))))),React.createElement("ul",{className:"wp-submenu wp-submenu-wrap"},React.createElement("li",{className:"wp-submenu-head","aria-hidden":"true"},l),React.createElement("li",{key:"acfw-dashboard",className:"wp-first-item ".concat(e==="acfw-dashboard"?"current":"")},React.createElement("button",{className:"buttonlink dashboard-link",onClick:()=>p("acfw-dashboard")},i)),d.map(({link:g,text:h},y)=>React.createElement("li",{key:y},React.createElement("a",{href:g},h))),m.map(({slug:g,label:h})=>React.createElement("li",{key:g,className:g===e?"current":""},React.createElement("button",{className:"buttonlink ".concat(g,"-link"),onClick:()=>p(g)},h)))))},$m=t=>({page:t.page,notices:t.adminNotices}),xm=t=>({actions:x({setStorePage:Im},t)}),Lm=$($m,xm)(km),Rt=ie(),yt=Nl(),Mm={element:u,dom:et,router:{BrowserRouter:tt,Route:at,useLocation:_e,useHistory:ne,Link:Yt,Redirect:xa},redux:{bindActionCreators:x,createStore:Qt,combineReducers:Jt,applyMiddleware:Xt,createSagaMiddleware:Kt,connect:$,sagaEffects:{all:Wt,put:G,call:q,takeEvery:j}},lodash:window.lodash,antd:pn,antdIcons:kn,moment:window.moment,pathPrefix:Rt,validateURL:Ca,appStore:{Provider:nt,store:yt,storeActions:{...ge}}};acfwpElements={...acfwpElements,...Mm};document.querySelectorAll("#acfw_admin_app").forEach(t=>{et.render(u.createElement(nt,{store:yt},u.createElement(tt,null,u.createElement(at,{path:"".concat(Rt,"admin.php"),component:Pm}))),t)});document.querySelectorAll("#toplevel_page_acfw-admin").forEach(t=>{et.render(u.createElement(nt,{store:yt},u.createElement(tt,null,u.createElement(at,{path:"".concat(Rt,"admin.php"),component:Lm}))),t)});export{Bm as __vite_legacy_guard};
